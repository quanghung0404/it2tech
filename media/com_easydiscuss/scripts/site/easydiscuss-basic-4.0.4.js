var ed;!function(){if(!ed||!ed.requirejs){ed?require=ed:ed={};var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;
for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){(c||!hasProp(a,e))&&(!d||"object"!=typeof b||!b||isArray(b)||isFunction(b)||b instanceof RegExp?a[e]=b:(a[e]||(a[e]={}),mixin(a[e],b,c,d)))}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);
return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function q(a){var b,c;for(b=0;b<a.length;b++)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(0===b||1===b&&".."===a[2]||".."===a[b-1])continue;b>0&&(a.splice(b-1,2),b-=2)}}function r(a,b,c){var d,e,f,h,i,j,k,l,m,n,o,p,r=b&&b.split("/"),s=g.map,t=s&&s["*"];if(a&&(a=a.split("/"),k=a.length-1,g.nodeIdCompat&&jsSuffixRegExp.test(a[k])&&(a[k]=a[k].replace(jsSuffixRegExp,"")),"."===a[0].charAt(0)&&r&&(p=r.slice(0,r.length-1),a=p.concat(a)),q(a),a=a.join("/")),c&&s&&(r||t)){f=a.split("/");
a:for(h=f.length;h>0;h-=1){if(j=f.slice(0,h).join("/"),r)for(i=r.length;i>0;i-=1)if(e=getOwn(s,r.slice(0,i).join("/")),e&&(e=getOwn(e,j))){l=e,m=h;break a}!n&&t&&getOwn(t,j)&&(n=getOwn(t,j),o=h)}!l&&n&&(l=n,m=o),l&&(f.splice(0,m,l),a=f.join("/"))}return d=getOwn(g.pkgs,a),d?d:a}function s(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===d.contextName?(b.parentNode.removeChild(b),!0):void 0})}function t(a){var b=getOwn(g.paths,a);
return b&&isArray(b)&&b.length>1?(b.shift(),d.require.undef(a),d.makeRequire(null,{skipMap:!0})([a]),!0):void 0}function u(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function v(a,b,c,e){var f,g,h,i,j=null,k=b?b.name:null,m=a,n=!0,q="";return a||(n=!1,a="_@r"+(o+=1)),i=u(a),j=i[0],a=i[1],j&&(j=r(j,k,e),g=getOwn(l,j)),a&&(j?q=g&&g.normalize?g.normalize(a,function(a){return r(a,k,e)}):-1===a.indexOf("!")?r(a,k,e):a:(q=r(a,k,e),i=u(q),j=i[0],q=i[1],c=!0,f=d.nameToUrl(q))),h=!j||g||c?"":"_unnormalized"+(p+=1),{prefix:j,name:q,parentMap:b,unnormalized:!!h,url:f,originalName:m,isDefine:n,id:(j?j+"!"+q:q)+h}
}function w(a){var b=a.id,c=getOwn(h,b);return c||(c=h[b]=new d.Module(a)),c}function x(a,b,c){var d=a.id,e=getOwn(h,d);!hasProp(l,d)||e&&!e.defineEmitComplete?(e=w(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(l[d])}function y(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(h,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function z(){globalDefQueue.length&&(each(globalDefQueue,function(a){var b=a[0];"string"==typeof b&&(d.defQueueMap[b]=!0),k.push(a)
}),globalDefQueue=[])}function A(a){delete h[a],delete i[a]}function B(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(h,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,l[f]),a.check()):B(g,b,c))}),c[d]=!0)}function C(){var a,c,e=1e3*g.waitSeconds,h=e&&d.startTime+e<(new Date).getTime(),j=[],k=[],l=!1,m=!0;if(!b){if(b=!0,eachProp(i,function(a){var b=a.map,d=b.id;if(a.enabled&&(b.isDefine||k.push(a),!a.error))if(!a.inited&&h)t(d)?(c=!0,l=!0):(j.push(d),s(d));
else if(!a.inited&&a.fetched&&b.isDefine&&(l=!0,!b.prefix))return m=!1}),h&&j.length)return a=makeError("timeout","Load timeout for modules: "+j,null,j),a.contextName=d.contextName,y(a);m&&each(k,function(a){B(a,{},{})}),h&&!c||!l||!isBrowser&&!isWebWorker||f||(f=setTimeout(function(){f=0,C()},50)),b=!1}}function D(a){hasProp(l,a[0])||w(v(a[0],null,!0)).init(a[1],a[2])}function E(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function F(a){var b=a.currentTarget||a.srcElement;
return E(b,d.onScriptLoad,"load","onreadystatechange"),E(b,d.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function G(){var a;for(z();k.length;){if(a=k.shift(),null===a[0])return y(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));D(a)}d.defQueueMap={}}var b,c,d,e,f,g={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},h={},i={},j={},k=[],l={},m={},n={},o=1,p=1;return e={require:function(a){return a.require?a.require:a.require=d.makeRequire(a.map)
},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?l[a.map.id]=a.exports:a.exports=l[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return getOwn(g.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},c=function(a){this.events=getOwn(j,a.id)||{},this.map=a,this.shim=getOwn(g.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},c.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)
})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,d.startTime=(new Date).getTime();var a=this.map;return this.shim?(d.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})),void 0):a.prefix?this.callPlugin():this.load()
}},load:function(){var a=this.map.url;m[a]||(m[a]=!0,d.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,e=this.depExports,f=this.exports,g=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(g)){try{f=d.execCb(c,g,e,f)}catch(h){a=h}if(this.map.isDefine&&void 0===f&&(b=this.module,b?f=b.exports:this.usingExports&&(f=this.exports)),a){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",y(this.error=a);
"undefined"!=typeof console&&console.error?console.error(a):req.onError(a)}}else f=g;if(this.exports=f,this.map.isDefine&&!this.ignore&&(l[c]=f,req.onResourceLoad)){var i=[];each(this.depMaps,function(a){i.push(a.normalizedMap||a)}),req.onResourceLoad(d,this.map,i)}A(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(d.defQueueMap,c)||this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,c=v(a.prefix);
this.depMaps.push(c),x(c,"defined",bind(this,function(c){var e,f,i,j=getOwn(n,this.map.id),k=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,m=d.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(c.normalize&&(k=c.normalize(k,function(a){return r(a,l,!0)})||""),f=v(a.prefix+"!"+k,this.map.parentMap),x(f,"defined",bind(this,function(a){this.map.normalizedMap=f,this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),i=getOwn(h,f.id),i&&(this.depMaps.push(f),this.events.error&&i.on("error",bind(this,function(a){this.emit("error",a)
})),i.enable()),void 0):j?(this.map.url=d.nameToUrl(j),this.load(),void 0):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(h,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&A(a.map.id)}),y(a)}),e.fromText=bind(this,function(c,f){var h=a.name,i=v(h),j=useInteractive;f&&(c=f),j&&(useInteractive=!1),w(i),hasProp(g.config,b)&&(g.config[h]=g.config[b]);try{req.exec(c)}catch(k){return y(makeError("fromtexteval","fromText eval for "+b+" failed: "+k,k,[b]))
}j&&(useInteractive=!0),this.depMaps.push(i),d.completeLoad(h),m([h],e)}),c.load(a.name,m,e,g),void 0)})),d.enable(c,this),this.pluginMaps[c.id]=c},enable:function(){i[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,f,g;if("string"==typeof a){if(a=v(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,g=getOwn(e,a.id))return this.depExports[b]=g(this),void 0;this.depCount+=1,x(a,"defined",bind(this,function(a){this.undefed||(this.defineDep(b,a),this.check())
})),this.errback?x(a,"error",bind(this,this.errback)):this.events.error&&x(a,"error",bind(this,function(a){this.emit("error",a)}))}c=a.id,f=h[c],hasProp(e,c)||!f||f.enabled||d.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(h,a.id);b&&!b.enabled&&d.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},d={config:g,contextName:a,registry:h,defined:l,urlFetched:m,defQueue:k,defQueueMap:{},Module:c,makeModuleMap:v,nextTick:req.nextTick,onError:y,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");
var b=g.shim,c={paths:!0,bundles:!0,config:!0,map:!0};eachProp(a,function(a,b){c[b]?(g[b]||(g[b]={}),mixin(g[b],a,!0,!0)):g[b]=a}),a.bundles&&eachProp(a.bundles,function(a,b){each(a,function(a){a!==b&&(n[a]=b)})}),a.shim&&(eachProp(a.shim,function(a,c){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=d.makeShimExports(a)),b[c]=a}),g.shim=b),a.packages&&each(a.packages,function(a){var b,c;a="string"==typeof a?{name:a}:a,c=a.name,b=a.location,b&&(g.paths[c]=a.location),g.pkgs[c]=a.name+"/"+(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")
}),eachProp(h,function(a,b){a.inited||a.map.unnormalized||(a.map=v(b,null,!0))}),(a.deps||a.callback)&&d.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,c){function f(g,i,j){var k,m,n;return c.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof g?isFunction(i)?y(makeError("requireargs","Invalid require call"),j):b&&hasProp(e,g)?e[g](h[b.id]):req.get?req.get(d,g,b,f):(m=v(g,b,!1,!0),k=m.id,hasProp(l,k)?l[k]:y(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(G(),d.nextTick(function(){G(),n=w(v(null,b)),n.skipMap=c.skipMap,n.init(g,i,j,{enabled:!0}),C()
}),f)}return c=c||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var c,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(c=a.substring(e,a.length),a=a.substring(0,e)),d.nameToUrl(r(a,b&&b.id,!0),c,!0)},defined:function(a){return hasProp(l,v(a,b,!1,!0).id)},specified:function(a){return a=v(a,b,!1,!0).id,hasProp(l,a)||hasProp(h,a)}}),b||(f.undef=function(a){z();var c=v(a,b,!0),e=getOwn(h,a);e.undefed=!0,s(a),delete l[a],delete m[c.url],delete j[a],eachReverse(k,function(b,c){b[0]===a&&k.splice(c,1)
}),delete d.defQueueMap[a],e&&(e.events.defined&&(j[a]=e.events),A(a))}),f},enable:function(a){var b=getOwn(h,a.id);b&&w(a).enable()},completeLoad:function(a){var b,c,e,f=getOwn(g.shim,a)||{},i=f.exports;for(z();k.length;){if(c=k.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);D(c)}if(d.defQueueMap={},e=getOwn(h,a),!b&&!hasProp(l,a)&&e&&!e.inited){if(!(!g.enforceDefine||i&&getGlobal(i)))return t(a)?void 0:y(makeError("nodefine","No define call for "+a,null,[a]));D([a,f.deps||[],f.exportsFn])
}C()},nameToUrl:function(a,b,c){var e,f,h,i,j,k,l,m=getOwn(g.pkgs,a);if(m&&(a=m),l=getOwn(n,a))return d.nameToUrl(l,b,c);if(req.jsExtRegExp.test(a))j=a+(b||"");else{for(e=g.paths,f=a.split("/"),h=f.length;h>0;h-=1)if(i=f.slice(0,h).join("/"),k=getOwn(e,i)){isArray(k)&&(k=k[0]),f.splice(0,h,k);break}j=f.join("/"),j+=b||(/^data\:|\?/.test(j)||c?"":".js"),j=("/"===j.charAt(0)||j.match(/^[\w\+\.\-]+:/)?"":g.baseUrl)+j}return g.urlArgs?j+((-1===j.indexOf("?")?"?":"&")+g.urlArgs):j},load:function(a,b){req.load(d,a,b)
},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=F(a);d.completeLoad(b.id)}},onScriptError:function(a){var b=F(a);if(!t(b.id)){var c=[];return eachProp(h,function(a,d){0!==d.indexOf("_@r")&&each(a.depMaps,function(a){return a.id===b.id&&c.push(d),!0})}),y(makeError("scripterror",'Script error for "'+b.id+(c.length?'", needed by: '+c.join(", "):'"'),a,[b.id]))}}},d.require=d.makeRequire(),d
}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.22",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;
if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)
}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a){var d=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");
return d.type=a.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d},req.load=function(a,b,c){var e,d=a&&a.config||{};if(isBrowser)return e=req.createNode(d,b,c),d.onNodeCreated&&d.onNodeCreated(e,d,b,c),e.setAttribute("data-requirecontext",a.contextName),e.setAttribute("data-requiremodule",b),!e.attachEvent||e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0||isOpera?(e.addEventListener("load",a.onScriptLoad,!1),e.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,e.attachEvent("onreadystatechange",a.onScriptLoad)),e.src=c,currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;
if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0
}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),e?(e.defQueue.push([a,b,c]),e.defQueueMap[a]=!0):globalDefQueue.push([a,b,c])
},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),ed.requirejs=requirejs,ed.require=require,ed.define=define}}(),ed.define("requireLib",function(){}),ed.define("ed",function(){}),ed.require.config({baseUrl:window.ed_site?window.ed_site+"media/com_easydiscuss/scripts":"/media/com_easydiscuss/scripts",paths:{"abstract":"vendors/abstract",easydiscuss:"vendors/easydiscuss",edjquery:"vendors/jquery.joomla","jquery.utils":"vendors/jquery.utils","jquery.uri":"vendors/jquery.uri","jquery.server":"vendors/jquery.server","jquery.migrate":"vendors/jquery.migrate","jquery.popbox":"vendors/jquery.popbox",dialog:"vendors/dialog",lodash:"vendors/lodash",bootstrap:"vendors/bootstrap",typeahead:"vendors/typeahead",chosen:"vendors/jquery.chosen",chartjs:"vendors/chart",selectize:"vendors/selectize",composer:"vendors/composer",markitup:"vendors/markitup","jquery.expanding":"vendors/jquery.expanding","jquery.atwho":"vendors/jquery.atwho","jquery.caret":"vendors/jquery.caret","jquery.ui.core":"site/vendors/jquery.ui.core","jquery.ui.position":"site/vendors/jquery.ui.position","jquery.ui.autocomplete":"site/vendors/jquery.ui.autocomplete","jquery.ui.widget":"site/vendors/jquery.ui.widget","jquery.ui.menu":"site/vendors/jquery.ui.menu","jquery.raty":"site/vendors/jquery.raty",cropper:"site/vendors/cropper","jquery.scrollto":"site/vendors/jquery.scrollto","jquery.fancybox":"site/vendors/jquery.fancybox",historyjs:"site/vendors/history",responsive:"site/vendors/responsive",dependencies:"site/src/dependencies",api:"site/src/api"}}),ed.define("edq",["edjquery","jquery.uri","bootstrap","jquery.popbox","jquery.ui.position","jquery.utils","jquery.server","jquery.migrate","lodash","dialog","responsive","api","historyjs"],function(a){return ed.require(["dependencies"]),a
}),ed.define("abstract",["edq"],function(a){var b=function(a){this.data=a,"function"==typeof this.data&&(this.data=this.data.call(this,this)),this.element=null,this.options={},this.definitions={},this.attach=function(a,b){this.definitions.identifier=b}};return b.prototype.execute=function(b,c){this.element=a(b);var d=this;return this.options=a.extend({},this.data.opts,c),a.each(this.data,function(a,b){d.register(a,b)}),a.each(this.options,function(a,b){d.registerProperties(a,b)}),this.construct(),this},b.prototype.construct=function(){var a=this.init;
"function"==typeof a&&a.call(this,this.element)},b.prototype.register=function(a,b){return a.match(/^\{.+\}/)?(this.registerEvent(a,b),void 0):(this[a]=b,void 0)},b.prototype.registerProperties=function(a,b){if(b){a=a.replace(/\{/,""),a=a.replace(/\}/,"");var c=this;this[a]=function(){var a=c.element.find(b);return a}}},b.prototype.registerEvent=function(b,c){var d=this,e=b.match(/^\{.+\}/),e=e[0],f=this.element.find(this.options[e]),g=a.trim(b.replace(/^\{.+\}/,"")),h=c;f.live(g,function(b){h.apply(d,[a(this),b])
})},b}),ed.define("bootstrap",["edjquery"],function(a){jQuery=a,+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-ed-toggle="buttons"]'),b=!0;
if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this
},a(document).on("click.bs.button.data-api","[data-ed-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);
for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()
},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()
},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.triggerHandler(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d.split("-")[0]),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);
var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)
}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),0===["top","bottom"].indexOf(b.split("-")[0])){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")
}0===["left","right"].indexOf(b.split("-")[0])&&this.replaceArrow(j-f,j,"top"),c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function e(){"in"!=b.hoverState&&c.detach()}var b=this,c=this.tip(),d=a.Event("hide.bs."+this.type);return this.$element.triggerHandler(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?c.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)
},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"left-top"==a?{top:b.top,left:b.left-c}:"left-bottom"==a?{top:b.top+b.height-d,left:b.left-c}:"right-top"==a?{top:b.top,left:b.left+b.width}:"right-bottom"==a?{top:b.top+b.height-d,left:b.left+b.width}:"top-left"==a?{top:b.top-d,left:b.left}:"top-right"==a?{top:b.top-d,left:b.left+b.width-c}:"bottom-left"==a?{top:b.top+b.height,left:b.left}:"bottom-right"==a?{top:b.top+b.height,left:b.left+b.width-c}:"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}
},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1
},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()
})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div id="ed" class="popover popover--ed"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS
},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)
},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()
};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;
var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.dimension();
this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350),void 0):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;
a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-ed-toggle=collapse]",function(b){var d,c=a(this),e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":c.data(),i=c.attr("data-parent"),j=i&&a(i);
g&&g.transitioning||(j&&j.find('[data-ed-toggle=collapse][data-parent="'+i+'"]').not(c).addClass("collapsed"),c[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function e(){a(b).remove(),a(c).each(function(b){var c=f(a(this));c.hasClass("open")&&(c.triggerHandler(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown"))})}function f(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));
var d=c&&a(c);return d&&d.length?d:b.parent()}var b=".dropdown-backdrop",c="[data-ed-toggle=dropdown]",d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.prototype.toggle=function(b){var c=a(this);if(!c.is(".disabled, :disabled")){var d=f(c),g=d.hasClass("open");if(e(),!g){if("ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",e),d.triggerHandler(b=a.Event("show.bs.dropdown")),b.isDefaultPrevented())return;d.toggleClass("open").trigger("shown.bs.dropdown"),c.focus()
}return!1}},d.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=f(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(c).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",e);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");
e||c.data("bs.dropdown",e=new d(this)),"string"==typeof b&&e[b].call(c)})},a.fn.dropdown.Constructor=d,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown_ form, .dropdown-static",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",c,d.prototype.toggle).on("keydown.bs.dropdown.data-api",c+", [role=menu]",d.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)
};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.triggerHandler(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()
}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g).emulateTransitionEnd(150):g(),e.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-ed-toggle="tab"], [data-ed-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")
}),a(document).on("mouseover.popover.data-ed-api","[data-ed-provide=popover]",function(){a(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")}),a(document).on("click.button.data-ed-api","[data-ed-toggle-value]",function(){var b=a(this),d=(b.siblings("[data-ed-toggle-value]"),b.parents('[data-ed-toggle="radio-buttons"]'));if(!d.hasClass("disabled")&&d.length>0){var e=b.data("ed-toggle-value");return d.find("input[type=hidden]").val(e).trigger("change"),void 0
}}),a(document).on("change.data-ed-input",'[data-ed-toggle="radio-buttons"] input[type=hidden]',function(){{var b=a(this),c=b.siblings("[data-ed-toggle-value]");b.val()}c.removeClass("active").filter('[data-ed-toggle-value="'+b.val()+'"]').addClass("active")})}(jQuery);var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=a(this.options.menu),this.$appendTo=this.options.appendTo?a(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1,this.afterSelect=this.options.afterSelect,this.addItem=!1
};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").data("value");if(this.$element.data("active",a),this.autoSelect||a){var b=this.updater(a);b||(b=""),this.$element.val(this.displayText(b)||b).change(),this.afterSelect(b)}return this.hide()},updater:function(a){return a},setSource:function(a){this.source=a},show:function(){var c,b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});c="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;
var d;return d=this.shown?this.$menu:this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element),d.css({top:b.top+b.height+c,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){if(this.query="undefined"!=typeof b&&null!==b?b:this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var d=a.proxy(function(){a.isFunction(this.source)?this.process(this.source(this.query,a.proxy(this.process,this))):this.source&&this.process(this.source)
},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(d,this.delay)},process:function(b){var c=this;return void 0===b&&(b=[]),b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length||this.options.addItem?(b.length>0?this.$element.data("active",b[0]):this.$element.data("active",null),this.options.addItem&&b.push(this.options.addItem),"all"==this.options.items?this.render(b).show():this.render(b.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(a){var b=this.displayText(a);
return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var e,b=[],c=[],d=[];e=a.shift();){var f=this.displayText(e);f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?c.push(e):d.push(e):b.push(e)}return b.concat(c,d)},highlighter:function(b){var f,g,h,i,j,c=a("<div></div>"),d=this.query,e=b.toLowerCase().indexOf(d.toLowerCase());if(f=d.length,0===f)return c.text(b).html();for(;e>-1;)g=b.substr(0,e),h=b.substr(e,f),i=b.substr(e+f),j=a("<strong></strong>").text(h),c.append(document.createTextNode(g)).append(j),b=i,e=b.toLowerCase().indexOf(d.toLowerCase());
return c.append(document.createTextNode(b)).html()},render:function(b){var c=this,d=this,e=!1;return b=a(b).map(function(b,f){var g=d.displayText(f);return b=a(c.options.item).data("value",f),b.find("a").html(c.highlighter(g)),g==d.$element.val()&&(b.addClass("active"),d.$element.data("active",f),e=!0),b[0]}),this.autoSelect&&!e&&(b.first().addClass("active"),this.$element.data("active",b.first().data("value"))),this.$menu.html(b),this},displayText:function(a){return"undefined"!=typeof a&&"undefined"!=typeof a.name&&a.name||a
},next:function(){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))
},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown)switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.shiftKey)return;
a.preventDefault(),this.prev();break;case 40:if(a.shiftKey)return;a.preventDefault(),this.next()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.shown||40!=b.keyCode?this.move(b):this.lookup()},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.preventDefault()
},focus:function(){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup(""))},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0;var c=this.$menu.find(".active");c.removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;return a.fn.typeahead=function(c){var d=arguments;
return"string"==typeof c&&"getActive"==c?this.data("active"):this.each(function(){var e=a(this),f=e.data("typeahead"),g="object"==typeof c&&c;f||e.data("typeahead",f=new b(this,g)),"string"==typeof c&&(d.length>1?f[c].apply(f,Array.prototype.slice.call(d,1)):f[c]())})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:a.noop,addItem:!1,delay:0},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this
},a(document).on("focus.typeahead.data-api",'[data-ed-provide="typeahead"]',function(){var c=a(this);c.data("typeahead")||c.typeahead(c.data())}),a}),ed.define("chartjs",["edjquery"],function(){(function(){"use strict";var a=this,b=a.Chart,c=function(a){this.canvas=a.canvas,this.ctx=a;var c=function(a,b){return a["offset"+b]?a["offset"+b]:document.defaultView.getComputedStyle(a).getPropertyValue(b)},e=this.width=c(a.canvas,"Width")||a.canvas.width,f=this.height=c(a.canvas,"Height")||a.canvas.height;return e=this.width=a.canvas.width,f=this.height=a.canvas.height,this.aspectRatio=this.width/this.height,d.retinaScale(this),this
};c.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipTitleTemplate:"<%= label%>",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",segmentColorDefault:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#B4B482","#B15928"],segmentHighlightColorDefaults:["#CEF6FF","#47A0DC","#DAFFB2","#5BC854","#FFC2C1","#FF4244","#FFE797","#FFA728","#F2DAFE","#9265C2","#DCDCAA","#D98150"],onAnimationProgress:function(){},onAnimationComplete:function(){}}},c.types={};
var d=c.helpers={},e=d.each=function(a,b,c){var d=Array.prototype.slice.call(arguments,3);if(a)if(a.length===+a.length){var e;for(e=0;e<a.length;e++)b.apply(c,[a[e],e].concat(d))}else for(var f in a)b.apply(c,[a[f],f].concat(d))},f=d.clone=function(a){var b={};return e(a,function(c,d){a.hasOwnProperty(d)&&(b[d]=c)}),b},g=d.extend=function(a){return e(Array.prototype.slice.call(arguments,1),function(b){e(b,function(c,d){b.hasOwnProperty(d)&&(a[d]=c)})}),a},h=d.merge=function(){var c=Array.prototype.slice.call(arguments,0);
return c.unshift({}),g.apply(null,c)},i=d.indexOf=function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},m=(d.where=function(a,b){var c=[];return d.each(a,function(a){b(a)&&c.push(a)}),c},d.findNextWhere=function(a,b,c){c||(c=-1);for(var d=c+1;d<a.length;d++){var e=a[d];if(b(e))return e}},d.findPreviousWhere=function(a,b,c){c||(c=a.length);for(var d=c-1;d>=0;d--){var e=a[d];if(b(e))return e}},d.inherits=function(a){var b=this,c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)
},d=function(){this.constructor=c};return d.prototype=b.prototype,c.prototype=new d,c.extend=m,a&&g(c.prototype,a),c.__super__=b.prototype,c}),n=d.noop=function(){},o=d.uid=function(){var a=0;return function(){return"chart-"+a++}}(),p=d.warn=function(a){window.console&&"function"==typeof window.console.warn&&console.warn(a)},q=d.amd="function"==typeof define&&define.amd,r=d.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},s=d.max=function(a){return Math.max.apply(Math,a)},t=d.min=function(a){return Math.min.apply(Math,a)
},v=(d.cap=function(a,b,c){if(r(b)){if(a>b)return b}else if(r(c)&&c>a)return c;return a},d.getDecimalPlaces=function(a){if(a%1!==0&&r(a)){var b=a.toString();if(b.indexOf("e-")<0)return b.split(".")[1].length;if(b.indexOf(".")<0)return parseInt(b.split("e-")[1]);var c=b.split(".")[1].split("e-");return c[0].length+parseInt(c[1])}return 0}),w=d.radians=function(a){return a*(Math.PI/180)},y=(d.getAngleFromPoint=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=2*Math.PI+Math.atan2(d,c);return 0>c&&0>d&&(f+=2*Math.PI),{angle:f,distance:e}
},d.aliasPixel=function(a){return a%2===0?0:.5}),A=(d.splineCurve=function(a,b,c,d){var e=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),f=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),g=d*e/(e+f),h=d*f/(e+f);return{inner:{x:b.x-g*(c.x-a.x),y:b.y-g*(c.y-a.y)},outer:{x:b.x+h*(c.x-a.x),y:b.y+h*(c.y-a.y)}}},d.calculateOrderOfMagnitude=function(a){return Math.floor(Math.log(a)/Math.LN10)}),C=(d.calculateScaleRange=function(a,b,c,d,f){var g=2,h=Math.floor(b/(1.5*c)),i=g>=h,j=[];e(a,function(a){null==a||j.push(a)
});var k=t(j),l=s(j);l===k&&(l+=.5,k>=.5&&!d?k-=.5:l+=.5);for(var m=Math.abs(l-k),n=A(m),o=Math.ceil(l/(1*Math.pow(10,n)))*Math.pow(10,n),p=d?0:Math.floor(k/(1*Math.pow(10,n)))*Math.pow(10,n),q=o-p,r=Math.pow(10,n),u=Math.round(q/r);(u>h||h>2*u)&&!i;)if(u>h)r*=2,u=Math.round(q/r),u%1!==0&&(i=!0);else if(f&&n>=0){if(r/2%1!==0)break;r/=2,u=Math.round(q/r)}else r/=2,u=Math.round(q/r);return i&&(u=g,r=q/u),{steps:u,stepValue:r,min:p,max:p+u*r}},d.template=function(a,b){function d(a,b){var d=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[a]=c[a];
return b?d(b):d}if(a instanceof Function)return a(b);var c={};return d(a,b)}),E=(d.generateLabels=function(a,b,c,d){var f=new Array(b);return a&&e(f,function(b,e){f[e]=C(a,{value:c+d*(e+1)})}),f},d.easingEffects={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)
},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)
},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;
return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2==(a/=.5)?1:(c||(c=.3*1.5),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)*.5+1)
},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-E.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*E.easeInBounce(2*a):.5*E.easeOutBounce(2*a-1)+.5
}}),F=d.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),J=(d.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,1e3/60)}}(),d.animationLoop=function(a,b,c,d,e,f){var g=0,h=E[c]||E.linear,i=function(){g++;
var c=g/b,j=h(c);a.call(f,j,c,g),d.call(f,j,c),b>g?f.animationFrame=F(i):e.apply(f)};F(i)},d.getRelativePosition=function(a){var b,c,d=a.originalEvent||a,e=a.currentTarget||a.srcElement,f=e.getBoundingClientRect();return d.touches?(b=d.touches[0].clientX-f.left,c=d.touches[0].clientY-f.top):(b=d.clientX-f.left,c=d.clientY-f.top),{x:b,y:c}},d.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}),K=d.removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=n
},M=(d.bindEvents=function(a,b,c){a.events||(a.events={}),e(b,function(b){a.events[b]=function(){c.apply(a,arguments)},J(a.chart.canvas,b,a.events[b])})},d.unbindEvents=function(a,b){e(b,function(b,c){K(a.chart.canvas,c,b)})}),N=d.getMaximumWidth=function(a){var b=a.parentNode,c=parseInt(P(b,"padding-left"))+parseInt(P(b,"padding-right"));return b.clientWidth-c},O=d.getMaximumHeight=function(a){var b=a.parentNode,c=parseInt(P(b,"padding-bottom"))+parseInt(P(b,"padding-top"));return b.clientHeight-c},P=d.getStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView.getComputedStyle(a,null).getPropertyValue(b)
},R=(d.getMaximumSize=d.getMaximumWidth,d.retinaScale=function(a){var b=a.ctx,c=a.canvas.width,d=a.canvas.height;window.devicePixelRatio&&(b.canvas.style.width=c+"px",b.canvas.style.height=d+"px",b.canvas.height=d*window.devicePixelRatio,b.canvas.width=c*window.devicePixelRatio,b.scale(window.devicePixelRatio,window.devicePixelRatio))}),S=d.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)},T=d.fontString=function(a,b,c){return b+" "+a+"px "+c},U=d.longestText=function(a,b,c){a.font=b;var d=0;return e(c,function(b){var c=a.measureText(b).width;
d=c>d?c:d}),d},V=d.drawRoundedRectangle=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()};c.instances={},c.Type=function(a,b,d){this.options=b,this.chart=d,this.id=o(),c.instances[this.id]=this,b.responsive&&this.resize(),this.initialize.call(this,a)},g(c.Type.prototype,{initialize:function(){return this
},clear:function(){return S(this.chart),this},stop:function(){return c.animationService.cancelAnimation(this),this},resize:function(a){this.stop();var b=this.chart.canvas,c=N(this.chart.canvas),d=this.options.maintainAspectRatio?c/this.chart.aspectRatio:O(this.chart.canvas);return b.width=this.chart.width=c,b.height=this.chart.height=d,R(this.chart),"function"==typeof a&&a.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:n,render:function(a){if(a&&this.reflow(),this.options.animation&&!a){var b=new c.Animation;
b.numSteps=this.options.animationSteps,b.easing=this.options.animationEasing,b.render=function(a,b){var c=d.easingEffects[b.easing],e=b.currentStep/b.numSteps,f=c(e);a.draw(f,e,b.currentStep)},b.onAnimationProgress=this.options.onAnimationProgress,b.onAnimationComplete=this.options.onAnimationComplete,c.animationService.addAnimation(this,b)}else this.draw(),this.options.onAnimationComplete.call(this);return this},generateLegend:function(){return C(this.options.legendTemplate,this)},destroy:function(){this.clear(),M(this,this.events);
var a=this.chart.canvas;a.width=this.chart.width,a.height=this.chart.height,a.style.removeProperty?(a.style.removeProperty("width"),a.style.removeProperty("height")):(a.style.removeAttribute("width"),a.style.removeAttribute("height")),delete c.instances[this.id]},showTooltip:function(a,b){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var f=function(a){var b=!1;return a.length!==this.activeElements.length?b=!0:(e(a,function(a,c){a!==this.activeElements[c]&&(b=!0)},this),b)}.call(this,a);if(f||b){if(this.activeElements=a,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),a.length>0)if(this.datasets&&this.datasets.length>1){for(var g,h,j=this.datasets.length-1;j>=0&&(g=this.datasets[j].points||this.datasets[j].bars||this.datasets[j].segments,h=i(g,a[0]),-1===h);j--);var k=[],l=[],m=function(){var c,g,i,j,m,b=[],e=[],f=[];
return d.each(this.datasets,function(a){c=a.points||a.bars||a.segments,c[h]&&c[h].hasValue()&&b.push(c[h])}),d.each(b,function(a){e.push(a.x),f.push(a.y),k.push(d.template(this.options.multiTooltipTemplate,a)),l.push({fill:a._saved.fillColor||a.fillColor,stroke:a._saved.strokeColor||a.strokeColor})},this),m=t(f),i=s(f),j=t(e),g=s(e),{x:j>this.chart.width/2?j:g,y:(m+i)/2}}.call(this,h);new c.MultiTooltip({x:m.x,y:m.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:k,legendColors:l,legendColorBackground:this.options.multiTooltipKeyBackground,title:C(this.options.tooltipTitleTemplate,a[0]),chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()
}else e(a,function(a){var b=a.tooltipPosition();new c.Tooltip({x:Math.round(b.x),y:Math.round(b.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:C(this.options.tooltipTemplate,a),chart:this.chart,custom:this.options.customTooltips}).draw()
},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),c.Type.extend=function(a){var b=this,d=function(){return b.apply(this,arguments)};if(d.prototype=f(b.prototype),g(d.prototype,a),d.extend=c.Type.extend,a.name||b.prototype.name){var e=a.name||b.prototype.name,i=c.defaults[b.prototype.name]?f(c.defaults[b.prototype.name]):{};c.defaults[e]=g(i,a.defaults),c.types[e]=d,c.prototype[e]=function(a,b){var f=h(c.defaults.global,c.defaults[e],b||{});
return new d(a,f,this)}}else p("Name not provided for this chart, so it hasn't been registered");return b},c.Element=function(a){g(this,a),this.initialize.apply(this,arguments),this.save()},g(c.Element.prototype,{initialize:function(){},restore:function(a){return a?e(a,function(a){this[a]=this._saved[a]},this):g(this,this._saved),this},save:function(){return this._saved=f(this),delete this._saved._saved,this},update:function(a){return e(a,function(a,b){this._saved[b]=this[b],this[b]=a},this),this},transition:function(a,b){return e(a,function(a,c){this[c]=(a-this._saved[c])*b+this._saved[c]
},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return r(this.value)}}),c.Element.extend=m,c.Point=c.Element.extend({display:!0,inRange:function(a,b){var c=this.hitDetectionRadius+this.radius;return Math.pow(a-this.x,2)+Math.pow(b-this.y,2)<Math.pow(c,2)},draw:function(){if(this.display){var a=this.ctx;a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.closePath(),a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.fillStyle=this.fillColor,a.fill(),a.stroke()
}}}),c.Arc=c.Element.extend({inRange:function(a,b){var c=d.getAngleFromPoint(this,{x:a,y:b}),e=c.angle%(2*Math.PI),f=(2*Math.PI+this.startAngle)%(2*Math.PI),g=(2*Math.PI+this.endAngle)%(2*Math.PI)||360,h=f>g?g>=e||e>=f:e>=f&&g>=e,i=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return h&&i},tooltipPosition:function(){var a=this.startAngle+(this.endAngle-this.startAngle)/2,b=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(a)*b,y:this.y+Math.sin(a)*b}},draw:function(a){var c=this.ctx;
c.beginPath(),c.arc(this.x,this.y,this.outerRadius<0?0:this.outerRadius,this.startAngle,this.endAngle),c.arc(this.x,this.y,this.innerRadius<0?0:this.innerRadius,this.endAngle,this.startAngle,!0),c.closePath(),c.strokeStyle=this.strokeColor,c.lineWidth=this.strokeWidth,c.fillStyle=this.fillColor,c.fill(),c.lineJoin="bevel",this.showStroke&&c.stroke()}}),c.Rectangle=c.Element.extend({draw:function(){var a=this.ctx,b=this.width/2,c=this.x-b,d=this.x+b,e=this.base-(this.base-this.y),f=this.strokeWidth/2;this.showStroke&&(c+=f,d-=f,e+=f),a.beginPath(),a.fillStyle=this.fillColor,a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.moveTo(c,this.base),a.lineTo(c,e),a.lineTo(d,e),a.lineTo(d,this.base),a.fill(),this.showStroke&&a.stroke()
},height:function(){return this.base-this.y},inRange:function(a,b){return a>=this.x-this.width/2&&a<=this.x+this.width/2&&b>=this.y&&b<=this.base}}),c.Animation=c.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),c.Tooltip=c.Element.extend({draw:function(){var a=this.chart.ctx;a.font=T(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var b=this.caretPadding=2,c=a.measureText(this.text).width+2*this.xPadding,d=this.fontSize+2*this.yPadding,e=d+this.caretHeight+b;
this.x+c/2>this.chart.width?this.xAlign="left":this.x-c/2<0&&(this.xAlign="right"),this.y-e<0&&(this.yAlign="below");var f=this.x-c/2,g=this.y-e;if(a.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":a.beginPath(),a.moveTo(this.x,this.y-b),a.lineTo(this.x+this.caretHeight,this.y-(b+this.caretHeight)),a.lineTo(this.x-this.caretHeight,this.y-(b+this.caretHeight)),a.closePath(),a.fill();break;case"below":g=this.y+b+this.caretHeight,a.beginPath(),a.moveTo(this.x,this.y+b),a.lineTo(this.x+this.caretHeight,this.y+b+this.caretHeight),a.lineTo(this.x-this.caretHeight,this.y+b+this.caretHeight),a.closePath(),a.fill()
}switch(this.xAlign){case"left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case"right":f=this.x-(this.cornerRadius+this.caretHeight)}V(a,f,g,c,d,this.cornerRadius),a.fill(),a.fillStyle=this.textColor,a.textAlign="center",a.textBaseline="middle",a.fillText(this.text,f+c/2,g+d/2)}}}),c.MultiTooltip=c.Element.extend({initialize:function(){this.font=T(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=T(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.titleHeight=this.title?1.5*this.titleFontSize:0,this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+this.titleHeight,this.ctx.font=this.titleFont;
var a=this.ctx.measureText(this.title).width,b=U(this.ctx,this.font,this.labels)+this.fontSize+3,c=s([b,a]);this.width=c+2*this.xPadding;var d=this.height/2;this.y-d<0?this.y=d:this.y+d>this.chart.height&&(this.y=this.chart.height-d),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(a){var b=this.y-this.height/2+this.yPadding,c=a-1;return 0===a?b+this.titleHeight/3:b+(1.5*this.fontSize*c+this.fontSize/2)+this.titleHeight},draw:function(){if(this.custom)this.custom(this);
else{V(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var a=this.ctx;a.fillStyle=this.fillColor,a.fill(),a.closePath(),a.textAlign="left",a.textBaseline="middle",a.fillStyle=this.titleTextColor,a.font=this.titleFont,a.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),a.font=this.font,d.each(this.labels,function(b,c){a.fillStyle=this.textColor,a.fillText(b,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1)),a.fillStyle=this.legendColorBackground,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize),a.fillStyle=this.legendColors[c].fill,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize)
},this)}}}),c.Scale=c.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var a=v(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(C(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}));this.yLabelWidth=this.display&&this.showLabels?U(this.ctx,this.font,this.yLabels)+10:0},addXLabel:function(a){this.xLabels.push(a),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;
var c,a=this.endPoint,b=this.endPoint-this.startPoint;for(this.calculateYRange(b),this.buildYLabels(),this.calculateXLabelRotation();b>this.endPoint-this.startPoint;)b=this.endPoint-this.startPoint,c=this.yLabelWidth,this.calculateYRange(b),this.buildYLabels(),c<this.yLabelWidth&&(this.endPoint=a,this.calculateXLabelRotation())},calculateXLabelRotation:function(){this.ctx.font=this.font;var c,d,a=this.ctx.measureText(this.xLabels[0]).width,b=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=b/2+3,this.xScalePaddingLeft=a/2>this.yLabelWidth?a/2:this.yLabelWidth,this.xLabelRotation=0,this.display){var f,e=U(this.ctx,this.font,this.xLabels);
this.xLabelWidth=e;for(var h=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>h&&0===this.xLabelRotation||this.xLabelWidth>h&&this.xLabelRotation<=90&&this.xLabelRotation>0;)f=Math.cos(w(this.xLabelRotation)),c=f*a,d=f*b,c+this.fontSize/2>this.yLabelWidth&&(this.xScalePaddingLeft=c+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=f*e;this.xLabelRotation>0&&(this.endPoint-=Math.sin(w(this.xLabelRotation))*e+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding
},calculateYRange:n,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(a){var b=this.drawingArea()/(this.min-this.max);return this.endPoint-b*(a-this.min)},calculateX:function(a){var c=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),d=c/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),e=d*a+this.xScalePaddingLeft;return this.offsetGridLines&&(e+=d/2),Math.round(e)},update:function(a){d.extend(this,a),this.fit()},draw:function(){var a=this.ctx,b=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);
this.display&&(a.fillStyle=this.textColor,a.font=this.font,e(this.yLabels,function(e,f){var g=this.endPoint-b*f,h=Math.round(g),i=this.showHorizontalLines;a.textAlign="right",a.textBaseline="middle",this.showLabels&&a.fillText(e,c-10,g),0!==f||i||(i=!0),i&&a.beginPath(),f>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),h+=d.aliasPixel(a.lineWidth),i&&(a.moveTo(c,h),a.lineTo(this.width,h),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(c-5,h),a.lineTo(c,h),a.stroke(),a.closePath()
},this),e(this.xLabels,function(b,c){var d=this.calculateX(c)+y(this.lineWidth),e=this.calculateX(c-(this.offsetGridLines?.5:0))+y(this.lineWidth),f=this.xLabelRotation>0,g=this.showVerticalLines;0!==c||g||(g=!0),g&&a.beginPath(),c>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),g&&(a.moveTo(e,this.endPoint),a.lineTo(e,this.startPoint-3),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(e,this.endPoint),a.lineTo(e,this.endPoint+5),a.stroke(),a.closePath(),a.save(),a.translate(d,f?this.endPoint+12:this.endPoint+8),a.rotate(-1*w(this.xLabelRotation)),a.font=this.font,a.textAlign=f?"right":"center",a.textBaseline=f?"middle":"top",a.fillText(b,0,0),a.restore()
},this))}}),c.RadialScale=c.Element.extend({initialize:function(){this.size=t([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(a){var b=this.drawingArea/(this.max-this.min);return(a-this.min)*b},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var a=v(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(C(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}))
},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var b,c,d,e,g,h,j,k,l,m,n,o,a=t([this.height/2-this.pointLabelFontSize-5,this.width/2]),f=this.width,i=0;for(this.ctx.font=T(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),c=0;c<this.valuesCount;c++)b=this.getPointPosition(c,a),d=this.ctx.measureText(C(this.templateString,{value:this.labels[c]})).width+5,0===c||c===this.valuesCount/2?(e=d/2,b.x+e>f&&(f=b.x+e,g=c),b.x-e<i&&(i=b.x-e,j=c)):c<this.valuesCount/2?b.x+d>f&&(f=b.x+d,g=c):c>this.valuesCount/2&&b.x-d<i&&(i=b.x-d,j=c);
l=i,m=Math.ceil(f-this.width),h=this.getIndexAngle(g),k=this.getIndexAngle(j),n=m/Math.sin(h+Math.PI/2),o=l/Math.sin(k+Math.PI/2),n=r(n)?n:0,o=r(o)?o:0,this.drawingArea=a-(o+n)/2,this.setCenterPoint(o,n)},setCenterPoint:function(a,b){var c=this.width-b-this.drawingArea,d=a+this.drawingArea;this.xCenter=(d+c)/2,this.yCenter=this.height/2},getIndexAngle:function(a){var b=2*Math.PI/this.valuesCount;return a*b-Math.PI/2},getPointPosition:function(a,b){var c=this.getIndexAngle(a);return{x:Math.cos(c)*b+this.xCenter,y:Math.sin(c)*b+this.yCenter}
},draw:function(){if(this.display){var a=this.ctx;if(e(this.yLabels,function(b,c){if(c>0){var f,d=c*(this.drawingArea/this.steps),e=this.yCenter-d;if(this.lineWidth>0)if(a.strokeStyle=this.lineColor,a.lineWidth=this.lineWidth,this.lineArc)a.beginPath(),a.arc(this.xCenter,this.yCenter,d,0,2*Math.PI),a.closePath(),a.stroke();else{a.beginPath();for(var g=0;g<this.valuesCount;g++)f=this.getPointPosition(g,this.calculateCenterOffset(this.min+c*this.stepValue)),0===g?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y);a.closePath(),a.stroke()
}if(this.showLabels){if(a.font=T(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var h=a.measureText(b).width;a.fillStyle=this.backdropColor,a.fillRect(this.xCenter-h/2-this.backdropPaddingX,e-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.fontColor,a.fillText(b,this.xCenter,e)}}},this),!this.lineArc){a.lineWidth=this.angleLineWidth,a.strokeStyle=this.angleLineColor;for(var b=this.valuesCount-1;b>=0;b--){var c=null,d=null;
if(this.angleLineWidth>0&&(c=this.calculateCenterOffset(this.max),d=this.getPointPosition(b,c),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(d.x,d.y),a.stroke(),a.closePath()),this.backgroundColors&&this.backgroundColors.length==this.valuesCount){null==c&&(c=this.calculateCenterOffset(this.max)),null==d&&(d=this.getPointPosition(b,c));var f=this.getPointPosition(0===b?this.valuesCount-1:b-1,c),g=this.getPointPosition(b===this.valuesCount-1?0:b+1,c),h={x:(f.x+d.x)/2,y:(f.y+d.y)/2},i={x:(d.x+g.x)/2,y:(d.y+g.y)/2};
a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(h.x,h.y),a.lineTo(d.x,d.y),a.lineTo(i.x,i.y),a.fillStyle=this.backgroundColors[b],a.fill(),a.closePath()}var j=this.getPointPosition(b,this.calculateCenterOffset(this.max)+5);a.font=T(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),a.fillStyle=this.pointLabelFontColor;var k=this.labels.length,l=this.labels.length/2,m=l/2,n=m>b||b>k-m,o=b===m||b===k-m;a.textAlign=0===b?"center":b===l?"center":l>b?"left":"right",a.textBaseline=o?"middle":n?"bottom":"top",a.fillText(this.labels[b],j.x,j.y)
}}}}}),c.animationService={frameDuration:17,animations:[],dropFrames:0,addAnimation:function(a,b){for(var c=0;c<this.animations.length;++c)if(this.animations[c].chartInstance===a)return this.animations[c].animationObject=b,void 0;this.animations.push({chartInstance:a,animationObject:b}),1==this.animations.length&&d.requestAnimFrame.call(window,this.digestWrapper)},cancelAnimation:function(a){var b=d.findNextWhere(this.animations,function(b){return b.chartInstance===a});b&&this.animations.splice(b,1)},digestWrapper:function(){c.animationService.startDigest.call(c.animationService)
},startDigest:function(){var a=Date.now(),b=0;this.dropFrames>1&&(b=Math.floor(this.dropFrames),this.dropFrames-=b);for(var c=0;c<this.animations.length;c++)null===this.animations[c].animationObject.currentStep&&(this.animations[c].animationObject.currentStep=0),this.animations[c].animationObject.currentStep+=1+b,this.animations[c].animationObject.currentStep>this.animations[c].animationObject.numSteps&&(this.animations[c].animationObject.currentStep=this.animations[c].animationObject.numSteps),this.animations[c].animationObject.render(this.animations[c].chartInstance,this.animations[c].animationObject),this.animations[c].animationObject.currentStep==this.animations[c].animationObject.numSteps&&(this.animations[c].animationObject.onAnimationComplete.call(this.animations[c].chartInstance),this.animations.splice(c,1),c--);
var e=Date.now(),f=e-a-this.frameDuration,g=f/this.frameDuration;g>1&&(this.dropFrames+=g),this.animations.length>0&&d.requestAnimFrame.call(window,this.digestWrapper)}},d.addEvent(window,"resize",function(){var a;return function(){clearTimeout(a),a=setTimeout(function(){e(c.instances,function(a){a.options.responsive&&a.resize(a.render,!0)})},50)}}()),q||"object"==typeof module&&module.exports&&(module.exports=c),a.Chart=c,c.noConflict=function(){return a.Chart=b,c}}).call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers,d={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'};
b.Type.extend({name:"Bar",defaults:d,initialize:function(a){var d=this.options;this.ScaleClass=b.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,b,c){var e=this.calculateBaseWidth(),f=this.calculateX(c)-e/2,g=this.calculateBarWidth(a);return f+g*b+b*d.barDatasetSpacing+g/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*d.barValueSpacing},calculateBarWidth:function(a){var b=this.calculateBaseWidth()-(a-1)*d.barDatasetSpacing;return b/a}}),this.datasets=[],this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getBarsAtEvent(a):[];
this.eachBars(function(a){a.restore(["fillColor","strokeColor"])}),c.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),this.BarClass=b.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),c.each(a.datasets,function(b){var e={label:b.label||null,fillColor:b.fillColor,strokeColor:b.strokeColor,bars:[]};this.datasets.push(e),c.each(b.data,function(c,d){e.bars.push(new this.BarClass({value:c,label:a.labels[d],datasetLabel:b.label,strokeColor:b.strokeColor,fillColor:b.fillColor,highlightFill:b.highlightFill||b.fillColor,highlightStroke:b.highlightStroke||b.strokeColor}))
},this)},this),this.buildScale(a.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(a,b,d){c.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,d,b),y:this.scale.endPoint}),a.save()},this),this.render()},update:function(){this.scale.update(),c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])}),this.eachBars(function(a){a.save()}),this.render()},eachBars:function(a){c.each(this.datasets,function(b,d){c.each(b.bars,a,this,d)
},this)},getBarsAtEvent:function(a){for(var f,b=[],d=c.getRelativePosition(a),e=function(a){b.push(a.bars[f])},g=0;g<this.datasets.length;g++)for(f=0;f<this.datasets[g].bars.length;f++)if(this.datasets[g].bars[f].inRange(d.x,d.y))return c.each(this.datasets,e),b;return b},buildScale:function(a){var b=this,d=function(){var a=[];return b.eachBars(function(b){a.push(b.value)}),a},e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){var b=c.calculateScaleRange(d(),a,this.fontSize,this.beginAtZero,this.integersOnly);
c.extend(this,b)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};
this.options.scaleOverride&&c.extend(e,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(e)},addData:function(a,b){c.each(a,function(a,c){this.datasets[c].bars.push(new this.BarClass({value:a,label:b,datasetLabel:this.datasets[c].label,x:this.scale.calculateBarX(this.datasets.length,c,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[c].strokeColor,fillColor:this.datasets[c].fillColor}))
},this),this.scale.addXLabel(b),this.update()},removeData:function(){this.scale.removeXLabel(),c.each(this.datasets,function(a){a.bars.shift()},this),this.update()},reflow:function(){c.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var b=a||1;this.clear();this.chart.ctx;this.scale.draw(b),c.each(this.datasets,function(a,d){c.each(a.bars,function(a,c){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,d,c),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},b).draw())
},this)},this)}})}.call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers,d={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};b.Type.extend({name:"Doughnut",defaults:d,initialize:function(a){this.segments=[],this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=b.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];
c.each(this.segments,function(a){a.restore(["fillColor"])}),c.each(b,function(a){a.fillColor=a.highlightColor}),this.showTooltip(b)}),this.calculateTotal(a),c.each(a,function(b,c){b.color||(b.color="hsl("+360*c/a.length+", 100%, 50%)"),this.addData(b,c,!0)},this),this.render()},getSegmentsAtEvent:function(a){var b=[],d=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(d.x,d.y)&&b.push(a)},this),b},addData:function(a,c,d){var e=void 0!==c?c:this.segments.length;"undefined"==typeof a.color&&(a.color=b.defaults.global.segmentColorDefault[e%b.defaults.global.segmentColorDefault.length],a.highlight=b.defaults.global.segmentHighlightColorDefaults[e%b.defaults.global.segmentHighlightColorDefaults.length]),this.segments.splice(e,0,new this.SegmentArc({value:a.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:a.color,highlightColor:a.highlight||a.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(a.value),label:a.label})),d||(this.reflow(),this.update())
},calculateCircumference:function(a){return this.total>0?2*Math.PI*(a/this.total):0},calculateTotal:function(a){this.total=0,c.each(a,function(a){this.total+=Math.abs(a.value)},this)},update:function(){this.calculateTotal(this.segments),c.each(this.activeElements,function(a){a.restore(["fillColor"])}),c.each(this.segments,function(a){a.save()}),this.render()},removeData:function(a){var b=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(b,1),this.reflow(),this.update()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,c.each(this.segments,function(a){a.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})
},this)},draw:function(a){var b=a?a:1;this.clear(),c.each(this.segments,function(a,c){a.transition({circumference:this.calculateCircumference(a.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},b),a.endAngle=a.startAngle+a.circumference,a.draw(),0===c&&(a.startAngle=1.5*Math.PI),c<this.segments.length-1&&(this.segments[c+1].startAngle=a.endAngle)},this)}}),b.types.Doughnut.extend({name:"Pie",defaults:c.merge(d,{percentageInnerCutout:0})})}.call(this),function(){"use strict";
var a=this,b=a.Chart,c=b.helpers,d={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>',offsetGridLines:!1};
b.Type.extend({name:"Line",defaults:d,initialize:function(a){this.PointClass=b.Point.extend({offsetGridLines:this.options.offsetGridLines,strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(a){return Math.pow(a-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getPointsAtEvent(a):[];
this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])}),c.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),c.each(a.datasets,function(b){var d={label:b.label||null,fillColor:b.fillColor,strokeColor:b.strokeColor,pointColor:b.pointColor,pointStrokeColor:b.pointStrokeColor,points:[]};this.datasets.push(d),c.each(b.data,function(c,e){d.points.push(new this.PointClass({value:c,label:a.labels[e],datasetLabel:b.label,strokeColor:b.pointStrokeColor,fillColor:b.pointColor,highlightFill:b.pointHighlightFill||b.pointColor,highlightStroke:b.pointHighlightStroke||b.pointStrokeColor}))
},this),this.buildScale(a.labels),this.eachPoints(function(a,b){c.extend(a,{x:this.scale.calculateX(b),y:this.scale.endPoint}),a.save()},this)},this),this.render()},update:function(){this.scale.update(),c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])}),this.eachPoints(function(a){a.save()}),this.render()},eachPoints:function(a){c.each(this.datasets,function(b){c.each(b.points,a,this)},this)},getPointsAtEvent:function(a){var b=[],d=c.getRelativePosition(a);return c.each(this.datasets,function(a){c.each(a.points,function(a){a.inRange(d.x,d.y)&&b.push(a)
})},this),b},buildScale:function(a){var d=this,e=function(){var a=[];return d.eachPoints(function(b){a.push(b.value)}),a},f={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,offsetGridLines:this.options.offsetGridLines,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){var b=c.calculateScaleRange(e(),a,this.fontSize,this.beginAtZero,this.integersOnly);
c.extend(this,b)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};
this.options.scaleOverride&&c.extend(f,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new b.Scale(f)},addData:function(a,b){c.each(a,function(a,c){this.datasets[c].points.push(new this.PointClass({value:a,label:b,datasetLabel:this.datasets[c].label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))
},this),this.scale.addXLabel(b),this.update()},removeData:function(){this.scale.removeXLabel(),c.each(this.datasets,function(a){a.points.shift()},this),this.update()},reflow:function(){var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var b=a||1;this.clear();var d=this.chart.ctx,e=function(a){return null!==a.value},f=function(a,b,d){return c.findNextWhere(b,e,d)||a},g=function(a,b,d){return c.findPreviousWhere(b,e,d)||a};this.scale&&(this.scale.draw(b),c.each(this.datasets,function(a){var h=c.where(a.points,e);
c.each(a.points,function(a,c){a.hasValue()&&a.transition({y:this.scale.calculateY(a.value),x:this.scale.calculateX(c)},b)},this),this.options.bezierCurve&&c.each(h,function(a,b){var d=b>0&&b<h.length-1?this.options.bezierCurveTension:0;a.controlPoints=c.splineCurve(g(a,h,b),a,f(a,h,b),d),a.controlPoints.outer.y>this.scale.endPoint?a.controlPoints.outer.y=this.scale.endPoint:a.controlPoints.outer.y<this.scale.startPoint&&(a.controlPoints.outer.y=this.scale.startPoint),a.controlPoints.inner.y>this.scale.endPoint?a.controlPoints.inner.y=this.scale.endPoint:a.controlPoints.inner.y<this.scale.startPoint&&(a.controlPoints.inner.y=this.scale.startPoint)
},this),d.lineWidth=this.options.datasetStrokeWidth,d.strokeStyle=a.strokeColor,d.beginPath(),c.each(h,function(a,b){if(0===b)d.moveTo(a.x,a.y);else if(this.options.bezierCurve){var c=g(a,h,b);d.bezierCurveTo(c.controlPoints.outer.x,c.controlPoints.outer.y,a.controlPoints.inner.x,a.controlPoints.inner.y,a.x,a.y)}else d.lineTo(a.x,a.y)},this),this.options.datasetStroke&&d.stroke(),this.options.datasetFill&&h.length>0&&(d.lineTo(h[h.length-1].x,this.scale.endPoint),d.lineTo(h[0].x,this.scale.endPoint),d.fillStyle=a.fillColor,d.closePath(),d.fill()),c.each(h,function(a){a.draw()
})},this))}})}.call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers,d={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};
b.Type.extend({name:"PolarArea",defaults:d,initialize:function(a){this.segments=[],this.SegmentArc=b.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new b.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:a.length}),this.updateScaleRange(a),this.scale.update(),c.each(a,function(a,b){this.addData(a,b,!0)
},this),this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])}),c.each(b,function(a){a.fillColor=a.highlightColor}),this.showTooltip(b)}),this.render()},getSegmentsAtEvent:function(a){var b=[],d=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(d.x,d.y)&&b.push(a)},this),b},addData:function(a,b,c){var d=b||this.segments.length;this.segments.splice(d,0,new this.SegmentArc({fillColor:a.color,highlightColor:a.highlight||a.color,label:a.label,value:a.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(a.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),c||(this.reflow(),this.update())
},removeData:function(a){var b=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(b,1),this.reflow(),this.update()},calculateTotal:function(a){this.total=0,c.each(a,function(a){this.total+=a.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(a){var b=[];c.each(a,function(a){b.push(a.value)});var d=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(b,c.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);
c.extend(this.scale,d,{size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),c.each(this.segments,function(a){a.save()}),this.reflow(),this.render()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),c.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),c.each(this.segments,function(a){a.update({outerRadius:this.scale.calculateCenterOffset(a.value)})
},this)},draw:function(a){var b=a||1;this.clear(),c.each(this.segments,function(a,c){a.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(a.value)},b),a.endAngle=a.startAngle+a.circumference,0===c&&(a.startAngle=1.5*Math.PI),c<this.segments.length-1&&(this.segments[c+1].startAngle=a.endAngle),a.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers;b.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'},initialize:function(a){this.PointClass=b.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(a),this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getPointsAtEvent(a):[];
this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])}),c.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),c.each(a.datasets,function(b){var d={label:b.label||null,fillColor:b.fillColor,strokeColor:b.strokeColor,pointColor:b.pointColor,pointStrokeColor:b.pointStrokeColor,points:[]};this.datasets.push(d),c.each(b.data,function(c,e){var f;this.scale.animation||(f=this.scale.getPointPosition(e,this.scale.calculateCenterOffset(c))),d.points.push(new this.PointClass({value:c,label:a.labels[e],datasetLabel:b.label,x:this.options.animation?this.scale.xCenter:f.x,y:this.options.animation?this.scale.yCenter:f.y,strokeColor:b.pointStrokeColor,fillColor:b.pointColor,highlightFill:b.pointHighlightFill||b.pointColor,highlightStroke:b.pointHighlightStroke||b.pointStrokeColor}))
},this)},this),this.render()},eachPoints:function(a){c.each(this.datasets,function(b){c.each(b.points,a,this)},this)},getPointsAtEvent:function(a){var b=c.getRelativePosition(a),d=c.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},b),e=2*Math.PI/this.scale.valuesCount,f=Math.round((d.angle-1.5*Math.PI)/e),g=[];return(f>=this.scale.valuesCount||0>f)&&(f=0),d.distance<=this.scale.drawingArea&&c.each(this.datasets,function(a){g.push(a.points[f])}),g},buildScale:function(a){this.scale=new b.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backgroundColors:this.options.scaleBackgroundColors,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:a.labels,valuesCount:a.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(a.datasets),this.scale.buildYLabels()
},updateScaleRange:function(a){var b=function(){var b=[];return c.each(a,function(a){a.data?b=b.concat(a.data):c.each(a.points,function(a){b.push(a.value)})}),b}(),d=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(b,c.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);
c.extend(this.scale,d)},addData:function(a,b){this.scale.valuesCount++,c.each(a,function(a,c){var d=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(a));this.datasets[c].points.push(new this.PointClass({value:a,label:b,datasetLabel:this.datasets[c].label,x:d.x,y:d.y,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this),this.scale.labels.push(b),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),c.each(this.datasets,function(a){a.points.shift()
},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(a){a.save()}),this.reflow(),this.render()},reflow:function(){c.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(a){var b=a||1,d=this.chart.ctx;this.clear(),this.scale.draw(),c.each(this.datasets,function(a){c.each(a.points,function(a,c){a.hasValue()&&a.transition(this.scale.getPointPosition(c,this.scale.calculateCenterOffset(a.value)),b)
},this),d.lineWidth=this.options.datasetStrokeWidth,d.strokeStyle=a.strokeColor,d.beginPath(),c.each(a.points,function(a,b){0===b?d.moveTo(a.x,a.y):d.lineTo(a.x,a.y)},this),d.closePath(),d.stroke(),d.fillStyle=a.fillColor,this.options.datasetFill&&d.fill(),c.each(a.points,function(a){a.hasValue()&&a.draw()})},this)}})}.call(this)}),ed.define("composer",["edq","abstract","markitup","lodash","jquery.expanding","jquery.atwho"],function(a,b){var e=new b(function(b){return{opts:{editorType:null,operation:null,mentions:null,"{editor}":"[data-ed-editor]"},init:function(){b.options.operation=b.element.data("operation"),"bbcode"==b.options.editorType&&(b.editor().markItUp(b.options.bbcodeSettings).expandingTextarea(),b.options.mentions&&b.editor().atwho({at:"@",highlightFirst:!1,minLen:2,delay:200,data:[],limit:10,callbacks:{remoteFilter:function(b,c){EasyDiscuss.ajax("site/views/users/search",{query:b}).done(function(b){var d=[];
a.each(b,function(a,b){d.push(b.title)}),c(d)})},afterMatchFailed:function(a,b){return"#"==a?(tags.push(b.text().trim().slice(1)),this.model.save(tags),this.insert(b.text().trim()),!1):void 0}}}))}}});return e}),ed.define("dialog",["edjquery","easydiscuss"],function($,EasyDiscuss){var dialogHtml='<div id="ed" class="ed-dialog has-footer"> <div class="ed-dialog-modal"> <div class="ed-dialog-header"> <div class="o-row"> <div class="o-col--11"><span class="ed-dialog-title"></span></div> <div class="o-col--1 ed-dialog-close-button"><i class="fa fa-close"></i></div> </div> </div> <div class="ed-dialog-body"> <div class="ed-dialog-container"> <div class="ed-dialog-content"></div> <div class="o-loading"> <div class="o-loading__content"><i class="fa fa-spinner fa-spin"></i></div> </div> <div class="o-empty"> <div class="o-empty__content"><i class="o-empty__icon fa fa-exclamation-triangle"></i> <div class="o-empty__text"><span class="ed-dialog-error-message"></span></div> </div> </div> </div> </div> <div class="ed-dialog-footer"> <div class="row-table"> <div class="col-cell ed-dialog-footer-content"></div> </div> </div> </div></div>',dialog_=".ed-dialog",dialogModal_=".ed-dialog-modal",dialogContent_=".ed-dialog-content",dialogHeader_=".ed-dialog-header",dialogFooter_=".ed-dialog-footer",dialogFooterContent_=".ed-dialog-footer-content",dialogCloseButton_=".ed-dialog-close-button",dialogTitle_=".ed-dialog-title",dialogErrorMessage_=".ed-dialog-error-message",isFailed="is-failed",isLoading="is-loading",rxBraces=/\{|\}/gi,self=EasyDiscuss.dialog=function(a){if(void 0===a)return self;
$.isString(a)&&(a={content:a});var b=self.open;return window.parentEasyBlogDialog&&(b=window.parentEasyBlogDialog.open),b.apply(self,[a]),self};$.extend(self,{defaultOptions:{title:"",content:"",buttons:"",classname:"",width:"auto",height:"auto",escapeKey:!0},open:function(a){var b=$(dialog_);b.length<1&&(b=$(dialogHtml).appendTo("body"));var a=$.extend({},self.defaultOptions,a),c=$(dialogTitle_);c.text(a.title);var d=$(dialogFooterContent_);d.html(a.buttons),b.toggleClass("has-footer",!!a.buttons),self.setBindings(a);
var e=$(dialogContent_).empty(),f=a.content,g=self.getContentType(f);b.switchClass("type-"+g);var h=$(dialogModal_),i=a.width,j=a.height;if($.isNumeric(j)){var k=$(dialogHeader_),l=$(dialogFooter_);j+=k.height()+l.height()}switch(h.css({width:i,height:j}),b.addClassAfter("active"),g){case"html":e.html(f);break;case"iframe":var m=$("<iframe>"),n=f;m.appendTo(e).one("load",function(){try{m[0].contentWindow.parentEasyBlogDialog=self}catch(a){}}).attr("src",n);break;case"deferred":return b.switchClass(isLoading),f.done(function(c){$.isPlainObject(c)?self.reopen($.extend(!0,a,c)):$.isString(c)?(a.content=c,self.reopen(a)):b.switchClass(isFailed)
}).fail(function(a){b.switchClass(isFailed);var c=$(dialogErrorMessage_);$.isString(a)&&c.html(a),$.isPlainObject(a)&&a.message&&c.html(a.message)}),void 0;case"dialog":var o=self.parseXMLOptions(f);return self.open($.extend(!0,a,o)),void 0}},reopen:function(a){self.close(),self.open(a)},close:function(){self.unsetBindings();var a=$(dialog_);a.remove()},getContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":$.isUrl(a)?"iframe":$.isDeferred(a)?"deferred":"html"},parseXMLOptions:function(xml){var xmlOptions=$.buildHTML(xml),newOptions={};
return $.each(xmlOptions.children(),function(i,node){var node=$(node),key=$.String.camelize(this.nodeName.toLowerCase()),val=node.html(),type=node.attr("type");switch(type){case"json":try{val=$.parseJSON(val)}catch(e){}break;case"javascript":try{val=eval("(function($){ return "+$.trim(val)+" })("+$.globalNamespace+")")}catch(e){}break;case"text":val=node.text()}$.isNumeric(val)&&(val=parseFloat(val)),newOptions[key]=val}),newOptions},bindings:{},setBindings:function(a){self.unsetBindings();var b=a.selectors,c=a.bindings;
if(b&&c){var d={parent:self},e=$(dialog_);$.each(b,function(a,b){var a=a.replace(rxBraces,""),c=d[a]=function(){return e.find(b)};c.selector=b}),$.each(c,function(a,b){var c=a.split(" "),f=c[0].replace(rxBraces,""),g=c[1]+".ed.dialog",h=d[f];if(h){var i=h.selector;e.on(g,i,function(){b.apply(d,[this].concat(arguments))}),self.bindings[g]=b}})}a.escapeKey&&$(document).on("keydown.ed.dialog",function(a){27==a.keyCode&&self.close()})},unsetBindings:function(){var a=$(dialog_);$.each(self.bindings,function(b){a.off(b)
}),$(document).off("keydown.ed.dialog")}}),$(document).on("click",dialogCloseButton_,function(){self.close()}).on("click",dialog_,function(a){var b=$(dialog_);a.target==b[0]&&self.close()})}),ed.define("easydiscuss",["edjquery"],function(a){var b={ajax:function(b,c,d){var f={url:this.getUrl(),data:a.extend(c,{option:"com_easydiscuss",namespace:b})};if(f.data[this.getToken()]=1,f.data.hasOwnProperty("args")&&(f.data.args=a.toJSON(f.data.args)),a.isPlainObject(d)){if(d.type){switch(d.type){case"jsonp":d.dataType="jsonp",d.crossDomain=!0,f.data.transport="jsonp";
break;case"iframe":d.iframe=!0,d.processData=!1,d.files=f.data.files,delete f.data.files,f.data.transport="iframe"}delete d.type}a.extend(f,d)}a.isFunction(d)&&(f.success=d);var g=a.server(f);return g.progress(function(){}),g},getUrl:function(){return a("[data-ed-ajax-url]").val()},getToken:function(){return a("[data-ed-token]").val()}};return b.$=a,window.ED=window.EasyDiscuss=b,b}),ed.define("jquery.atwho",["edjquery","jquery.caret"],function(a){var b,c;c={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},b={beforeSave:function(a){return e.arrayToDefaultHash(a)
},matcher:function(a,b,c,d){var e,f,g,h,i;return a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c&&(a="(?:^|\\s)"+a),e=decodeURI("%C3%80"),f=decodeURI("%C3%BF"),i=d?" ":"",h=new RegExp(a+"([A-Za-z"+e+"-"+f+"0-9_"+i+"'.+-]*)$|"+a+"([^\\x00-\\xff]*)$","gi"),g=h.exec(b),g?g[2]||g[1]:null},filter:function(a,b,c){var d,e,f,g;for(d=[],e=0,g=b.length;g>e;e++)f=b[e],~new String(f[c]).toLowerCase().indexOf(a.toLowerCase())&&d.push(f);return d},remoteFilter:null,sorter:function(a,b,c){var d,e,f,g;if(!a)return b;
for(d=[],e=0,g=b.length;g>e;e++)f=b[e],f.atwho_order=new String(f[c]).toLowerCase().indexOf(a.toLowerCase()),f.atwho_order>-1&&d.push(f);return d.sort(function(a,b){return a.atwho_order-b.atwho_order})},tplEval:function(a,b){var c,d,e;e=a;try{return"string"!=typeof a&&(e=a(b)),e.replace(/\$\{([^\}]*)\}/g,function(a,c){return b[c]})}catch(d){return c=d,""}},highlighter:function(a,b){var c;return b?(c=new RegExp(">\\s*(\\w*?)("+b.replace("+","\\+")+")(\\w*)\\s*<","ig"),a.replace(c,function(a,b,c,d){return"> "+b+"<strong>"+c+"</strong>"+d+" <"
})):a},beforeInsert:function(a){return a},beforeReposition:function(a){return a},afterMatchFailed:function(){}};var d;d=function(){function b(b){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=a(b),this.setupRootElement(),this.listen()}return b.prototype.createContainer=function(b){var c;return null!=(c=this.$el)&&c.remove(),a(b.body).append(this.$el=a("<div class='atwho-container'></div>"))},b.prototype.setupRootElement=function(b,c){var d,e;if(null==c&&(c=!1),b)this.window=b.contentWindow,this.document=b.contentDocument||this.window.document,this.iframe=b;
else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(e){if(d=e,this.iframe=null,a.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+d)}}return this.createContainer((this.iframeAsRoot=c)?this.document:document)},b.prototype.controller=function(a){var b,c,d,e;if(this.aliasMaps[a])c=this.controllers[this.aliasMaps[a]];else{e=this.controllers;
for(d in e)if(b=e[d],d===a){c=b;break}}return c?c:this.controllers[this.currentFlag]},b.prototype.setContextFor=function(a){return this.currentFlag=a,this},b.prototype.reg=function(a,b){var c,d;return d=(c=this.controllers)[a]||(c[a]=this.$inputor.is("[contentEditable]")?new j(this,a):new g(this,a)),b.alias&&(this.aliasMaps[b.alias]=a),d.init(b),this},b.prototype.listen=function(){return this.$inputor.on("compositionstart",function(a){return function(){var c;return null!=(c=a.controller())&&c.view.hide(),a.isComposing=!0,null
}}(this)).on("compositionend",function(a){return function(){return a.isComposing=!1,null}}(this)).on("keyup.atwhoInner",function(a){return function(b){return a.onKeyup(b)}}(this)).on("keydown.atwhoInner",function(a){return function(b){return a.onKeydown(b)}}(this)).on("blur.atwhoInner",function(a){return function(b){var c;return(c=a.controller())?(c.expectedQueryCBId=null,c.view.hide(b,c.getOpt("displayTimeout"))):void 0}}(this)).on("click.atwhoInner",function(a){return function(b){return a.dispatch(b)}}(this)).on("scroll.atwhoInner",function(a){return function(){var b;
return b=a.$inputor.scrollTop(),function(c){var d,e;return d=c.target.scrollTop,b!==d&&null!=(e=a.controller())&&e.view.hide(c),b=d,!0}}}(this)())},b.prototype.shutdown=function(){var a,b,c;c=this.controllers;for(a in c)b=c[a],b.destroy(),delete this.controllers[a];return this.$inputor.off(".atwhoInner"),this.$el.remove()},b.prototype.dispatch=function(a){var b,c,d,e;d=this.controllers,e=[];for(b in d)c=d[b],e.push(c.lookUp(a));return e},b.prototype.onKeyup=function(b){var d;switch(b.keyCode){case c.ESC:b.preventDefault(),null!=(d=this.controller())&&d.view.hide();
break;case c.DOWN:case c.UP:case c.CTRL:case c.ENTER:a.noop();break;case c.P:case c.N:b.ctrlKey||this.dispatch(b);break;default:this.dispatch(b)}},b.prototype.onKeydown=function(b){var d,e;if(e=null!=(d=this.controller())?d.view:void 0,e&&e.visible())switch(b.keyCode){case c.ESC:b.preventDefault(),e.hide(b);break;case c.UP:b.preventDefault(),e.prev();break;case c.DOWN:b.preventDefault(),e.next();break;case c.P:if(!b.ctrlKey)return;b.preventDefault(),e.prev();break;case c.N:if(!b.ctrlKey)return;b.preventDefault(),e.next();
break;case c.TAB:case c.ENTER:case c.SPACE:if(!e.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&b.keyCode===c.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&b.keyCode===c.TAB)return;e.highlighted()?(b.preventDefault(),e.choose(b)):e.hide(b);break;default:a.noop()}},b}();var e,f=[].slice;e=function(){function c(b,c){this.app=b,this.at=c,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=a("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=a("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new k(this),this.view=new l(this)
}return c.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},c.prototype.init=function(b){return this.setting=a.extend({},this.setting||a.fn.atwho["default"],b),this.view.init(),this.model.reload(this.setting.data)},c.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},c.prototype.callDefault=function(){var c,d,e,g;g=arguments[0],c=2<=arguments.length?f.call(arguments,1):[];try{return b[g].apply(this,c)
}catch(e){return d=e,a.error(d+" Or maybe At.js doesn't have function "+g)}},c.prototype.trigger=function(a,b){var c,d;return null==b&&(b=[]),b.push(this),c=this.getOpt("alias"),d=c?a+"-"+c+".atwho":a+".atwho",this.$inputor.trigger(d,b)},c.prototype.callbacks=function(a){return this.getOpt("callbacks")[a]||b[a]},c.prototype.getOpt=function(a){var c,d;try{return this.setting[a]}catch(d){return c=d,null}},c.prototype.insertContentFor=function(b){var c,d;return d=this.getOpt("insertTpl"),c=a.extend({},b.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,d,c,"onInsert")
},c.prototype.renderView=function(a){var b;return b=this.getOpt("searchKey"),a=this.callbacks("sorter").call(this,this.query.text,a.slice(0,1001),b),this.view.render(a.slice(0,this.getOpt("limit")))},c.arrayToDefaultHash=function(b){var c,d,e,f;if(!a.isArray(b))return b;for(f=[],c=0,e=b.length;e>c;c++)d=b[c],a.isPlainObject(d)?f.push(d):f.push({name:d});return f},c.prototype.lookUp=function(a){var b,c;if(!(a&&"click"===a.type&&!this.getOpt("lookUpOnClick")||this.getOpt("suspendOnComposing")&&this.app.isComposing))return(b=this.catchQuery(a))?(this.app.setContextFor(this.at),(c=this.getOpt("delay"))?this._delayLookUp(b,c):this._lookUp(b),b):(this.expectedQueryCBId=null,b)
},c.prototype._delayLookUp=function(a,b){var c,d;return c=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=c),d=b-(c-this.previousCallTime),d>0&&b>d?(this.previousCallTime=c,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(b){return function(){return b.previousCallTime=0,b.delayedCallTimeout=null,b._lookUp(a)}}(this),b)):(this._stopDelayedCall(),this.previousCallTime!==c&&(this.previousCallTime=0),this._lookUp(a))},c.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0
},c.prototype._generateQueryCBId=function(){return{}},c.prototype._lookUp=function(b){var c;return c=function(a,b){return a===this.expectedQueryCBId?b&&b.length>0?this.renderView(this.constructor.arrayToDefaultHash(b)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(b.text,a.proxy(c,this,this.expectedQueryCBId))},c}();var g,h=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a
},i={}.hasOwnProperty;g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return h(c,b),c.prototype.catchQuery=function(){var a,b,c,d,e,f,g;return b=this.$inputor.val(),a=this.$inputor.caret("pos",{iframe:this.app.iframe}),g=b.slice(0,a),e=this.callbacks("matcher").call(this,this.at,g,this.getOpt("startWithSpace")),d="string"==typeof e,d&&e.length<this.getOpt("minLen",0)?void 0:(d&&e.length<=this.getOpt("maxLen",20)?(f=a-e.length,c=f+e.length,this.pos=f,e={text:e,headPos:f,endPos:c},this.trigger("matched",[this.at,e.text])):(e=null,this.view.hide()),this.query=e)
},c.prototype.rect=function(){var b,c,d;if(b=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(c=a(this.app.iframe).offset(),b.left+=c.left,b.top+=c.top),d=this.app.document.selection?0:2,{left:b.left,top:b.top,bottom:b.top+b.height+d}},c.prototype.insert=function(a){var c,d,e,f,g;return c=this.$inputor,d=c.val(),e=d.slice(0,Math.max(this.query.headPos-this.at.length,0)),f=""===(f=this.getOpt("suffix"))?f:f||" ",a+=f,g=""+e+a+d.slice(this.query.endPos||0),c.val(g),c.caret("pos",e.length+a.length,{iframe:this.app.iframe}),c.is(":focus")||c.focus(),c.change()
},c}(e);var j,h=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},i={}.hasOwnProperty;j=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return h(d,b),d.prototype._getRange=function(){var a;return a=this.app.window.getSelection(),a.rangeCount>0?a.getRangeAt(0):void 0},d.prototype._setRange=function(b,c,d){return null==d&&(d=this._getRange()),d?(c=a(c)[0],"after"===b?(d.setEndAfter(c),d.setStartAfter(c)):(d.setEndBefore(c),d.setStartBefore(c)),d.collapse(!1),this._clearRange(d)):void 0
},d.prototype._clearRange=function(a){var b;return null==a&&(a=this._getRange()),b=this.app.window.getSelection(),null==this.ctrl_a_pressed?(b.removeAllRanges(),b.addRange(a)):void 0},d.prototype._movingEvent=function(a){var b;return"click"===a.type||(b=a.which)===c.RIGHT||b===c.LEFT||b===c.UP||b===c.DOWN},d.prototype._unwrap=function(b){var c;return b=a(b).unwrap().get(0),(c=b.nextSibling)&&c.nodeValue&&(b.nodeValue+=c.nodeValue,a(c).remove()),b},d.prototype.catchQuery=function(b){var d,e,f,g,h,i,j,k,l,m,n,o;
if((o=this._getRange())&&o.collapsed){if(b.which===c.ENTER)return(e=a(o.startContainer).closest(".atwho-query")).contents().unwrap(),e.is(":empty")&&e.remove(),(e=a(".atwho-query",this.app.document)).text(e.text()).contents().last().unwrap(),this._clearRange(),void 0;if(/firefox/i.test(navigator.userAgent)){if(a(o.startContainer).is(this.$inputor))return this._clearRange(),void 0;b.which===c.BACKSPACE&&o.startContainer.nodeType===document.ELEMENT_NODE&&(l=o.startOffset-1)>=0?(f=o.cloneRange(),f.setStart(o.startContainer,l),a(f.cloneContents()).contents().last().is(".atwho-inserted")&&(h=a(o.startContainer).contents().get(l),this._setRange("after",a(h).contents().last()))):b.which===c.LEFT&&o.startContainer.nodeType===document.TEXT_NODE&&(d=a(o.startContainer.previousSibling),d.is(".atwho-inserted")&&0===o.startOffset&&this._setRange("after",d.contents().last()))
}if(a(o.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(e=a(".atwho-query",this.app.document)).length>0&&e.is(":empty")&&0===e.text().length&&e.remove(),this._movingEvent(b)||e.removeClass("atwho-inserted"),e.length>0)switch(b.which){case c.LEFT:return this._setRange("before",e.get(0),o),e.removeClass("atwho-query"),void 0;case c.RIGHT:return this._setRange("after",e.get(0).nextSibling,o),e.removeClass("atwho-query"),void 0}if(e.length>0&&(n=e.attr("data-atwho-at-query"))&&(e.empty().html(n).attr("data-atwho-at-query",null),this._setRange("after",e.get(0),o)),f=o.cloneRange(),f.setStart(o.startContainer,0),k=this.callbacks("matcher").call(this,this.at,f.toString(),this.getOpt("startWithSpace")),i="string"==typeof k,0===e.length&&i&&(g=o.startOffset-this.at.length-k.length)>=0&&(o.setStart(o.startContainer,g),e=a("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),o.surroundContents(e.get(0)),j=e.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(o.setStart(j,j.length),o.setEnd(j,j.length),this._clearRange(o)):this._setRange("after",j,o)),!(i&&k.length<this.getOpt("minLen",0)))return i&&k.length<=this.getOpt("maxLen",20)?(m={text:k,el:e},this.trigger("matched",[this.at,m.text]),this.query=m):(this.view.hide(),this.query={el:e},e.text().indexOf(this.at)>=0&&(this._movingEvent(b)&&e.hasClass("atwho-inserted")?e.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,e)&&this._setRange("after",this._unwrap(e.text(e.text()).contents().first()))),null)
}},d.prototype.rect=function(){var b,c,d;return d=this.query.el.offset(),this.app.iframe&&!this.app.iframeAsRoot&&(c=(b=a(this.app.iframe)).offset(),d.left+=c.left-this.$inputor.scrollLeft(),d.top+=c.top-this.$inputor.scrollTop()),d.bottom=d.top+this.query.el.height(),d},d.prototype.insert=function(a,b){var c,d,e,f;return e=""===(e=this.getOpt("suffix"))?e:e||"\xa0",c=b.data("item-data"),this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(a).attr("data-atwho-at-query",""+c["atwho-at"]+this.query.text),(d=this._getRange())&&(d.setEndAfter(this.query.el[0]),d.collapse(!1),d.insertNode(f=this.app.document.createTextNode("\u200d"+e)),this._setRange("after",f,d)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()
},d}(e);var k;k=function(){function b(a){this.context=a,this.at=this.context.at,this.storage=this.context.$inputor}return b.prototype.destroy=function(){return this.storage.data(this.at,null)},b.prototype.saved=function(){return this.fetch()>0},b.prototype.query=function(a,b){var c,d,e;return d=this.fetch(),e=this.context.getOpt("searchKey"),d=this.context.callbacks("filter").call(this.context,a,d,e)||[],c=this.context.callbacks("remoteFilter"),d.length>0||!c&&0===d.length?b(d):c.call(this.context,a,b)},b.prototype.fetch=function(){return this.storage.data(this.at)||[]
},b.prototype.save=function(a){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,a||[]))},b.prototype.load=function(a){return!this.saved()&&a?this._load(a):void 0},b.prototype.reload=function(a){return this._load(a)},b.prototype._load=function(b){return"string"==typeof b?a.ajax(b,{dataType:"json"}).done(function(a){return function(b){return a.save(b)}}(this)):this.save(b)},b}();var l;l=function(){function b(b){this.context=b,this.$el=a("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()
}return b.prototype.init=function(){var a,b;return b=this.context.getOpt("alias")||this.context.at.charCodeAt(0),a=this.context.getOpt("headerTpl"),a&&1===this.$el.children().length&&this.$el.prepend(a),this.$el.attr({id:"at-view-"+b})},b.prototype.destroy=function(){return this.$el.remove()},b.prototype.bindEvent=function(){var b,c,d;return b=this.$el.find("ul"),c=0,d=0,b.on("mousemove.atwho-view","li",function(){return function(e){var f;if((c!==e.clientX||d!==e.clientY)&&(c=e.clientX,d=e.clientY,f=a(e.currentTarget),!f.hasClass("cur")))return b.find(".cur").removeClass("cur"),f.addClass("cur")
}}(this)).on("click.atwho-view","li",function(c){return function(d){return b.find(".cur").removeClass("cur"),a(d.currentTarget).addClass("cur"),c.choose(d),d.preventDefault()}}(this))},b.prototype.visible=function(){return this.$el.is(":visible")},b.prototype.highlighted=function(){return this.$el.find(".cur").length>0},b.prototype.choose=function(a){var b,c;return(b=this.$el.find(".cur")).length&&(c=this.context.insertContentFor(b),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,c,b),b),this.context.trigger("inserted",[b,a]),this.hide(a)),this.context.getOpt("hideWithoutSuffix")?this.stopShowing=!0:void 0
},b.prototype.reposition=function(b){var c,d,e,f;return c=this.context.app.iframeAsRoot?this.context.app.window:window,b.bottom+this.$el.height()-a(c).scrollTop()>a(c).height()&&(b.bottom=b.top-this.$el.height()),b.left>(e=a(c).width()-this.$el.width()-5)&&(b.left=e),d={left:b.left,top:b.bottom},null!=(f=this.context.callbacks("beforeReposition"))&&f.call(this.context,d),this.$el.offset(d),this.context.trigger("reposition",[d])},b.prototype.next=function(){var a,b,c,d;return a=this.$el.find(".cur").removeClass("cur"),b=a.next(),b.length||(b=this.$el.find("li:first")),b.addClass("cur"),c=b[0],d=c.offsetTop+c.offsetHeight+(c.nextSibling?c.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,d-this.$el.height()))
},b.prototype.prev=function(){var a,b,c,d;return a=this.$el.find(".cur").removeClass("cur"),c=a.prev(),c.length||(c=this.$el.find("li:last")),c.addClass("cur"),d=c[0],b=d.offsetTop+d.offsetHeight+(d.nextSibling?d.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,b-this.$el.height()))},b.prototype.scrollTop=function(a){var b;return b=this.context.getOpt("scrollDuration"),b?this.$elUl.animate({scrollTop:a},b):this.$elUl.scrollTop(a)},b.prototype.show=function(){var a;return this.stopShowing?(this.stopShowing=!1,void 0):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(a=this.context.rect())?this.reposition(a):void 0)
},b.prototype.hide=function(a,b){var c;if(this.visible())return isNaN(b)?(this.$el.hide(),this.context.trigger("hidden",[a])):(c=function(a){return function(){return a.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(c,b))},b.prototype.render=function(b){var c,d,e,f,g,h,i;if(!(a.isArray(b)&&b.length>0))return this.hide(),void 0;for(this.$el.find("ul").empty(),d=this.$el.find("ul"),i=this.context.getOpt("displayTpl"),e=0,g=b.length;g>e;e++)f=b[e],f=a.extend({},f,{"atwho-at":this.context.at}),h=this.context.callbacks("tplEval").call(this.context,i,f,"onDisplay"),c=a(this.context.callbacks("highlighter").call(this.context,h,this.context.query.text)),c.data("item-data",f),d.append(c);
return this.show(),this.context.getOpt("highlightFirst")?d.find("li:first").addClass("cur"):void 0},b}();var m;m={load:function(a,b){var c;return(c=this.controller(a))?c.model.load(b):void 0},isSelecting:function(){var a;return!!(null!=(a=this.controller())?a.view.visible():void 0)},hide:function(){var a;return null!=(a=this.controller())?a.view.hide():void 0},reposition:function(){var a;return(a=this.controller())?a.view.reposition(a.rect()):void 0},setIframe:function(a,b){return this.setupRootElement(a,b),null
},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},a.fn.atwho=function(b){var c,e;return c=arguments,e=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var f,g;return(g=(f=a(this)).data("atwho"))||f.data("atwho",g=new d(this)),"object"!=typeof b&&b?m[b]&&g?e=m[b].apply(g,Array.prototype.slice.call(c,1)):a.error("Method "+b+" does not exist on jQuery.atwho"):g.reg(b.at,b)}),null!=e?e:this},a.fn.atwho["default"]={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:b,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},a.fn.atwho.debug=!1
}),ed.define("jquery.caret",["edjquery"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l;k="caret",b=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.setPos=function(a){var b,c,d,e;return(e=j.getSelection())&&(d=0,c=!1,(b=function(a,f){var g,i,j,k,l,m;for(l=f.childNodes,m=[],j=0,k=l.length;k>j&&(g=l[j],!c);j++)if(3===g.nodeType){if(d+g.length>=a){c=!0,i=h.createRange(),i.setStart(g,a-d),e.removeAllRanges(),e.addRange(i);break}m.push(d+=g.length)}else m.push(b(a,g));
return m})(a,this.domInputor)),this.domInputor},b.prototype.getIEPosition=function(){return this.getPosition()},b.prototype.getPosition=function(){var a,b;return b=this.getOffset(),a=this.$inputor.offset(),b.left-=a.left,b.top-=a.top,b},b.prototype.getOldIEPos=function(){var a,b;return b=h.selection.createRange(),a=h.body.createTextRange(),a.moveToElementText(this.domInputor),a.setEndPoint("EndToEnd",b),a.text.length},b.prototype.getPos=function(){var a,b,c;return(c=this.range())?(a=c.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(c.endContainer,c.endOffset),b=a.toString().length,a.detach(),b):h.selection?this.getOldIEPos():void 0
},b.prototype.getOldIEOffset=function(){var a,b;return a=h.selection.createRange().duplicate(),a.moveStart("character",-1),b=a.getBoundingClientRect(),{height:b.bottom-b.top,left:b.left,top:b.top}},b.prototype.getOffset=function(){var c,d,e,f,g;return j.getSelection&&(e=this.range())?(e.endOffset-1>0&&e.endContainer===!this.domInputor&&(c=e.cloneRange(),c.setStart(e.endContainer,e.endOffset-1),c.setEnd(e.endContainer,e.endOffset),f=c.getBoundingClientRect(),d={height:f.height,left:f.left+f.width,top:f.top},c.detach()),d&&0!==(null!=d?d.height:void 0)||(c=e.cloneRange(),g=a(h.createTextNode("|")),c.insertNode(g[0]),c.selectNode(g[0]),f=c.getBoundingClientRect(),d={height:f.height,left:f.left,top:f.top},g.remove(),c.detach())):h.selection&&(d=this.getOldIEOffset()),d&&(d.top+=a(j).scrollTop(),d.left+=a(j).scrollLeft()),d
},b.prototype.range=function(){var a;if(j.getSelection)return a=j.getSelection(),a.rangeCount>0?a.getRangeAt(0):null},b}(),c=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.getIEPos=function(){var a,b,c,d,e,f,g;return b=this.domInputor,f=h.selection.createRange(),e=0,f&&f.parentElement()===b&&(d=b.value.replace(/\r\n/g,"\n"),c=d.length,g=b.createTextRange(),g.moveToBookmark(f.getBookmark()),a=b.createTextRange(),a.collapse(!1),e=g.compareEndPoints("StartToEnd",a)>-1?c:-g.moveStart("character",-c)),e
},b.prototype.getPos=function(){return h.selection?this.getIEPos():this.domInputor.selectionStart},b.prototype.setPos=function(a){var b,c;return b=this.domInputor,h.selection?(c=b.createTextRange(),c.move("character",a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a),b},b.prototype.getIEOffset=function(a){var b,c,d,e;return c=this.domInputor.createTextRange(),a||(a=this.getPos()),c.move("character",a),d=c.boundingLeft,e=c.boundingTop,b=c.boundingHeight,{left:d,top:e,height:b}},b.prototype.getOffset=function(b){var c,d,e;
return c=this.$inputor,h.selection?(d=this.getIEOffset(b),d.top+=a(j).scrollTop()+c.scrollTop(),d.left+=a(j).scrollLeft()+c.scrollLeft(),d):(d=c.offset(),e=this.getPosition(b),d={left:d.left+e.left-c.scrollLeft(),top:d.top+e.top-c.scrollTop(),height:e.height})},b.prototype.getPosition=function(a){var b,c,e,f,g,h,i;return b=this.$inputor,f=function(a){return a=a.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\s/g,"&nbsp;")),a},void 0===a&&(a=this.getPos()),i=b.val().slice(0,a),e=b.val().slice(a),g="<span style='position: relative; display: inline;'>"+f(i)+"</span>",g+="<span id='caret' style='position: relative; display: inline;'>|</span>",g+="<span style='position: relative; display: inline;'>"+f(e)+"</span>",h=new d(b),c=h.create(g).rect()
},b.prototype.getIEPosition=function(a){var b,c,d,e,f;return d=this.getIEOffset(a),c=this.$inputor.offset(),e=d.left-c.left,f=d.top-c.top,b=d.height,{left:e,top:f,height:b}},b}(),d=function(){function b(a){this.$inputor=a}return b.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],b.prototype.mirrorCss=function(){var b,c=this;
return b={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),a.each(this.css_attr,function(a,d){return b[d]=c.$inputor.css(d)}),b},b.prototype.create=function(b){return this.$mirror=a("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(b),this.$inputor.after(this.$mirror),this},b.prototype.rect=function(){var a,b,c;return a=this.$mirror.find("#caret"),b=a.position(),c={left:b.left,top:b.top,height:a.height()},this.$mirror.remove(),c
},b}(),e={contentEditable:function(a){return!(!a[0].contentEditable||"true"!==a[0].contentEditable)}},g={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return h.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){var b;return b=this.getOffset(a)}},h=null,j=null,i=null,l=function(a){var b;return(b=null!=a?a.iframe:void 0)?(i=b,j=b.contentWindow,h=b.contentDocument||j.document):(i=void 0,j=window,h=document)},f=function(a){var b;h=a[0].ownerDocument,j=h.defaultView||h.parentWindow;
try{return i=j.frameElement}catch(c){b=c}},a.fn.caret=function(d,f,h){var i;return g[d]?(a.isPlainObject(f)?(l(f),f=void 0):l(h),i=e.contentEditable(this)?new b(this):new c(this),g[d].apply(i,[f])):a.error("Method "+d+" does not exist on jQuery.caret")},a.fn.caret.EditableCaret=b,a.fn.caret.InputCaret=c,a.fn.caret.Utils=e,a.fn.caret.apis=g}),ed.define("chosen",["edjquery"],function(a){var b=a;return function(){var a,c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);
return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),title:a.title?a.title:void 0,children:0,disabled:a.disabled,classes:a.className}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));
return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,title:a.title?a.title:void 0,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,group_label:null!=b?this.parsed[b].label:null,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0
},a.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},a}(),e.select_to_array=function(a){var b,c,d,f,g;for(c=new e,g=a.childNodes,d=0,f=g.length;f>d;d++)b=g[d],c.add_node(b);return c.parsed},c=function(){function a(b,c){this.form_field=b,this.options=null!=c?c:{},a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())
}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1
},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text},a.prototype.choice_label=function(a){return this.include_group_label_in_selected&&null!=a.group_label?"<b class='group-name'>"+a.group_label+"</b>"+a.html:a.html
},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var b=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(){var b=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return b.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,d,e,f;
for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(c)));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match?this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.style.cssText=a.style,c.setAttribute("data-option-array-index",a.array_index),c.innerHTML=a.search_text,a.title&&(c.title=a.title),this.outerHTML(c)):"":""
},a.prototype.result_add_group=function(a){var b,c;return a.search_match||a.group_match?a.active_options>0?(b=[],b.push("group-result"),a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.innerHTML=a.search_text,a.title&&(c.title=a.title),this.outerHTML(c)):"":""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0
},a.prototype.reset_single_select_options=function(){var a,b,c,d,e;for(d=this.results_data,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.selected?e.push(a.selected=!1):e.push(void 0);return e},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(this.no_results_clear(),d=0,f=this.get_search_text(),a=f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp(a,"i"),c=this.get_search_regex(a),l=this.results_data,j=0,k=l.length;k>j;j++)b=l[j],b.search_match=!1,e=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(e=this.results_data[b.group_array_index],0===e.active_options&&e.search_match&&(d+=1),e.active_options+=1),b.search_text=b.group?b.label:b.html,(!b.group||this.group_search)&&(b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(d+=1),b.search_match?(f.length&&(g=b.search_text.search(i),h=b.search_text.substr(0,g+f.length)+"</em>"+b.search_text.substr(g+f.length),b.search_text=h.substr(0,g)+"<em>"+h.substr(g)),null!=e&&(e.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));
return this.result_clear_highlight(),1>d&&f.length?(this.update_results_content(""),this.no_results(f)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.get_search_regex=function(a){var b;return b=this.search_contains?"":"^",new RegExp(b+a,"i")},a.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0
},a.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();
if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.clipboard_event_checker=function(){var b=this;return setTimeout(function(){return b.results_search()},50)},a.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"
},a.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},a.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},a.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},a.prototype.search_results_touchend=function(a){return this.touch_started?this.search_results_mouseup(a):void 0
},a.prototype.outerHTML=function(a){var b;return a.outerHTML?a.outerHTML:(b=document.createElement("div"),b.appendChild(a),b.innerHTML)},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},a.default_multiple_text="Select Some Options",a.default_single_text="Select an Option",a.default_no_result_text="No results match",a
}(),a=b,a.fn.extend({chosen:function(b){return c.browser_is_supported()?this.each(function(){var e,f;e=a(this),f=e.data("chosen"),"destroy"===b&&f instanceof d?f.destroy():f instanceof d||e.data("chosen",new d(this,b))}):this}}),d=function(b){function c(){return f=c.__super__.constructor.apply(this,arguments)}return h(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},c.prototype.set_up_html=function(){var b,c;
return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()
},c.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},c.prototype.register_observers=function(){var a=this;return this.container.bind("touchstart.chosen",function(b){return a.container_mousedown(b),b.preventDefault()}),this.container.bind("touchend.chosen",function(b){return a.container_mouseup(b),b.preventDefault()}),this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)
}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.search_results.bind("touchstart.chosen",function(b){a.search_results_touchstart(b)
}),this.search_results.bind("touchmove.chosen",function(b){a.search_results_touchmove(b)}),this.search_results.bind("touchend.chosen",function(b){a.search_results_touchend(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.form_field_jq.bind("chosen:close.chosen",function(b){a.input_blur(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)
}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.search_field.bind("cut.chosen",function(b){a.clipboard_event_checker(b)}),this.search_field.bind("paste.chosen",function(b){a.clipboard_event_checker(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()
})},c.prototype.destroy=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))
},c.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())
},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.search_results_mousewheel=function(a){var b;return a.originalEvent&&(b=a.originalEvent.deltaY||-a.originalEvent.wheelDelta||a.originalEvent.detail),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},c.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0
},c.prototype.close_field=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){var c;
return c=a(b.target).closest(".chosen-container"),c.length&&this.container[0]===c[0]?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=e.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1
},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null
},c.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},c.prototype.update_results_content=function(a){return this.search_results.html(a)},c.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1
},c.prototype.set_tab_index=function(){var b;return this.form_field.tabIndex?(b=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=b):void 0},c.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()
}):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0
},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},c.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(b)+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)
}),c.append(d)),this.search_container.before(c)},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},c.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},c.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0
},c.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):this.reset_single_select_options(),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(this.choice_label(c)),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,a.preventDefault(),this.search_field_scale())):void 0
},c.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(a)},c.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)
},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},c.prototype.get_search_text=function(){return a("<div/>").text(a.trim(this.search_field.val())).html()},c.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0
},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()
},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)
},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:this.results_showing&&a.preventDefault();
break;case 32:this.disable_search&&a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})
}},c}(c)}.call(this),a}),ed.define("jquery.expanding",["edq"],function(a){function f(){var b=a(this).data("textareaClone");b.find("div").text(this.value.replace(/\r\n/g,"\n")+" "),a(this).trigger("resize.expanding")}a.expandingTextarea=a.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},a.expandingTextarea||{});var b=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","boxSizing","webkitBoxSizing","mozBoxSizing","msBoxSizing"],c={position:"absolute",height:"100%",resize:"none"},d={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},e={position:"relative"};
return a.fn.expandingTextarea=function(g){var h=a.extend({},a.expandingTextarea.opts,g);return"resize"===g?this.trigger("input.expanding"):"destroy"===g?(this.filter(".expanding-init").each(function(){var b=a(this).removeClass("expanding-init");b.attr("style",b.data("expanding-styles")||"").removeData("expanding-styles")}),this):(this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var g=a(this),i=g.parent(),j=a(a.parseHTML("<pre class='textareaClone'><div></div></pre>"));
g.after(j).data("textareaClone",j),i.css(e),g.data("expanding-styles",g.attr("style")),g.css(c),j.css(d),a.each(b,function(a,b){var c=g.css(b);j.css(b)!==c&&j.css(b,c)}),g.bind("input.expanding propertychange.expanding keyup.expanding",f),f.apply(this),h.resize&&g.bind("resize.expanding",h.resize)}),this)},a(function(){a.expandingTextarea.autoInitialize&&a(a.expandingTextarea.initialSelector).expandingTextarea()}),a}),ed.define("jquery.imgareaselect",["edjquery"],function(a){var b=a;!function(a){function f(){return a("<div/>")
}var b=Math.abs,c=Math.max,d=Math.min,e=Math.round;a.imgAreaSelect=function(g,h){function Y(a){return a+s.left-w.left}function Z(a){return a+s.top-w.top}function $(a){return a-s.left+w.left}function _(a){return a-s.top+w.top}function ab(a){return a.pageX-w.left}function bb(a){return a.pageY-w.top}function cb(a){var b=a||B,c=a||C;return{x1:e(O.x1*b),y1:e(O.y1*c),x2:e(O.x2*b),y2:e(O.y2*c),width:e(O.x2*b)-e(O.x1*b),height:e(O.y2*c)-e(O.y1*c)}}function db(a,b,c,d,f){var g=f||B,h=f||C;O={x1:e(a/g||0),y1:e(b/h||0),x2:e(c/g||0),y2:e(d/h||0)},O.width=O.x2-O.x1,O.height=O.y2-O.y1
}function eb(){j&&i.width()&&(s={left:e(i.offset().left),top:e(i.offset().top)},t=i.innerWidth(),u=i.innerHeight(),s.top+=i.outerHeight()-u>>1,s.left+=i.outerWidth()-t>>1,E=e(h.minWidth/B)||0,F=e(h.minHeight/C)||0,G=e(d(h.maxWidth/B||1<<24,t)),H=e(d(h.maxHeight/C||1<<24,u)),"1.3.2"!=a().jquery||"fixed"!=y||P.getBoundingClientRect||(s.top+=c(document.body.scrollTop,P.scrollTop),s.left+=c(document.body.scrollLeft,P.scrollLeft)),w=/absolute|relative/.test(v.css("position"))?{left:e(v.offset().left)-v.scrollLeft(),top:e(v.offset().top)-v.scrollTop()}:"fixed"==y?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:{left:0,top:0},q=Y(0),r=Z(0),(O.x2>t||O.y2>u)&&mb())
}function fb(b){if(J){switch(k.css({left:Y(O.x1),top:Z(O.y1)}).add(l).width(V=O.width).height(W=O.height),l.add(m).add(o).css({left:0,top:0}),m.width(c(V-m.outerWidth()+m.innerWidth(),0)).height(c(W-m.outerHeight()+m.innerHeight(),0)),a(n[0]).css({left:q,top:r,width:O.x1,height:u}),a(n[1]).css({left:q+O.x1,top:r,width:V,height:O.y1}),a(n[2]).css({left:q+O.x2,top:r,width:t-O.x2,height:u}),a(n[3]).css({left:q+O.x1,top:r+O.y2,width:V,height:u-O.y2}),V-=o.outerWidth(),W-=o.outerHeight(),o.length){case 8:a(o[4]).css({left:V>>1}),a(o[5]).css({left:V,top:W>>1}),a(o[6]).css({left:V>>1,top:W}),a(o[7]).css({top:W>>1});
case 4:o.slice(1,3).css({left:V}),o.slice(2,4).css({top:W})}b!==!1&&(a.imgAreaSelect.onKeyPress!=vb&&a(document).unbind(a.imgAreaSelect.keyPress,a.imgAreaSelect.onKeyPress),h.keys&&a(document)[a.imgAreaSelect.keyPress](a.imgAreaSelect.onKeyPress=vb)),yb&&m.outerWidth()-m.innerWidth()==2&&(m.css("margin",0),setTimeout(function(){m.css("margin","auto")},0))}}function gb(a){eb(),fb(a),K=Y(O.x1),L=Z(O.y1),M=Y(O.x2),N=Z(O.y2)}function hb(a,b){h.fadeSpeed?a.fadeOut(h.fadeSpeed,b):a.hide()}function ib(a){var b=$(ab(a))-O.x1,c=_(bb(a))-O.y1;
X||(eb(),X=!0,k.one("mouseout",function(){X=!1})),D="",h.resizable&&(c<=h.resizeMargin?D="n":c>=O.height-h.resizeMargin&&(D="s"),b<=h.resizeMargin?D+="w":b>=O.width-h.resizeMargin&&(D+="e")),k.css("cursor",D?D+"-resize":h.movable?"move":""),p&&p.toggle()}function jb(){a("body").css("cursor",""),(h.autoHide||O.width*O.height==0)&&hb(k.add(n),function(){a(this).hide()}),a(document).unbind("mousemove",nb),k.mousemove(ib),h.onSelectEnd(g,cb())}function kb(b){return 1!=b.which?!1:(eb(),D?(a("body").css("cursor",D+"-resize"),K=Y(O[/w/.test(D)?"x2":"x1"]),L=Z(O[/n/.test(D)?"y2":"y1"]),a(document).mousemove(nb).one("mouseup",jb),k.unbind("mousemove",ib)):h.movable?(z=q+O.x1-ab(b),A=r+O.y1-bb(b),k.unbind("mousemove",ib),a(document).mousemove(pb).one("mouseup",function(){h.onSelectEnd(g,cb()),a(document).unbind("mousemove",pb),k.mousemove(ib)
})):i.mousedown(b),!1)}function lb(a){I&&(a?(M=c(q,d(q+t,K+b(N-L)*I*(M>K||-1))),N=e(c(r,d(r+u,L+b(M-K)/I*(N>L||-1)))),M=e(M)):(N=c(r,d(r+u,L+b(M-K)/I*(N>L||-1))),M=e(c(q,d(q+t,K+b(N-L)*I*(M>K||-1)))),N=e(N)))}function mb(){K=d(K,q+t),L=d(L,r+u),b(M-K)<E&&(M=K-E*(K>M||-1),q>M?K=q+E:M>q+t&&(K=q+t-E)),b(N-L)<F&&(N=L-F*(L>N||-1),r>N?L=r+F:N>r+u&&(L=r+u-F)),M=c(q,d(M,q+t)),N=c(r,d(N,r+u)),lb(b(M-K)<b(N-L)*I),b(M-K)>G&&(M=K-G*(K>M||-1),lb()),b(N-L)>H&&(N=L-H*(L>N||-1),lb(!0)),O={x1:$(d(K,M)),x2:$(c(K,M)),y1:_(d(L,N)),y2:_(c(L,N)),width:b(M-K),height:b(N-L)},fb(),h.onSelectChange(g,cb())
}function nb(a){return M=/w|e|^$/.test(D)||I?ab(a):Y(O.x2),N=/n|s|^$/.test(D)||I?bb(a):Z(O.y2),mb(),!1}function ob(b,c){M=(K=b)+O.width,N=(L=c)+O.height,a.extend(O,{x1:$(K),y1:_(L),x2:$(M),y2:_(N)}),fb(),h.onSelectChange(g,cb())}function pb(a){return K=c(q,d(z+ab(a),q+t-O.width)),L=c(r,d(A+bb(a),r+u-O.height)),ob(K,L),a.preventDefault(),!1}function qb(){a(document).unbind("mousemove",qb),eb(),M=K,N=L,mb(),D="",n.is(":visible")||k.add(n).hide().fadeIn(h.fadeSpeed||0),J=!0,a(document).unbind("mouseup",rb).mousemove(nb).one("mouseup",jb),k.unbind("mousemove",ib),h.onSelectStart(g,cb())
}function rb(){a(document).unbind("mousemove",qb).unbind("mouseup",rb),hb(k.add(n)),db($(K),_(L),$(K),_(L)),this instanceof a.imgAreaSelect||(h.onSelectChange(g,cb()),h.onSelectEnd(g,cb()))}function sb(b){return 1!=b.which||n.is(":animated")?!1:(eb(),z=K=ab(b),A=L=bb(b),a(document).mousemove(qb).mouseup(rb),!1)}function tb(){gb(!1)}function ub(){j=!0,xb(h=a.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},h)),k.add(n).css({visibility:""}),h.show&&(J=!0,eb(),fb(),k.add(n).hide().fadeIn(h.fadeSpeed||0)),setTimeout(function(){h.onInit(g,cb())
},0)}function wb(a,b){for(var c in b)void 0!==h[c]&&a.css(b[c],h[c])}function xb(b){if(b.parent&&(v=a(b.parent)).append(k.add(n)),a.extend(h,b),eb(),null!=b.handles){for(o.remove(),o=a([]),T=b.handles?"corners"==b.handles?4:8:0;T--;)o=o.add(f());o.addClass(h.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:x+1||1}),!parseInt(o.css("width"))>=0&&o.width(5).height(5),(U=h.borderWidth)&&o.css({borderWidth:U,borderStyle:"solid"}),wb(o,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})
}for(B=h.imageWidth/t||1,C=h.imageHeight/u||1,null!=b.x1&&(db(b.x1,b.y1,b.x2,b.y2),b.show=!b.hide),b.keys&&(h.keys=a.extend({shift:1,ctrl:"resize"},b.keys)),n.addClass(h.classPrefix+"-outer"),l.addClass(h.classPrefix+"-selection"),T=0;T++<4;)a(m[T-1]).addClass(h.classPrefix+"-border"+T);wb(l,{selectionColor:"background-color",selectionOpacity:"opacity"}),wb(m,{borderOpacity:"opacity",borderWidth:"border-width"}),wb(n,{outerColor:"background-color",outerOpacity:"opacity"}),(U=h.borderColor1)&&a(m[0]).css({borderStyle:"solid",borderColor:U}),(U=h.borderColor2)&&a(m[1]).css({borderStyle:"dashed",borderColor:U}),k.append(l.add(m).add(p)).append(o),yb&&((U=(n.css("filter")||"").match(/opacity=(\d+)/))&&n.css("opacity",U[1]/100),(U=(m.css("filter")||"").match(/opacity=(\d+)/))&&m.css("opacity",U[1]/100)),b.hide?hb(k.add(n)):b.show&&j&&(J=!0,k.add(n).fadeIn(h.fadeSpeed||0),gb()),I=(S=(h.aspectRatio||"").split(/:/))[0]/S[1],i.add(n).unbind("mousedown",sb),h.disable||h.enable===!1?(k.unbind("mousemove",ib).unbind("mousedown",kb),a(window).unbind("resize",tb)):((h.enable||h.disable===!1)&&((h.resizable||h.movable)&&k.mousemove(ib).mousedown(kb),a(window).resize(tb)),h.persistent||i.add(n).mousedown(sb)),h.enable=h.disable=void 0
}var j,p,q,r,t,u,v,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,R,S,T,U,V,W,X,i=a(g),k=f(),l=f(),m=f().add(f()).add(f()).add(f()),n=f().add(f()).add(f()).add(f()),o=a([]),s={left:0,top:0},w={left:0,top:0},x=0,y="absolute",O={x1:0,y1:0,x2:0,y2:0,width:0,height:0},P=document.documentElement,Q=navigator.userAgent,vb=function(a){var e,f,b=h.keys,g=a.keyCode;if(e=isNaN(b.alt)||!a.altKey&&!a.originalEvent.altKey?!isNaN(b.ctrl)&&a.ctrlKey?b.ctrl:!isNaN(b.shift)&&a.shiftKey?b.shift:isNaN(b.arrows)?10:b.arrows:b.alt,"resize"==b.arrows||"resize"==b.shift&&a.shiftKey||"resize"==b.ctrl&&a.ctrlKey||"resize"==b.alt&&(a.altKey||a.originalEvent.altKey)){switch(g){case 37:e=-e;
case 39:f=c(K,M),K=d(K,M),M=c(f+e,K),lb();break;case 38:e=-e;case 40:f=c(L,N),L=d(L,N),N=c(f+e,L),lb(!0);break;default:return}mb()}else switch(K=d(K,M),L=d(L,N),g){case 37:ob(c(K-e,q),L);break;case 38:ob(K,c(L-e,r));break;case 39:ob(K+d(e,t-$(M)),L);break;case 40:ob(K,L+d(e,u-_(N)));break;default:return}return!1};this.remove=function(){xb({disable:!0}),k.add(n).remove()},this.getOptions=function(){return h},this.setOptions=xb,this.getSelection=cb,this.setSelection=db,this.cancelSelection=rb,this.update=gb;var yb=(/msie ([\w.]+)/i.exec(Q)||[])[1],zb=/opera/i.test(Q),Ab=/webkit/i.test(Q)&&!/chrome/i.test(Q);
for(R=i;R.length;)x=c(x,isNaN(R.css("z-index"))?x:R.css("z-index")),"fixed"==R.css("position")&&(y="fixed"),R=R.parent(":not(body)");x=h.zIndex||x,yb&&i.attr("unselectable","on"),a.imgAreaSelect.keyPress=yb||Ab?"keydown":"keypress",zb&&(p=f().css({width:"100%",height:"100%",position:"absolute",zIndex:x+2||2})),k.add(n).css({visibility:"hidden",position:y,overflow:"hidden",zIndex:x||"0"}),k.css({zIndex:x+2||2}),l.add(m).css({position:"absolute",fontSize:0}),g.complete||"complete"==g.readyState||!i.is("img")?ub():i.one("load",ub),!j&&yb&&yb>=7&&(g.src=g.src)
},a.fn.imgAreaSelect=function(b){return b=b||{},this.each(function(){a(this).data("imgAreaSelect")?b.remove?(a(this).data("imgAreaSelect").remove(),a(this).removeData("imgAreaSelect")):a(this).data("imgAreaSelect").setOptions(b):b.remove||(void 0===b.enable&&void 0===b.disable&&(b.enable=!0),a(this).data("imgAreaSelect",new a.imgAreaSelect(this,b)))}),b.instance?a(this).data("imgAreaSelect"):this}}(b)}),ed.define("edjquery",function(){var a=window.jQuery;return a}),ed.define("jquery.migrate",["edjquery"],function(a){var b=a;
!function(a,b,c){function e(c){var e=b.console;d[c]||(d[c]=!0,a.migrateWarnings.push(c),e&&e.warn&&!a.migrateMute&&a.migrateTrace&&e.trace)}function f(b,c,d,f){if(Object.defineProperty)try{return Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return e(f),d},set:function(a){e(f),d=a}}),void 0}catch(g){}a._definePropertyBroken=!0,b[c]=d}var d={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log,a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){d={},a.migrateWarnings.length=0
},"BackCompat"===document.compatMode&&e("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;f(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,d,f,i){var j=d.toLowerCase(),o=b&&b.nodeType;
return i&&(h.length<4&&e("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?d in g:a.isFunction(a.fn[d])))?a(b)[d](f):("type"===d&&f!==c&&k.test(b.nodeName)&&b.parentNode&&e("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d
}},n.test(j)&&e("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,d,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&e("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&e("jQuery.fn.attr('value', val) no longer sets properties"),a.value=b,void 0)
}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,d){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&e("$(html) HTML strings must start with '<' character"),f[3]&&e("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(e("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,d):q.apply(this,arguments)
},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(e("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),f(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)
}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return e("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var d,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(d=a.data(g,b),f=a._data(g,b),d!==c&&d!==f||f===c)?t.apply(this,arguments):(e("Use of jQuery.fn.data('events') is deprecated"),f)
};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return e("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,c,d,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,e("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),d)for(i=function(a){return!a.type||u.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):d.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(d.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));
return k});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=new RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&e("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&f(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,d,f){a!==document&&D.test(b)&&e("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,d,f)
},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return e("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);e("jQuery.fn.toggle(handler, handler...) is deprecated");var d=arguments,f=b.guid||a.guid++,g=0,h=function(c){var e=(a._data(this,"lastToggle"+b.guid)||0)%g;
return a._data(this,"lastToggle"+b.guid,e+1),c.preventDefault(),d[e].apply(this,arguments)||!1};for(h.guid=f;g<d.length;)d[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,d){return e("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,d),this)},a.fn.die=function(b,c){return e("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,d){return c||D.test(a)||e("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,d)
},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(b,window)}),ed.define("jquery.popbox",["edjquery"],function(a){isAjax=function(b){return a.isString(b)?!!b.match("ajax://"):!1},a.fn.popbox=function(c){if(a.isPlainObject(c))return this.each(function(){var d=a(this),e=b.get(d);
e?e.update(c):e=new b(d,c)}),this;if(a.isString(c)){var g,d=a(this[0]),e=b.get(d)||new b(d),f=e[c];return a.isFunction(f)&&(g=f.apply(e,a.makeArray(arguments).slice(1))),g||this}return this};var b=function(c,d){var e=this;c.data("popbox",e),a.isString(d)&&(d={content:d}),d||(d={}),c.parentsUntil("body").addBack().each(function(){var b=a(this);return"fixed"===b.css("position")?(d.fixed=!0,!1):void 0});var f={},g=c.attr("data-ed-popbox")||c.find("[data-ed-popbox-content]").html()||a(c.attr("data-ed-popbox-target")).html();
g&&(f.content=g),a(["id","component","type","toggle","position","collision","cache"]).each(function(a,b){var d="data-ed-popbox-"+b,e=c.attr(d);"cache"==b&&0==e&&(e=!1),f[b]=e}),void 0!==c.attr("data-ed-popbox-offset")&&(f.offset=parseInt(c.attr("data-ed-popbox-offset"))),void 0===g&&c.attr("data-ed-popbox",""),e.update(a.extend(!0,{},b.defaultOptions,{tooltip:a(),loader:a('<div id="ed" class="popbox loading" data-ed-popbox-tooltip><div class="arrow"></div></div>'),uid:a.uid(),button:c},f,d))};return b.defaultOptions={content:"",id:null,type:"",enabled:!1,wait:!1,locked:!1,exclusive:!1,hideTimer:null,hideDelay:50,toggle:"click",position:"bottom",collision:"flip",cache:!0,fixed:!1,offset:10,namespace:""},b.get=function(c){var d=a(c).data("popbox");
return d instanceof b?d:void 0},a.extend(b.prototype,{positions:"top top-left top-right top-center bottom bottom-left bottom-right bottom-center left left-top left-bottom left-center right right-top right-bottom right-center",update:function(b){var c=this;if(a.extend(!0,c,b),isAjax(c.content)){c.wait=!0,c.namespace=c.content.replace("ajax://","");var d={};c.button.each(function(){var b=this.attributes;a.each(b,function(){if(this.specified&&-1!==this.name.indexOf("data-args-")){var a=this.name.replace("data-args-","");
d[a]=this.value}})});var e=function(a){return{content:EasyDiscuss.ajax(a,d)}};return c.update({content:e}),c.wait=!1,void 0}a.isString(c.content)&&(c.content=a.Deferred().resolve(c.content));var f=c.position;if(a.isString(f)){var h,i,j,k,g=f.split("-");switch(g[0]){case"top":case"bottom":h=j=g[1]||"center",i="top"==g[0]?"bottom":"top",k="top"==g[0]?"top":"bottom";break;case"left":case"right":i=k=g[1]||"center",h="left"==g[0]?"right":"left",j="left"==g[0]?"left":"right"}c.position={classname:f,my:h+" "+i,at:j+" "+k,using:function(b,d){var e=a(this),f=c.position.classname,h=b.top,i=b.left,j=c.offset,k=c.button.offset();
switch(g[0]){case"top":case"bottom":var l=d.vertical;l==g[0]&&(f=f.replace(/top|bottom/gi,"top"==l?"bottom":"top")),h="top"==l?h+j:h-j,"left"==g[1]&&i<Math.floor(k.left)&&(f=f.replace(/left|right/gi,"left"==g[1]?"right":"left"));break;case"left":case"right":var m=d.horizontal;d.horizontal==g[0]&&(f=f.replace(/left|right/gi,"left"==d.horizontal?"right":"left")),i="left"==m?i+j:i-j}e.css({top:h+"px",left:i+"px"}).removeClass(c.positions).addClass(f)}}}a.extend(c.position,{of:c.button,collision:c.collision}),c.loader.attr({id:c.id,"data-ed-popbox-tooltip":c.type,style:c.fixed?"position: fixed":""}).addClass(c.component).addClass("popbox-"+c.type),c.enabled&&c.show()
},trigger:function(a,b){this.tooltip.trigger(a,b),this.button.trigger(a,b)},show:function(){var c=this;if(c.enabled=!0,!c.wait){if(clearTimeout(c.hideTimer),c.exclusive&&a("[data-ed-popbox-tooltip]").each(function(){var c=b.get(a(this));c&&c.hide()}),c.button.addClass("is-active"),"click"==c.toggle){var d=a(document),e=b.toggleEvent+".popbox."+c.uid;d.off(e).on(e,function(b){var f=a(b.target).parents().andSelf();f.filter(c.button).length>0||f.filter(c.tooltip).length>0||(d.off(e),c.hide())})}var f=a(window),g="resize.popbox"+c.uid;
if(f.off(g).on(g,function(){c.tooltip.length>0&&c.tooltip.position(c.position)}),c.tooltip.length>0)return c.tooltip.appendTo("body").position(c.position),c.trigger("popboxActivate",[c]),void 0;if(a.isFunction(c.content)){var h=c.content(c.namespace);if(c.update(h),c.wait)return}a.isDeferred(c.content)&&("pending"==c.content.state()&&(c.loader.appendTo("body").position(c.position),c.trigger("popboxLoading",[c])),c.content.always(function(){c.wait=!1}).done(function(b){if(!(c.tooltip.length>0)&&c.enabled){c.loader.detach();
var d=a.buildHTML(b);if(d.filter("[data-ed-popbox-tooltip]").length<1){var e=d;d=a('<div id="ed" class="popbox" data-ed-popbox-tooltip><div class="arrow"></div><div class="popbox-content" data-ed-popbox-content></div></div>').attr({"data-ed-popbox-tooltip":c.type,style:c.fixed?"position: fixed":""}).addClass(c.component).addClass("popbox-"+c.type).appendTo("body"),d.find("[data-ed-popbox-content]").append(e)}else d=d.appendTo("body").filter("[data-ed-popbox-tooltip]");c.tooltip=d.data("popbox",c).position(c.position),c.tooltip.find("label").on("click",function(b){b.preventDefault(),b.stopPropagation();
var d=c.tooltip.find("#"+a(this).attr("for"));d.length>0&&(d.is(":checkbox")?d.click():d.focus())}),c.trigger("popboxActivate",[c])}}).fail(function(){c.update({content:"Unable to load tooltip content."})}))}},hide:function(b){var c=this;c.enabled=!1,clearTimeout(c.hideTimer),c.loader.detach();var d=function(){(!c.locked||b)&&(c.tooltip.detach(),a(window).off("resize.popbox"+c.uid),c.trigger("popboxDeactivate",[c]),c.cache||c.destroy())};c.button.removeClass("is-active"),c.hideTimer=setTimeout(d,c.hideDelay)
},destroy:function(){this.button.removeData("popbox")},widget:function(){return this}}),b.toggleEvent=navigator.userAgent.match(/iPhone|iPad|iPod/i)?"touchstart":"click",a(document).on(b.toggleEvent+".popbox","[data-ed-popbox]",function(){var b=a(this).popbox("widget");b.enabled?b.hide():b.show()}).on("mouseover.popbox","[data-ed-popbox]",function(){var b=a(this).popbox("widget");"hover"!=b.toggle||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||b.show()}).on("mouseout.popbox","[data-ed-popbox]",function(){var b=a(this).popbox("widget");
"hover"==b.toggle&&b.hide()}).on("mouseover.popbox.tooltip","[data-ed-popbox-tooltip]",function(){var a=b.get(this);a&&"hover"===a.toggle&&(a.locked=!0,clearTimeout(a.hideTimer))}).on("mouseout.popbox.tooltip","[data-ed-popbox-tooltip]",function(){var a=b.get(this);a&&"hover"===a.toggle&&(a.locked=!1,a.hide())}).on("click.popbox.close","[data-ed-popbox-close]",function(){var c=b.get(a(this).parents("[data-ed-popbox-tooltip]"));c&&c.hide()}),a}),ed.define("jquery.server",["edjquery"],function($){var self=$.server=function(a){var b=$.Deferred(),c=$.extend(!0,{},self.defaultOptions,a,{success:function(){}}),d=b.xhr=$.Ajax(c).done(function(c){if("string"==typeof c)try{c=$.parseJSON(c)
}catch(d){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}if($.isArray(c)){var e=function(c){var d=c.type,e=self.parsers[d]||a[d];return $.isFunction(e)?e.apply(b,c.data):void 0},c=$.map(c,function(a){return"notify"!=a.type?a:(e(a),void 0)});$.each(c,function(a,b){e(b)})}else b.rejectWith(b,["Invalid ajax commands.","error"]);"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,c,d){b.rejectWith(b,[d,c])});return b.abort=d.abort,b};return self.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},cache:!1,contentType:"application/x-www-form-urlencoded",dataType:"json"},self.parsers={script:function(){var data=$.makeArray(arguments);
if("string"!=typeof data[0]){var chain=window,chainBroken=!1;$.each(data,function(a,b){"Foundry"===b.property&&(b.property=$.globalNamespace),"Foundry"===b.method&&(b.method=$.globalNamespace);try{switch(b.type){case"get":chain=chain[b.property];break;case"set":chain[b.property]=b.value,chainBroken=!0;break;case"call":chain=chain[b.method].apply(chain,b.args)}}catch(c){chainBroken=!0}})}else try{eval(data[0])}catch(err){}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)
},notify:function(){this.notifyWith(this,arguments)},redirect:function(a){window.location=a}},$}),ed.define("jquery.uri",["edjquery"],function(a){a.isUrl=function(a){var b=/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)};var b=function(a){"use strict";var b=function(a){var c,d,e,f,g,h,b=[];if("undefined"==typeof a||null===a||""===a)return b;for(0===a.indexOf("?")&&(a=a.substring(1)),d=a.toString().split(/[&;]/),c=0;c<d.length;c++)e=d[c],f=e.split("="),g=f[0],h=-1===e.indexOf("=")?null:null===f[1]?"":f[1],b.push([g,h]);
return b},c=b(a),d=function(){var b,d,a="";for(b=0;b<c.length;b++)d=c[b],a.length>0&&(a+="&"),a+=null===d[1]?d[0]:d.join("=");return a.length>0?"?"+a:a},e=function(a){return a=decodeURIComponent(a),a=a.replace("+"," ")},f=function(a){var b,d;for(d=0;d<c.length;d++)if(b=c[d],e(a)===e(b[0]))return b[1]},g=function(a){var d,f,b=[];for(d=0;d<c.length;d++)f=c[d],e(a)===e(f[0])&&b.push(f[1]);return b},h=function(a,b){var f,g,h,i,d=[];for(f=0;f<c.length;f++)g=c[f],h=e(g[0])===e(a),i=e(g[1])===e(b),(1===arguments.length&&!h||2===arguments.length&&!h&&!i)&&d.push(g);
return c=d,this},i=function(a,b,d){return 3===arguments.length&&-1!==d?(d=Math.min(d,c.length),c.splice(d,0,[a,b])):arguments.length>0&&c.push([a,b]),this},j=function(a,b,d){var g,j,f=-1;if(3===arguments.length){for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)&&decodeURIComponent(j[1])===e(d)){f=g;break}h(a,d).addParam(a,b,f)}else{for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)){f=g;break}h(a),i(a,b,f)}return this};return{getParamValue:f,getParamValues:g,deleteParam:h,addParam:i,replaceParam:j,toString:d}},c=function(a){"use strict";
var d=!1,e=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,f=function(a){for(var b={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=b[d?"strict":"loose"].exec(a),g={},h=14;h--;)g[c[h]]=f[h]||"";
return g[e.name]={},g[c[12]].replace(e.parser,function(a,b,c){b&&(g[e.name][b]=c)}),g},g=f(a||""),h=new b(g.query),i=function(a){return"undefined"!=typeof a&&(g.protocol=a),g.protocol},j=null,k=function(a){return"undefined"!=typeof a&&(j=a),null===j?-1!==g.source.indexOf("//"):j},l=function(a){return"undefined"!=typeof a&&(g.userInfo=a),g.userInfo},m=function(a){return"undefined"!=typeof a&&(g.host=a),g.host},n=function(a){return"undefined"!=typeof a&&(g.port=a),g.port},o=function(a){return"undefined"!=typeof a&&(g.path=a),g.path
},p=function(a){return"undefined"!=typeof a&&(h=new b(a)),h},q=function(a){return"undefined"!=typeof a&&(g.anchor=a),g.anchor},r=function(a){return i(a),this},s=function(a){return k(a),this},t=function(a){return l(a),this},u=function(a){return m(a),this},v=function(a){return n(a),this},w=function(a){return o(a),this},x=function(a){return p(a),this},y=function(a){return q(a),this},z=function(a){return p().getParamValue(a)},A=function(a){return p().getParamValues(a)},B=function(a,b){return 2===arguments.length?p().deleteParam(a,b):p().deleteParam(a),this
},C=function(a,b,c){return 3===arguments.length?p().addParam(a,b,c):p().addParam(a,b),this},D=function(a,b,c){return 3===arguments.length?p().replaceParam(a,b,c):p().replaceParam(a,b),this},E=function(a){if(void 0===a)return g.path;if("/"==a.substring(0,1))return g.path=a;var b=g.path.split("/"),c=a.split("/");""===b.slice(-1)[0]&&b.pop();for(var d;d=c.shift();)switch(d){case"..":b.length>1&&b.pop();break;case".":break;default:b.push(d)}return g.path=b.join("/"),this},F=function(){var a="",b=function(a){return null!==a&&""!==a
};return b(i())?(a+=i(),i().indexOf(":")!==i().length-1&&(a+=":"),a+="//"):k()&&b(m())&&(a+="//"),b(l())&&b(m())&&(a+=l(),l().indexOf("@")!==l().length-1&&(a+="@")),b(m())&&(a+=m(),b(n())&&(a+=":"+n())),b(o())?a+=o():b(m())&&(b(p().toString())||b(q()))&&(a+="/"),b(p().toString())&&(0!==p().toString().indexOf("?")&&(a+="?"),a+=p().toString()),b(q())&&(0!==q().indexOf("#")&&(a+="#"),a+=q()),a},G=function(b){var c=a.match(e)||[];return void 0===b?c:c[b]||""},H=function(){return new c(F())};return{protocol:i,hasAuthorityPrefix:k,userInfo:l,host:m,port:n,path:o,query:p,anchor:q,setProtocol:r,setHasAuthorityPrefix:s,setUserInfo:t,setHost:u,setPort:v,setPath:w,setQuery:x,setAnchor:y,getQueryParamValue:z,getQueryParamValues:A,deleteQueryParam:B,addQueryParam:C,replaceQueryParam:D,extract:G,toPath:E,toString:F,clone:H}
};a.uri=function(a){return new c(a)}}),ed.define("jquery.utils",["edjquery"],function(a){!function(){var b=function(a){this.items=a,this.start=0,this.end=a.length-1,this.node=null,this.stopped=!1};a.extend(b.prototype,{isLooping:function(){return this.stopped?!1:Math.abs(this.start-this.end)>1?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(a){a?this.end=this.node-1:this.start=this.node+1},stop:function(){this.stop=!0}}),a.Bloop=function(a){return new b(a)}}(),a.Chunk=function(b,c){a.isArray(b)&&(b=[]);
var c=a.extend({},{size:256,every:1e3},c),d=a.extend(a.Deferred(),{size:c.size,every:c.every,from:0,to:b.length,process:function(a){return d.process.fn=a,d},chunkStart:function(a){return d.chunkStart.fn=a,d},chunkEnd:function(a){return d.chunkEnd.fn=a,d},start:function(){return d.stopped=!1,d.iterate(),d},iterate:function(){if(!d.stopped){var a=d.process.fn;if(a){d.to=from.size+d.size;var c=b.length;d.to>c&&(d.to=c);var e={from:d.from,to:d.to};for(d.chunkStart.fn&&d.chunkStart.fn.call(d,e.from,e.to);d.from<d.to&&!d.stopped;)a.call(d,b[d.from]),d.from++;
return d.chunkEnd.fn&&d.chunkEnd.fn.call(d,e.from,e.to),d.completed=d.from>=b.length-1,d.completed?d.resolveWith(d):d.nextIteration=setTimeout(d.iterate,d.every),d}}},pause:function(){return d.stopped=!0,clearTimeout(d.nextIteration),d},restart:function(){return"rejected"===d.state()?d:(d.from=0,d.start(),d)},stop:function(){return d.pause(),d.rejectWith(d,[d.from]),d}});return d},function(b){var c=function(){this.lastId=0};c.prototype.queue=function(c){var d=this,e=a.uid();return d.lastId=e,function(){if(d.lastId===e){var a=arguments,a=b(c)?c.apply(this,a):a;
return b(d.fn)?d.fn.apply(this,a):a}}},a.Enqueue=function(d){var e=new c;b(d)&&(e.fn=d);var f=a.proxy(e.queue,e);return f.reset=function(){e.lastId=0},f}}(a.isFunction),function(){var b={error:"error",warning:"warn",success:"log",info:"info"};a.Exception=function(c){var d=arguments,e=1==d.length,f=3==d.length;return c=a.isPlainObject(c)?c:{type:e?"error":d[0],message:e?d[0]:d[1]},f&&a.extend(c,d[2]),"development"==a.environment&&console[b[c.type]](c.message,c),c}}(),a.IE=function(){var a=navigator.userAgent;
if(a.match(/MSIE 9/))return 9;if(a.match(/MSIE 10/))return 10;if(a.match(/rv:11/i))return 11;for(var b,c=3,d=document.createElement("div"),e=d.getElementsByTagName("i");c++,d.innerHTML="<!--[if gt IE "+c+"]><i></i><![endif]-->",e[0];);return c>4?c:b}(),a.Task=function(b){var c=a.extend(a.Deferred(),{data:{},list:[],add:function(b){var d=a.extend(a.Deferred(),{name:b,item:d});return c.list.push(d),c},process:function(){return c._promise||(c._promise=a.when.apply(a,c.list).then(c.resolve,c.reject,c.progress)),c
}},b);return c},function(){var b=function(a){this.threads=[],this.threadCount=0,this.threadLimit=a.threadLimit||1,this.threadDelay=a.threadDelay||0};a.extend(b.prototype,{add:function(b,c){a.isFunction(b)&&(b.type=c||"normal","deferred"==c&&(b.deferred=a.Deferred().always(a.proxy(this.next,this))),this.threads.push(b),this.run())},addDeferred:function(a){return this.add(a,"deferred")},next:function(){this.threadCount--,this.run()},run:function(){var a=this;setTimeout(function(){if(!(a.threads.length<1)&&a.threadCount<a.threadLimit){a.threadCount++;
var b=a.threads.shift();try{b.call(b,b.deferred)}catch(c){}!b.deferred&&a.next()}},a.threadDelay)}}),a.Threads=function(a){return new b(a)}}(),a.callback=function(b,c){if(a.isFunction(b)){var d=a.uid("cb");return window[d]=function(){return c||delete window[d],b.apply(null,arguments)},d}if(a.isString(b))switch(b){case"destroy":var d=c;delete window[d]}},a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");
a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)}};return e.checked(function(){b.check.apply(d),h()},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.switchClass=function(b,c){var c=c||"-",d=b.split(c)[0]+c,e=d.length;return this.each(function(){var c=a(this),f=a.map((c.attr("class")||"").split(" "),function(a){return a.slice(0,e)==d||""==a?null:a});f.push(b),c.attr("class",f.join(" "))
})},a.fn.activateClass=function(b){return this.prevObject.removeClass(b),a(this).addClass(b)},function(){var b=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);return{r:a>>16,g:(65280&a)>>8,b:255&a}},c=function(a){return d(b(a))},d=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!=d?255*e/d:0,0!=b.s?(b.h=a.r==d?(a.g-a.b)/e:a.g==d?2+(a.b-a.r)/e:4+(a.r-a.g)/e,b.h*=60):b.h=360,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},e=function(a){var b={},c=a.h,d=255*a.s/100,e=255*a.b/100;
if(0==d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360==c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},f=function(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return a.each(c,function(a,b){1==b.length&&(c[a]="0"+b)}),c.join("")},g=function(a){return f(e(a))},h=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}
},i=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},j=function(a){var b=6-a.length;if(3==b)for(var d,c=a.split(""),a="";d=c.shift();)a+=d+d;else for(;b--;)a="0"+a;return a.replace(/[^A-Fa-f0-9]/g,"0"),a};a.extend(a,{hexToRgb:b,hexToHsb:c,rgbToHsb:d,hsbToRgb:e,rgbToHex:f,hsbToHex:g,fixHsb:h,fixRgb:i,fixHex:j})}(),a.fn.htmlData=function(b,c){var e,c=void 0===c?!0:c,d=new RegExp("^data-"+(b?b+"-":"")+"(.*)","i"),f={};return a.each(this[0].attributes,function(a,b){if(b.specified&&(e=b.name.match(d))&&e[1])if(c){var a,h,g=e[1].split("-"),i=f;
for(max=g.length-1,a=0;max>=a;a++)h=g[a],a==max?i[h]=b.value:(!i[h]&&(i[h]={}),i=i[h])}else f[e[1]]=b.value}),f},a.fn.defineData=function(a,b){return void 0===this.data(a)&&this.data(a,b),this},a.deletes=function(b,c){a.each(c,function(a,c){delete b[c]})},a.fn.disabled=function(a){return void 0===a?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!a).toggleClass("disabled",!!a)},a.fn.enabled=function(a){return void 0===a?!this.disabled():this.disabled(!a)},a.distinct=function(b){var c=a.unique;
if(!(b.length<1)){if(b[0].nodeType)return c.apply(this,arguments);if("object"==typeof b[0]){var d=Math.random(),e=[];return a.each(b,function(a){b[a][d]||(e.push(b[a]),b[a][d]=!0)}),a.each(e,function(a){delete e[a][d]}),e}return a.grep(b,function(c,d){return a.inArray(c,b)===d})}},a.fn.tagName=function(){return(this[0]||{}).tagName},a.create=function(b){return a(document.createElement(b))},a.fn.editable=function(b){return a.isUndefined(b)?"true"===this.prop("contenteditable"):(this.prop("contenteditable",b),b===!1&&this.removeAttr("contenteditable"),this)
},a.download=function(b){return a("<iframe>").hide().appendTo("body").bind("load",function(){a(this).remove()}).attr("src",b)},a.ns=function(a,b){return a.split(" ").join(b+" ")+b},a.getPointerPosition=function(a){return a.type.match("touch")?{x:a.originalEvent.changedTouches[0].pageX,y:a.originalEvent.changedTouches[0].pageY}:{x:a.pageX,y:a.pageY}},function(){var b="___eventable",c=["on","off","fire"],d=function(a){return a.split(".")[0]},e=function(a){this.fnList={},this.events={},this.mode=a};a.extend(e.prototype,{createEvent:function(b){return this.events[b]=a.Callbacks(this.mode)
},on:function(b,c){if(!b||!a.isFunction(c))return this;var e=this.fnList;(e[b]||(e[b]=[])).push(c);var f=d(b);return(this.events[f]||this.createEvent(f)).add(c),this},off:function(b){if(!b)return this;var c=d(b),e=this.events[c];if(!e)return this;var f=function(b){a.each(b,function(a,b){e.remove(b)})};return c!==b?a.each(this.fnList,function(a,b){a.indexOf(c)>-1&&f(b)}):f(this.fnList[b]),this},fire:function(b){var c=this.events[b];if(c)return c.fire.apply(c,a.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()
}}),a.eventable=function(d,f){var g=d[b];return g&&"destroy"===f?(g.destroy(),a.deletes(d,c),delete d[b]):(g=d[b]=new e(f),d.on=a.proxy(g.on,g),d.off=a.proxy(g.off,g),d.fire=a.proxy(g.fire,g),d)}}(),a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)
}};return e.checked(function(){b.check.apply(d),h()},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.locate=function(b){var c="data";return a.each(this[0].attributes,function(a,b){return b.specified&&"$"===b.value?(c=b.name,!1):void 0}),this.find("["+c+"-"+b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")},function(){var b=["overflow","overflow-x","overflow-y"];a.fn.noscroll=function(c){return void 0===c&&(c=!0),this.each(function(){var d=a(this),e=d.data("noscroll");!e&&c&&(e={},a.each(b,function(a,b){e[b]=d.css(b)}),d.data("noscroll",e)),c?a.each(b,function(a,b){d.css(b,"hidden")
}):e&&d.css(e)})}}(),a.fn.visible=function(b){var c=a(this),d=a(window);if(!(c.length<1)){var e=d.scrollTop(),f=e+d.height(),g=c.offset().top,h=g+c.height(),i=b===!0?h:g,j=b===!0?g:h;return f>=j&&i>=e}},a.fn.where=a.fn.filterBy=function(a,b,c){var c=c||"=",d="[data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+c+b+"]";return this.filter(d)},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.selectAll=function(){return this.each(function(){this.select()})},a.fn.unselect=function(){return this.each(function(){var a=this,b=a.value;a.value+=" ",a.value=b})},a.fn.toObject=a.fn.serializeObject=function(){var b={};return a.each(a(this).serializeArray(),function(c,d){b.hasOwnProperty(d.name)?(a.isArray(b[d.name])||(b[d.name]=[b[d.name]]),b[d.name].push(d.value)):b[d.name]=d.value}),b},a.fn.toJSON=a.fn.serializeJSON=function(){return JSON.stringify(a(this).serializeObject())
},a.sanitizeHTML=function(b){return a(a.parseHTML(b,document,!0)).toHTML()},a.toHTML=function(b){return a("<div>").html(b).html()},a.fn.toHTML=function(){return a.toHTML(this.clone())},a.toXHTML=function(a,b){var c=a.innerHTML?String(a.innerHTML):a,d=c.match(/(<.+[^>])/g);if(d)for(var e=0;e<d.length;e+=1){var f,g=d[e],h=/\=[a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+[?\s+|?>]/g;if(d[e]=d[e].replace(/([<|<\/].+?\w+).+[^>]/,function(a){return a}),f=d[e].match(h))for(var i=0,j=f.length;j>i;){var k=/(\=)([a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+)?([\s+|?>])/g,l=function(){var a=Array.prototype.slice.call(arguments);
return'="'+(b?a[2]:a[2].toLowerCase())+'"'+a[3]};d[e]=d[e].replace(f[i],f[i].replace(k,l)),i+=1}c=c.replace(g,d[e])}return c},a.fn.xhtml=function(){return a.IE?a.toXHTML(this[0]):this.html()},a.buildHTML=function(b,c){if(b instanceof a)return b;var d=document;if(window.CloudFlare){var e=a.buildHTML.iframe;if(!e||!e.contentDocument){var e=a.buildHTML.iframe=document.createElement("iframe");e.style.display="none",document.body.appendChild(e)}d=e.contentDocument}var b=a.trim(b),f=[],g=a.buildFragment([b],d,f),h=a.merge([],g.childNodes);
if(!c&&f.length>0){var i=d.createElement("script");i.text="try{"+a.callback(function(){a(f).remove()})+"();}catch(e){}";for(var k,l,j=h.length-1;(k=h[j--])&&("SCRIPT"===k.nodeName?l=h.push(i):1===k.nodeType&&(l=k.appendChild(i)),!l););l||h.push(i),f.push(i)}return a(h)},a.intersects=function(b,c){return a.isArray(c)&&(c={top:c.y,left:c.x,bottom:c.y,right:c.x}),c.left<=b.right&&b.left<=c.right&&c.top<=b.bottom&&b.top<=c.bottom},a.fn.intersectsWith=function(b,c,d,e){var f=this.offset(),g={top:f.top,left:f.left,bottom:f.top+(sourceHeight=this.height()),right:f.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight},h={top:b,left:c,bottom:b+(e||(e=0)),right:c+(d||(d=0)),width:d,height:e};
return a.intersects(g,h)?{reference:g,subject:h}:!1},a.isDeferred=function(b){return b&&a.isFunction(b.always)},a.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.rotateNumber=function(a,b,c,d){return void 0===d&&(d=0),a+=d,b>a?a+=c+1:a>c&&(a-=c+1),a},a.regExpEscape=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},a.remap=function(b,c,d){return a.each(d,function(a,d){b[d]=c[d]}),obj},function(){var b=a.Ajax=function(c){c.autostart=!1;var d=a.ajax(c);
return b.queue.addDeferred(function(a){d.send(),setTimeout(a.resolve,b.interval)}),d};b.queue=a.Threads({threadLimit:1}),b.interval=1200,b.interval=0}(),function(){a.fn.addTransitoryClass=function(a,b){var c=this.addClass(a);return setTimeout(function(){c.removeClass(a)},b||1),this};var b=function(a,b,c){var d=this;return setTimeout(function(){d[a+"Class"](b)},c||50),this};a.fn.addClassAfter=function(a,c){return b.call(this,"add",a,c)},a.fn.removeClassAfter=function(a,c){return b.call(this,"remove",a,c)};var c=function(a,b,c,d){var e=a?"-in":"-out";
return this.addTransitoryClass(b.replace(/ /g,e+" ")+e,c||1e3)[(a?"add":"remove")+"ClassAfter"](b),d&&setTimeout(d,c),this};a.fn.addTransitionClass=function(a,b,d){return c.call(this,!0,a,b,d)},a.fn.removeTransitionClass=function(a,b,d){return c.call(this,!1,a,b,d)}}(),a.trimSeparators=function(b,c,d){var e=c;return b=b.replace(new RegExp("^["+e+"\\s]+|["+e+",\\s]+$","g"),"").replace(new RegExp(e+"["+e+"\\s]*"+e,"g"),e).replace(new RegExp("[\\s]+"+e,"g"),e).replace(new RegExp(e+"[\\s]+","g"),e),d&&(b=a.distinct(b.split(e)).join(e)),b
},a.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")};var f,c={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},d=function(a,b,c){return void 0!==a[b]?a[b]:c&&(a[b]={})},e=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},g=a.String=a.extend(a.String||{},{getObject:f=function(b,f,g){var j,k,l,h=b?b.split(c.dot):[],i=h.length,m=0;if(f=a.isArray(f)?f:[f||window],0==i)return f[0];
for(;j=f[m++];){for(l=0;i-1>l&&e(j);l++)j=d(j,h[l],g);if(e(j)&&(k=d(j,h[l],g),void 0!==k))return g===!1&&delete j[h[l]],k}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){return a=g.classize(a),a.charAt(0).toLowerCase()+a.substr(1)},classize:function(a,b){for(var d=a.split(c.undHash),e=0;e<d.length;e++)d[e]=g.capitalize(d[e]);return d.join(b||"")},niceName:function(a){return g.classize(a," ")},underscore:function(a){return a.replace(c.colons,"/").replace(c.words,"$1_$2").replace(c.lowUp,"$1_$2").replace(c.dash,"_").toLowerCase()
},sub:function(a,b,d){var e=[];return e.push(a.replace(c.replacer,function(a,c){var g=f(a,b,"boolean"==typeof d?!d:d)||f(c,b,"boolean"==typeof d?!d:d),h=typeof g;return"object"!==h&&"function"!==h||null===h?""+g:(e.push(g),"")})),e.length<=1?e[0]:e},_regs:c});return a.extend(a,g),a}),ed.define("lodash",["edjquery"],function(a){function N(a,b,c){for(var d=(c||0)-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function O(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b];"number"!=c&&"string"!=c&&(c="object");
var d="number"==c?b:g+b;return a=a[c]||(a[c]={}),"object"==c?a[d]&&N(a[d],b)>-1?0:-1:a[d]?0:-1}function P(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:g+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a)==this.array.length&&(b[c]=!1):e[d]=!0}}function Q(a){return a.charCodeAt(0)}function R(a,b){var c=a.index,d=b.index;if(a=a.criteria,b=b.criteria,a!==b){if(a>b||"undefined"==typeof a)return 1;if(b>a||"undefined"==typeof b)return-1
}return d>c?-1:1}function S(a){var b=-1,c=a.length,d=V();d["false"]=d["null"]=d["true"]=d.undefined=!1;var e=V();for(e.array=a,e.cache=d,e.push=P;++b<c;)e.push(a[b]);return d.object===!1?(Y(e),null):e}function T(a){return"\\"+J[a]}function U(){return c.pop()||[]}function V(){return d.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function X(a){a.length=0,c.length<i&&c.push(a)
}function Y(a){var b=a.cache;b&&Y(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,d.length<i&&d.push(a)}function Z(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function $(a){function Fb(a){return a&&"object"==typeof a&&!Qb(a)&&mb.call(a,"__wrapped__")?a:new Gb(a)}function Gb(a){this.__wrapped__=a}function Ib(a,b,c,d){function i(){var d=arguments,j=f?this:b;if(e||(a=b[g]),c.length&&(d=d.length?(d=Bb.call(d),h?d.concat(c):c.concat(d)):c),this instanceof i){j=Jb(a.prototype);
var k=a.apply(j,d);return kc(k)?k:j}return a.apply(j,d)}var e=jc(a),f=!c,g=b;if(f){var h=d;c=b}else if(!e){if(!d)throw new bb;b=a}return i}function Jb(a){return kc(a)?sb(a):{}}function Kb(a){return Tb[a]}function Lb(){var d=(d=Fb.indexOf)===Zc?N:d;return d}function Mb(a){return function(c,d,e,f){return"boolean"!=typeof d&&null!=d&&(f=e,e=f&&f[d]===c?b:d,d=!1),null!=e&&(e=Fb.createCallback(e,f)),a(c,d,e,f)}}function Nb(a){var c,d;return a&&qb.call(a)==E&&(c=a.constructor,!jc(c)||c instanceof c)?($b(a,function(a,b){d=b
}),d===b||mb.call(a,d)):!1}function Ob(a){return Ub[a]}function Pb(a){return qb.call(a)==y}function Wb(a,c,d,e,f,g){var h=a;if("boolean"!=typeof c&&null!=c&&(e=d,d=c,c=!1),"function"==typeof d){if(d="undefined"==typeof e?d:Fb.createCallback(d,e,1),h=d(h),"undefined"!=typeof h)return h;h=a}var i=kc(h);if(i){var j=qb.call(h);if(!H[j])return h;var k=Qb(h)}if(!i||!c)return i?k?Z(h):Vb({},h):h;var l=Eb[j];switch(j){case A:case B:return new l(+h);case D:case G:return new l(h);case F:return l(h.source,o.exec(h))}var m=!f;
f||(f=U()),g||(g=U());for(var n=f.length;n--;)if(f[n]==a)return g[n];return h=k?l(h.length):{},k&&(mb.call(a,"index")&&(h.index=a.index),mb.call(a,"input")&&(h.input=a.input)),f.push(a),g.push(h),(k?Ec:_b)(a,function(a,e){h[e]=Wb(a,c,d,b,f,g)}),m&&(X(f),X(g)),h}function Xb(a,b,c){return Wb(a,!0,b,c)}function Zb(a,b,c){var d;return b=Fb.createCallback(b,c),_b(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function ac(a){var b=[];return $b(a,function(a,c){jc(a)&&b.push(c)}),b.sort()}function bc(a,b){return a?mb.call(a,b):!1
}function cc(a){for(var b=-1,c=Sb(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function dc(a){return a===!0||a===!1||qb.call(a)==A}function ec(a){return a?"object"==typeof a&&qb.call(a)==B:!1}function fc(a){return a?1===a.nodeType:!1}function gc(a){var b=!0;if(!a)return b;var c=qb.call(a),d=a.length;return c==z||c==G||c==y||c==E&&"number"==typeof d&&jc(a.splice)?!d:(_b(a,function(){return b=!1}),b)}function hc(a,b,c,d,e,g){var h=c===f;if("function"==typeof c&&!h){c=Fb.createCallback(c,d,2);var i=c(a,b);
if("undefined"!=typeof i)return!!i}if(a===b)return 0!==a||1/a==1/b;var j=typeof a,k=typeof b;if(a===a&&(!a||"function"!=j&&"object"!=j)&&(!b||"function"!=k&&"object"!=k))return!1;if(null==a||null==b)return a===b;var l=qb.call(a),m=qb.call(b);if(l==y&&(l=E),m==y&&(m=E),l!=m)return!1;switch(l){case A:case B:return+a==+b;case D:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case F:case G:return a==ab(b)}var n=l==z;if(!n){if(mb.call(a,"__wrapped__ ")||mb.call(b,"__wrapped__"))return hc(a.__wrapped__||a,b.__wrapped__||b,c,d,e,g);
if(l!=E)return!1;var o=a.constructor,p=b.constructor;if(o!=p&&!(jc(o)&&o instanceof o&&jc(p)&&p instanceof p))return!1}var q=!e;e||(e=U()),g||(g=U());for(var r=e.length;r--;)if(e[r]==a)return g[r]==b;var s=0;if(i=!0,e.push(a),g.push(b),n){if(r=a.length,s=b.length,i=s==a.length,!i&&!h)return i;for(;s--;){var t=r,u=b[s];if(h)for(;t--&&!(i=hc(a[t],u,c,d,e,g)););else if(!(i=hc(a[s],u,c,d,e,g)))break}return i}return $b(b,function(b,f,h){return mb.call(h,f)?(s++,i=mb.call(a,f)&&hc(a[f],b,c,d,e,g)):void 0}),i&&!h&&$b(a,function(a,b,c){return mb.call(c,b)?i=--s>-1:void 0
}),q&&(X(e),X(g)),i}function ic(a){return ub(a)&&!vb(parseFloat(a))}function jc(a){return"function"==typeof a}function kc(a){return!(!a||!I[typeof a])}function lc(a){return nc(a)&&a!=+a}function mc(a){return null===a}function nc(a){return"number"==typeof a||qb.call(a)==D}function pc(a){return a?"object"==typeof a&&qb.call(a)==F:!1}function qc(a){return"string"==typeof a||qb.call(a)==G}function rc(a){return"undefined"==typeof a}function sc(a,b,c){var d=arguments,e=0,g=2;if(!kc(a))return a;if(c===f)var h=d[3],i=d[4],j=d[5];
else{var k=!0;i=U(),j=U(),"number"!=typeof c&&(g=d.length),g>3&&"function"==typeof d[g-2]?h=Fb.createCallback(d[--g-1],d[g--],2):g>2&&"function"==typeof d[g-1]&&(h=d[--g])}for(;++e<g;)(Qb(d[e])?Ec:_b)(d[e],function(b,c){var d,e,g=b,k=a[c];if(b&&((e=Qb(b))||oc(b))){for(var l=i.length;l--;)if(d=i[l]==b){k=j[l];break}if(!d){var m;h&&(g=h(k,b),(m="undefined"!=typeof g)&&(k=g)),m||(k=e?Qb(k)?k:[]:oc(k)?k:{}),i.push(b),j.push(k),m||(k=sc(k,b,f,h,i,j))}}else h&&(g=h(k,b),"undefined"==typeof g&&(g=b)),"undefined"!=typeof g&&(k=g);
a[c]=k});return k&&(X(i),X(j)),a}function tc(a,b,c){var d=Lb(),e="function"==typeof b,f={};if(e)b=Fb.createCallback(b,c);else var g=ib.apply(cb,Bb.call(arguments,1));return $b(a,function(a,c,h){(e?!b(a,c,h):d(g,c)<0)&&(f[c]=a)}),f}function uc(a){for(var b=-1,d=Sb(a),e=d.length,f=c(e);++b<e;){var g=d[b];f[b]=[g,a[g]]}return f}function vc(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=ib.apply(cb,Bb.call(arguments,1)),g=kc(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=Fb.createCallback(b,c),$b(a,function(a,c,e){b(a,c,e)&&(d[c]=a)
});return d}function wc(a,b,c,d){var e=Qb(a);if(b=Fb.createCallback(b,d,4),null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=Jb(g)}return(e?Ec:_b)(a,function(a,d,e){return b(c,a,d,e)}),c}function xc(a){for(var b=-1,d=Sb(a),e=d.length,f=c(e);++b<e;)f[b]=a[d[b]];return f}function yc(a){for(var b=-1,d=ib.apply(cb,Bb.call(arguments,1)),e=d.length,f=c(e);++b<e;)f[b]=a[d[b]];return f}function zc(a,b,c){var d=-1,e=Lb(),f=a?a.length:0,g=!1;return c=(0>c?xb(0,f+c):c)||0,f&&"number"==typeof f?g=(qc(a)?a.indexOf(b,c):e(a,b,c))>-1:_b(a,function(a){return++d>=c?!(g=a===b):void 0
}),g}function Ac(a,b,c){var d={};return b=Fb.createCallback(b,c),Ec(a,function(a,c,e){c=ab(b(a,c,e)),mb.call(d,c)?d[c]++:d[c]=1}),d}function Bc(a,b,c){var d=!0;b=Fb.createCallback(b,c);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else _b(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Cc(a,b,c){var d=[];b=Fb.createCallback(b,c);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else _b(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d
}function Dc(a,b,c){b=Fb.createCallback(b,c);var d=-1,e=a?a.length:0;if("number"!=typeof e){var g;return _b(a,function(a,c,d){return b(a,c,d)?(g=a,!1):void 0}),g}for(;++d<e;){var f=a[d];if(b(f,d,a))return f}}function Ec(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Fb.createCallback(b,c),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else _b(a,b);return a}function Fc(a,b,c){var d={};return b=Fb.createCallback(b,c),Ec(a,function(a,c,e){c=ab(b(a,c,e)),(mb.call(d,c)?d[c]:d[c]=[]).push(a)}),d
}function Gc(a,b){var d=Bb.call(arguments,2),e=-1,f="function"==typeof b,g=a?a.length:0,h=c("number"==typeof g?g:0);return Ec(a,function(a){h[++e]=(f?b:a[b]).apply(a,d)}),h}function Hc(a,b,d){var e=-1,f=a?a.length:0;if(b=Fb.createCallback(b,d),"number"==typeof f)for(var g=c(f);++e<f;)g[e]=b(a[e],e,a);else g=[],_b(a,function(a,c,d){g[++e]=b(a,c,d)});return g}function Ic(a,b,c){var d=-1/0,e=d;if(!b&&Qb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];h>e&&(e=h)}else b=!b&&qc(a)?Q:Fb.createCallback(b,c),Ec(a,function(a,c,f){var g=b(a,c,f);
g>d&&(d=g,e=a)});return e}function Jc(a,b,c){var d=1/0,e=d;if(!b&&Qb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];e>h&&(e=h)}else b=!b&&qc(a)?Q:Fb.createCallback(b,c),Ec(a,function(a,c,f){var g=b(a,c,f);d>g&&(d=g,e=a)});return e}function Kc(a,b){var d=-1,e=a?a.length:0;if("number"==typeof e)for(var f=c(e);++d<e;)f[d]=a[d][b];return f||Hc(a,b)}function Lc(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=Fb.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);
else _b(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Mc(a,b,c,d){var e=a,f=a?a.length:0,g=arguments.length<3;if("number"!=typeof f){var h=Sb(a);f=h.length}return b=Fb.createCallback(b,d,4),Ec(a,function(a,d,i){d=h?h[--f]:--f,c=g?(g=!1,e[d]):b(c,e[d],d,i)}),c}function Nc(a,b,c){return b=Fb.createCallback(b,c),Cc(a,function(a,c,d){return!b(a,c,d)})}function Oc(a){var b=-1,d=a?a.length:0,e=c("number"==typeof d?d:0);return Ec(a,function(a){var c=jb(Ab()*(++b+1));e[b]=e[c],e[c]=a}),e}function Pc(a){var b=a?a.length:0;
return"number"==typeof b?b:Sb(a).length}function Qc(a,b,c){var d;b=Fb.createCallback(b,c);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else _b(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function Rc(a,b,d){var e=-1,f=a?a.length:0,g=c("number"==typeof f?f:0);for(b=Fb.createCallback(b,d),Ec(a,function(a,c,d){var f=g[++e]=V();f.criteria=b(a,c,d),f.index=e,f.value=a}),f=g.length,g.sort(R);f--;){var h=g[f];g[f]=h.value,Y(h)}return g}function Sc(a){return a&&"number"==typeof a.length?Z(a):xc(a)
}function Uc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function Vc(a){var b=-1,c=Lb(),d=a?a.length:0,e=ib.apply(cb,Bb.call(arguments,1)),f=[],g=d>=h&&c===N;if(g){var i=S(e);i?(c=O,e=i):g=!1}for(;++b<d;){var j=a[b];c(e,j)<0&&f.push(j)}return g&&Y(e),f}function Wc(a,b,c){var d=-1,e=a?a.length:0;for(b=Fb.createCallback(b,c);++d<e;)if(b(a[d],d,a))return d;return-1}function Xc(a,b,c){if(a){var d=0,e=a.length;if("number"!=typeof b&&null!=b){var f=-1;for(b=Fb.createCallback(b,c);++f<e&&b(a[f],f,a);)d++
}else if(d=b,null==d||c)return a[0];return Z(a,0,yb(xb(0,d),e))}}function Zc(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?xb(0,d+c):c||0}else if(c){var e=ed(a,b);return a[e]===b?e:-1}return a?N(a,b,c):-1}function $c(a,b,c){if(!a)return[];var d=0,e=a.length;if("number"!=typeof b&&null!=b){var f=e;for(b=Fb.createCallback(b,c);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return Z(a,0,yb(xb(0,e-d),e))}function _c(a){for(var b=arguments,c=b.length,d=-1,e=U(),f=-1,g=Lb(),i=a?a.length:0,j=[],k=U();++d<c;){var l=b[d];
e[d]=g===N&&(l?l.length:0)>=h&&S(d?b[d]:k)}a:for(;++f<i;){var m=e[0];if(l=a[f],(m?O(m,l):g(k,l))<0){for(d=c,(m||k).push(l);--d;)if(m=e[d],(m?O(m,l):g(b[d],l))<0)continue a;j.push(l)}}for(;c--;)m=e[c],m&&Y(m);return X(e),X(k),j}function ad(a,b,c){if(a){var d=0,e=a.length;if("number"!=typeof b&&null!=b){var f=e;for(b=Fb.createCallback(b,c);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a[e-1];return Z(a,xb(0,e-d))}}function bd(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?xb(0,d+c):yb(c,d-1))+1);d--;)if(a[d]===b)return d;
return-1}function cd(a,b,d){a=+a||0,d=+d||1,null==b&&(b=a,a=0);for(var e=-1,f=xb(0,gb((b-a)/d)),g=c(f);++e<f;)g[e]=a,a+=d;return g}function dd(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=Fb.createCallback(b,c);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:xb(0,b);return Z(a,d)}function ed(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?Fb.createCallback(c,d,1):Bd,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function fd(a){return Qb(a)||(arguments[0]=a?Bb.call(a):cb),gd(ib.apply(cb,arguments))
}function hd(a){for(var b=-1,d=a?Ic(Kc(a,"length")):0,e=c(0>d?0:d);++b<d;)e[b]=Kc(a,b);return e}function id(a){return Vc(a,Bb.call(arguments,1))}function jd(a){return a?hd(arguments):[]}function kd(a,b){for(var c=-1,d=a?a.length:0,e={};++c<d;){var f=a[c];b?e[f]=b[c]:e[f[0]]=f[1]}return e}function ld(a,b){return 1>a?b():function(){return--a<1?b.apply(this,arguments):void 0}}function md(a,b){return Hb.fastBind||rb&&arguments.length>2?rb.call.apply(rb,arguments):Ib(a,b,Bb.call(arguments,2))}function nd(a){for(var b=arguments.length>1?ib.apply(cb,Bb.call(arguments,1)):ac(a),c=-1,d=b.length;++c<d;){var e=b[c];
a[e]=md(a[e],a)}return a}function od(a,b){return Ib(a,b,Bb.call(arguments,2),f)}function pd(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function qd(a,b,c){if(null==a)return Bd;var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var e=Sb(a);return function(b){for(var c=e.length,d=!1;c--&&(d=hc(b[e[c]],a[e[c]],f)););return d}}return"undefined"==typeof b||q&&!q.test(kb.call(a))?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)
}:4===c?function(c,d,e,f){return a.call(b,c,d,e,f)}:function(c,d,e){return a.call(b,c,d,e)}}function rd(a,b,c){function n(){hb(k),hb(l),g=0,k=l=null}function o(){var b=m&&(!q||g>1);n(),b&&(j!==!1&&(h=new i),e=a.apply(f,d))}function p(){n(),(m||j!==b)&&(h=new i,e=a.apply(f,d))}var d,e,f,g=0,h=0,j=!1,k=null,l=null,m=!0;if(b=xb(0,b||0),c===!0){var q=!0;m=!1}else kc(c)&&(q=c.leading,j="maxWait"in c&&xb(b,c.maxWait||0),m="trailing"in c?c.trailing:m);return function(){if(d=arguments,f=this,g++,hb(l),j===!1)q&&2>g&&(e=a.apply(f,d));
else{var c=new i;k||q||(h=c);var m=j-(c-h);0>=m?(hb(k),k=null,h=c,e=a.apply(f,d)):k||(k=pb(p,m))}return b!==j&&(l=pb(o,b)),e}}function sd(a){var c=Bb.call(arguments,1);return pb(function(){a.apply(b,c)},1)}function td(a,c){var d=Bb.call(arguments,2);return pb(function(){a.apply(b,d)},c)}function ud(a,b){function c(){var d=c.cache,e=g+(b?b.apply(this,arguments):arguments[0]);return mb.call(d,e)?d[e]:d[e]=a.apply(this,arguments)}return c.cache={},c}function vd(a){var b,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)
}}function wd(a){return Ib(a,Bb.call(arguments,1))}function xd(a){return Ib(a,Bb.call(arguments,1),null,f)}function yd(a,b,c){var d=!0,e=!0;c===!1?d=!1:kc(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),c=V(),c.leading=d,c.maxWait=b,c.trailing=e;var f=rd(a,b,c);return Y(c),f}function zd(a,b){return function(){var c=[a];return nb.apply(c,arguments),b.apply(this,c)}}function Ad(a){return null==a?"":ab(a).replace(u,Kb)}function Bd(a){return a}function Cd(a){Ec(ac(a),function(b){var c=Fb[b]=a[b];
Fb.prototype[b]=function(){var a=this.__wrapped__,b=[a];nb.apply(b,arguments);var d=c.apply(Fb,b);return a&&"object"==typeof a&&a===d?this:new Gb(d)}})}function Dd(){return a._=eb,this}function Fd(a,b){null==a&&null==b&&(b=1),a=+a||0,null==b?(b=a,a=0):b=+b||0;var c=Ab();return a%1||b%1?a+yb(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+jb(c*(b-a+1))}function Gd(a,c){var d=a?a[c]:b;return jc(d)?a[c]():d}function Hd(a,c,d){var e=Fb.templateSettings;a||(a=""),d=Yb({},d,e);var i,f=Yb({},d.imports,e.imports),g=Sb(f),h=xc(f),m=0,o=d.interpolate||t,q="__p += '",r=W((d.escape||t).source+"|"+o.source+"|"+(o===p?n:t).source+"|"+(d.evaluate||t).source+"|$","g");
a.replace(r,function(b,c,d,e,f,g){return d||(d=e),q+=a.slice(m,g).replace(v,T),c&&(q+="' +\n__e("+c+") +\n'"),f&&(i=!0,q+="';\n"+f+";\n__p += '"),d&&(q+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),m=g+b.length,b}),q+="';\n";var s=d.variable,u=s;u||(s="obj",q="with ("+s+") {\n"+q+"\n}\n"),q=(i?q.replace(j,""):q).replace(k,"$1").replace(l,"$1;"),q="function("+s+") {\n"+(u?"":s+" || ("+s+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+q+"return __p\n}";
var w="\n/*\n//@ sourceURL="+(d.sourceURL||"/lodash/template/source["+x++ +"]")+"\n*/";try{var y=J(g,"return "+q+w).apply(b,h)}catch(z){throw z.source=q,z}return c?y(c):(y.source=q,y)}function Id(a,b,d){a=(a=+a)>-1?a:0;var e=-1,f=c(a);for(b=Fb.createCallback(b,d,1);++e<a;)f[e]=b(e);return f}function Jd(a){return null==a?"":ab(a).replace(m,Ob)}function Kd(a){var b=++e;return ab(null==a?"":a)+b}function Ld(a,b){return b(a),a}function Md(){return ab(this.__wrapped__)}function Nd(){return this.__wrapped__}a=a?_.defaults(window.Object(),a,_.pick(window,w)):window;
var c=a.Array,d=a.Boolean,i=a.Date,J=a.Function,K=a.Math,M=a.Number,P=a.Object,W=a.RegExp,ab=a.String,bb=a.TypeError,cb=[],db=P.prototype,eb=a._,fb=W("^"+ab(db.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),gb=K.ceil,hb=a.clearTimeout,ib=cb.concat,jb=K.floor,kb=J.prototype.toString,lb=fb.test(lb=P.getPrototypeOf)&&lb,mb=db.hasOwnProperty,nb=cb.push,ob=a.setImmediate,pb=a.setTimeout,qb=db.toString,rb=fb.test(rb=qb.bind)&&rb,sb=fb.test(sb=P.create)&&sb,tb=fb.test(tb=c.isArray)&&tb,ub=a.isFinite,vb=a.isNaN,wb=fb.test(wb=P.keys)&&wb,xb=K.max,yb=K.min,zb=a.parseInt,Ab=K.random,Bb=cb.slice,Cb=fb.test(a.attachEvent),Db=rb&&!/\n|true/.test(rb+Cb),Eb={};
Eb[z]=c,Eb[A]=d,Eb[B]=i,Eb[C]=J,Eb[E]=P,Eb[D]=M,Eb[F]=W,Eb[G]=ab,Gb.prototype=Fb.prototype;var Hb=Fb.support={};Hb.fastBind=rb&&!Db,Fb.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:p,variable:"",imports:{_:Fb}};var Qb=tb,Rb=function(a){var b,c=a,d=[];if(!c)return d;if(!I[typeof a])return d;for(b in c)mb.call(c,b)&&d.push(b);return d},Sb=wb?function(a){return kc(a)?wb(a):[]}:Rb,Tb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ub=cc(Tb),Vb=function(a,b,c){var d,e=a,f=e;
if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=Fb.createCallback(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&I[typeof e])for(var k=-1,l=I[typeof e]&&Sb(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},Yb=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&I[typeof e])for(var j=-1,k=I[typeof e]&&Sb(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);
return f},$b=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Fb.createCallback(b,c);for(d in e)if(b(e[d],d,a)===!1)return f;return f},_b=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Fb.createCallback(b,c);for(var g=-1,h=I[typeof e]&&Sb(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},oc=function(a){if(!a||qb.call(a)!=E)return!1;var b=a.valueOf,c="function"==typeof b&&(c=lb(b))&&lb(c);
return c?a==c||lb(a)==c:Nb(a)},Tc=Cc,Yc=Mb(function Od(a,b,c){for(var d=-1,e=a?a.length:0,f=[];++d<e;){var g=a[d];c&&(g=c(g,d,a)),Qb(g)?nb.apply(f,b?g:Od(g)):f.push(g)}return f}),gd=Mb(function(a,b,c){var d=-1,e=Lb(),f=a?a.length:0,g=[],i=!b&&f>=h&&e===N,j=c||i?U():g;if(i){var k=S(j);k?(e=O,j=k):(i=!1,j=c?j:(X(j),g))}for(;++d<f;){var l=a[d],m=c?c(l,d,a):l;(b?!d||j[j.length-1]!==m:e(j,m)<0)&&((c||i)&&j.push(m),g.push(l))}return i?(X(j.array),Y(j)):c&&X(j),g});Db&&L&&"function"==typeof ob&&(sd=md(ob,a));var Ed=8==zb(r+"08")?zb:function(a,b){return zb(qc(a)?a.replace(s,""):a,b||0)
};return Fb.after=ld,Fb.assign=Vb,Fb.at=yc,Fb.bind=md,Fb.bindAll=nd,Fb.bindKey=od,Fb.compact=Uc,Fb.compose=pd,Fb.countBy=Ac,Fb.createCallback=qd,Fb.debounce=rd,Fb.defaults=Yb,Fb.defer=sd,Fb.delay=td,Fb.difference=Vc,Fb.filter=Cc,Fb.flatten=Yc,Fb.forEach=Ec,Fb.forIn=$b,Fb.forOwn=_b,Fb.functions=ac,Fb.groupBy=Fc,Fb.initial=$c,Fb.intersection=_c,Fb.invert=cc,Fb.invoke=Gc,Fb.keys=Sb,Fb.map=Hc,Fb.max=Ic,Fb.memoize=ud,Fb.merge=sc,Fb.min=Jc,Fb.omit=tc,Fb.once=vd,Fb.pairs=uc,Fb.partial=wd,Fb.partialRight=xd,Fb.pick=vc,Fb.pluck=Kc,Fb.range=cd,Fb.reject=Nc,Fb.rest=dd,Fb.shuffle=Oc,Fb.sortBy=Rc,Fb.tap=Ld,Fb.throttle=yd,Fb.times=Id,Fb.toArray=Sc,Fb.transform=wc,Fb.union=fd,Fb.uniq=gd,Fb.unzip=hd,Fb.values=xc,Fb.where=Tc,Fb.without=id,Fb.wrap=zd,Fb.zip=jd,Fb.zipObject=kd,Fb.collect=Hc,Fb.drop=dd,Fb.each=Ec,Fb.extend=Vb,Fb.methods=ac,Fb.object=kd,Fb.select=Cc,Fb.tail=dd,Fb.unique=gd,Cd(Fb),Fb.chain=Fb,Fb.prototype.chain=function(){return this
},Fb.clone=Wb,Fb.cloneDeep=Xb,Fb.contains=zc,Fb.escape=Ad,Fb.every=Bc,Fb.find=Dc,Fb.findIndex=Wc,Fb.findKey=Zb,Fb.has=bc,Fb.identity=Bd,Fb.indexOf=Zc,Fb.isArguments=Pb,Fb.isArray=Qb,Fb.isBoolean=dc,Fb.isDate=ec,Fb.isElement=fc,Fb.isEmpty=gc,Fb.isEqual=hc,Fb.isFinite=ic,Fb.isFunction=jc,Fb.isNaN=lc,Fb.isNull=mc,Fb.isNumber=nc,Fb.isObject=kc,Fb.isPlainObject=oc,Fb.isRegExp=pc,Fb.isString=qc,Fb.isUndefined=rc,Fb.lastIndexOf=bd,Fb.mixin=Cd,Fb.noConflict=Dd,Fb.parseInt=Ed,Fb.random=Fd,Fb.reduce=Lc,Fb.reduceRight=Mc,Fb.result=Gd,Fb.runInContext=$,Fb.size=Pc,Fb.some=Qc,Fb.sortedIndex=ed,Fb.template=Hd,Fb.unescape=Jd,Fb.uniqueId=Kd,Fb.all=Bc,Fb.any=Qc,Fb.detect=Dc,Fb.findWhere=Dc,Fb.foldl=Lc,Fb.foldr=Mc,Fb.include=zc,Fb.inject=Lc,_b(Fb,function(a,b){Fb.prototype[b]||(Fb.prototype[b]=function(){var b=[this.__wrapped__];
return nb.apply(b,arguments),a.apply(Fb,b)})}),Fb.first=Xc,Fb.last=ad,Fb.take=Xc,Fb.head=Xc,_b(Fb,function(a,b){Fb.prototype[b]||(Fb.prototype[b]=function(b,c){var d=a(this.__wrapped__,b,c);return null==b||c&&"function"!=typeof b?d:new Gb(d)})}),Fb.VERSION="1.3.1",Fb.prototype.toString=Md,Fb.prototype.value=Nd,Fb.prototype.valueOf=Nd,Ec(["join","pop","shift"],function(a){var b=cb[a];Fb.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}}),Ec(["push","reverse","sort","unshift"],function(a){var b=cb[a];
Fb.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Ec(["concat","slice","splice"],function(a){var b=cb[a];Fb.prototype[a]=function(){return new Gb(b.apply(this.__wrapped__,arguments))}}),Fb}var b,c=[],d=[],e=0,f={},g=+new Date+"",h=75,i=40,j=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,l=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m=/&(?:amp|lt|gt|quot|#39);/g,n=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,o=/\w*$/,p=/<%=([\s\S]+?)%>/g,q=(q=/\bthis\b/)&&q.test($)&&q,r=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",s=RegExp("^["+r+"]*0+(?=.$)"),t=/($^)/,u=/[&<>"']/g,v=/['\n\r\t\u2028\u2029\\]/g,w=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],x=0,y="[object Arguments]",z="[object Array]",A="[object Boolean]",B="[object Date]",C="[object Function]",D="[object Number]",E="[object Object]",F="[object RegExp]",G="[object String]",H={};
H[C]=!1,H[y]=H[z]=H[A]=H[B]=H[D]=H[E]=H[F]=H[G]=!0;var I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},K=I[typeof exports]&&exports,L=I[typeof module]&&module&&module.exports==K&&module,M=I[typeof global]&&global;!M||M.global!==M&&M.window!==M||(window=M);var _=a._=$();return a.each(_,function(b,c){Object.hasOwnProperty.call(_,b)&&!/VERSION/.test(name)&&(a[b]||(a[b]=c))}),_}),ed.define("markitup",["edjquery"],function($){return function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,ctrlKey,shiftKey,altKey;
return ctrlKey=shiftKey=altKey=!1,"string"==typeof settings&&(method=settings,params=extraSettings),options={id:"",nameSpace:"",root:"",previewHandler:!1,previewInWindow:"",previewInElement:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",resizeHandle:!1,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,$.markItUp.sets[(extraSettings||settings||{}).set],extraSettings),options.root||$("script").each(function(a,b){miuScript=$(b).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),null!==miuScript&&(options.root=miuScript[1])
}),this.each(function(){function localize(a,b){return b?a.replace(/("|')~\//g,"$1"+options.root):a.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),$$.wrap('<div class="markItUpExpanding"></div>'),options.resizeHandle===!0&&$.browser.safari!==!0&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(a){var d,e,b=$$.height(),c=a.clientY;
d=function(a){return $$.css("height",Math.max(20,a.clientY+b-c)+"px"),!1},e=function(){return $("html").unbind("mousemove.markItUp",d).unbind("mouseup.markItUp",e),!1},$("html").bind("mousemove.markItUp",d).bind("mouseup.markItUp",e)}),footer.append(resizeHandle)),$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed),$$.bind("insertion.markItUp",function(a,b){b.target!==!1&&get(),textarea===$.markItUp.focused&&markup(b)}),$$.bind("focus.markItUp",function(){$.markItUp.focused=this}),options.previewInElement&&refreshPreview()
}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;if(title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"",button.separator)li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);else{for(i++,j=levels.length-1;j>=0;j--)t+=levels[j]+"-";li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return!1
}).bind("click.markItUp",function(){return!1}).bind("focusin.markItUp",function(){$$.focus()}).bind("mouseup",function(){return button.call&&eval(button.call)(),setTimeout(function(){markup(button)},1),!1}).bind("mouseenter.markItUp",function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})}).bind("mouseleave.markItUp",function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul
}function magicMarkups(a){return a?(a=a.toString(),a=a.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(a,b){var c=b.split("|!|");return altKey===!0?void 0!==c[1]?c[1]:c[0]:void 0===c[1]?"":c[0]}),a=a.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(a,b){var c=b.split(":!:");return abort===!0?!1:(value=prompt(c[0],c[1]?c[1]:""),null===value&&(abort=!0),value)})):""}function prepare(a){return $.isFunction(a)&&(a=a(hash)),magicMarkups(a)}function build(a){var b=prepare(clicked.openWith),c=prepare(clicked.placeHolder),d=prepare(clicked.replaceWith),e=prepare(clicked.closeWith),f=prepare(clicked.openBlockWith),g=prepare(clicked.closeBlockWith),h=clicked.multiline;
if(""!==d)block=b+d+e;else if(""===selection&&""!==c)block=b+c+e;else{a=a||selection;var i=[a],j=[];h===!0&&(i=a.split(/\r?\n/));for(var k=0;k<i.length;k++){line=i[k];var l;(l=line.match(/ *$/))?j.push(b+line.replace(/ *$/g,"")+e+l):j.push(b+line+e)}block=j.join("\n")}return block=f+block+g,{block:block,openWith:b,replaceWith:d,placeHolder:c,closeWith:e}}function markup(a){var b,c,d,e;if(hash=clicked=a,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(ctrlKey===!0&&shiftKey===!0||a.multiline===!0)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),ctrlKey===!0&&shiftKey===!0){for(lines=selection.split(/\r?\n/),c=0,d=lines.length,e=0;d>e;e++)""!==$.trim(lines[e])?($.extend(hash,{line:++c,selection:lines[e]}),lines[e]=build(lines[e]).block):lines[e]="";
string={block:lines.join("\n")},start=caretPosition,b=string.block.length+($.browser.opera?d-1:0)}else ctrlKey===!0?(string=build(selection),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,b-=string.block.match(/ $/)?1:0,b-=fixIeBug(string.block)):shiftKey===!0?(string=build(selection),start=caretPosition,b=string.block.length,b-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,b=0,start-=fixIeBug(string.block));
""===selection&&""===string.replaceWith&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&abort===!1?(insert(string.block),set(start,b)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(ctrlKey===!0&&shiftKey===!0||a.multiline===!0)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1
}function fixOperaBug(a){return $.browser.opera?a.length-a.replace(/\n*/g,"").length:0}function fixIeBug(a){return $.browser.msie?a.length-a.replace(/\r*/g,"").length:0}function insert(a){if(document.selection){var b=document.selection.createRange();b.text=a}else textarea.value=textarea.value.substring(0,caretPosition)+a+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}function set(a,b){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&0==b)return!1;range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",a),range.moveEnd("character",b),range.select()
}else textarea.setSelectionRange&&textarea.setSelectionRange(a,a+b);textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection)if(selection=document.selection.createRange().text,$.browser.msie){var a=document.selection.createRange(),b=a.duplicate();for(b.moveToElementText(textarea),caretPosition=-1;b.inRange(a);)b.moveStart("character"),caretPosition++}else caretPosition=textarea.selectionStart;else caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd);
return selection}function preview(){"function"==typeof options.previewHandler?previewWindow=!0:options.previewInElement?previewWindow=$(options.previewInElement):!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload(function(){previewWindow.close()})):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):altKey===!0&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()
}function refreshPreview(){renderPreview()}function renderPreview(){if(options.previewHandler&&"function"==typeof options.previewHandler)options.previewHandler($$.val());else if(options.previewParser&&"function"==typeof options.previewParser){var b=options.previewParser($$.val());writeInPreview(localize(b,1))}else""!==options.previewParserPath?$.ajax({type:"POST",dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(a){writeInPreview(localize(a,1))
}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(a){writeInPreview(localize(a,1).replace(/<!-- content -->/g,$$.val()))}});return!1}function writeInPreview(a){if(options.previewInElement)$(options.previewInElement).html(a);else if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(b){sp=0}previewWindow.document.open(),previewWindow.document.write(a),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp
}}function keyPressed(a){if(shiftKey=a.shiftKey,altKey=a.altKey,ctrlKey=a.altKey&&a.ctrlKey?!1:a.ctrlKey||a.metaKey,"keydown"===a.type){if(ctrlKey===!0&&(li=$('a[accesskey="'+(13==a.keyCode?"\\n":String.fromCharCode(a.keyCode))+'"]',header).parent("li"),0!==li.length))return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mouseup")},1),!1;if(13===a.keyCode||10===a.keyCode)return ctrlKey===!0?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):shiftKey===!0?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault);
if(9===a.keyCode)return 1==shiftKey||1==ctrlKey||1==altKey?!1:-1!==caretOffset?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault)}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor"),$$.parents("div.markItUp").parent("div").replaceWith($$),$$.data("markItUp",null)}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;if($$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),method)switch(method){case"remove":remove();
break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}else init()})},$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove")})};var sets;"object"==typeof $.markItUp&&(sets=$.markItUp.sets),$.markItUp=function(a){var b={target:!1};return $.extend(b,a),b.target?$(b.target).each(function(){$(this).focus(),$(this).trigger("insertion",[b])}):($("textarea").trigger("insertion",[b]),void 0)},$.markItUp.sets={},sets&&$.extend($.markItUp.sets,sets)
}($),$}),ed.define("selectize",["edjquery","site/vendors/sifter","site/vendors/microplugin"],function(a,b,c){"use strict";var d=function(a,b){if("string"!=typeof b||b.length){var c="string"==typeof b?new RegExp(b,"i"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(e>=0&&a.data.length>0){var f=a.data.match(c),g=document.createElement("span");g.className="highlight";var h=a.splitText(e),j=(h.splitText(f[0].length),h.cloneNode(!0));g.appendChild(j),h.parentNode.replaceChild(g,h),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var k=0;k<a.childNodes.length;++k)k+=d(a.childNodes[k]);
return b};return a.each(function(){d(this)})}},e=function(){};e.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){var c=arguments.length;return 0===c?delete this._events:1===c?delete this._events[a]:(this._events=this._events||{},a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1),void 0)},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))
}},e.mixin=function(a){for(var b=["on","off","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),g=65,i=13,j=27,k=37,l=38,m=80,n=39,o=40,p=78,q=8,r=46,s=16,t=f?91:17,u=f?18:17,v=9,w=1,x=2,y=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,z=function(a){return"undefined"!=typeof a},A=function(a){return"undefined"==typeof a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""},B=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")
},C=function(a){return(a+"").replace(/\$/g,"$$$$")},D={};D.before=function(a,b,c){var d=a[b];a[b]=function(){return c.apply(a,arguments),d.apply(a,arguments)}},D.after=function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);return c.apply(a,arguments),b}};var E=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},F=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){a.apply(d,e)},b)}},G=function(a,b,c){var d,e=a.trigger,f={};
a.trigger=function(){var c=arguments[0];return-1===b.indexOf(c)?e.apply(a,arguments):(f[c]=arguments,void 0)},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},H=function(a,b,c,d){a.on(b,c,function(b){for(var c=b.target;c&&c.parentNode!==a[0];)c=c.parentNode;return b.currentTarget=c,d.apply(this,[b])})},I=function(a){var b={};if("selectionStart"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;
c.moveStart("character",-a.value.length),b.start=c.text.length-d,b.length=d}return b},J=function(a,b,c){var d,e,f={};if(c)for(d=0,e=c.length;e>d;d++)f[c[d]]=a.css(c[d]);else f=a.css();b.css(f)},K=function(b,c){if(!b)return 0;var d=a("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(b).appendTo("body");J(c,d,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var e=d.width();return d.remove(),e},L=function(a){var b=null,c=function(c,d){var e,f,g,h,i,j,k,l;
c=c||window.event||{},d=d||{},c.metaKey||c.altKey||(d.force||a.data("grow")!==!1)&&(e=a.val(),c.type&&"keydown"===c.type.toLowerCase()&&(f=c.keyCode,g=f>=97&&122>=f||f>=65&&90>=f||f>=48&&57>=f||32===f,f===r||f===q?(l=I(a[0]),l.length?e=e.substring(0,l.start)+e.substring(l.start+l.length):f===q&&l.start?e=e.substring(0,l.start-1)+e.substring(l.start+1):f===r&&"undefined"!=typeof l.start&&(e=e.substring(0,l.start)+e.substring(l.start+1))):g&&(j=c.shiftKey,k=String.fromCharCode(c.keyCode),k=j?k.toUpperCase():k.toLowerCase(),e+=k)),h=a.attr("placeholder"),!e&&h&&(e=h),i=K(e,a)+4,i!==b&&(b=i,a.width(i),a.triggerHandler("resize")))
};a.on("keydown keyup update blur",c),c()},M=function(c,d){var f,g,h,i,j=this;i=c[0],i.selectize=j;var k=window.getComputedStyle&&window.getComputedStyle(i,null);if(h=k?k.getPropertyValue("direction"):i.currentStyle&&i.currentStyle.direction,h=h||c.parents("[dir]:first").attr("dir")||"",a.extend(j,{order:0,settings:d,$input:c,tabIndex:c.attr("tabindex")||"",tagType:"select"===i.tagName.toLowerCase()?w:x,rtl:/rtl/i.test(h),eventNS:".selectize"+ ++M.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:c.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?j.onSearchChange:F(j.onSearchChange,d.loadThrottle)}),j.sifter=new b(this.options,{diacritics:d.diacritics}),j.settings.options){for(f=0,g=j.settings.options.length;g>f;f++)j.registerOption(j.settings.options[f]);
delete j.settings.options}if(j.settings.optgroups){for(f=0,g=j.settings.optgroups.length;g>f;f++)j.registerOptionGroup(j.settings.optgroups[f]);delete j.settings.optgroups}j.settings.mode=j.settings.mode||(1===j.settings.maxItems?"single":"multi"),"boolean"!=typeof j.settings.hideSelected&&(j.settings.hideSelected="multi"===j.settings.mode),j.initializePlugins(j.settings.plugins),j.setupCallbacks(),j.setupTemplates(),j.setup()};return e.mixin(M),c.mixin(M),a.extend(M.prototype,{setup:function(){var i,j,k,l,m,n,o,r,v,b=this,c=b.settings,d=b.eventNS,e=a(window),g=a(document),h=b.$input;
if(o=b.settings.mode,r=h.attr("class")||"",i=a("<div>").addClass(c.wrapperClass).addClass(r).addClass(o),j=a("<div>").addClass(c.inputClass).addClass("items").appendTo(i),k=a('<input type="text" autocomplete="off" />').appendTo(j).attr("tabindex",h.is(":disabled")?"-1":b.tabIndex),n=a(c.dropdownParent||i),l=a("<div>").addClass(c.dropdownClass).addClass(o).hide().appendTo(n),m=a("<div>").addClass(c.dropdownContentClass).appendTo(l),b.settings.copyClassesToDropdown&&l.addClass(r),i.css({width:h[0].style.width}),b.plugins.names.length&&(v="plugin-"+b.plugins.names.join(" plugin-"),i.addClass(v),l.addClass(v)),(null===c.maxItems||c.maxItems>1)&&b.tagType===w&&h.attr("multiple","multiple"),b.settings.placeholder&&k.attr("placeholder",c.placeholder),!b.settings.splitOn&&b.settings.delimiter){var x=b.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");
b.settings.splitOn=new RegExp("\\s*"+x+"+\\s*")}h.attr("autocorrect")&&k.attr("autocorrect",h.attr("autocorrect")),h.attr("autocapitalize")&&k.attr("autocapitalize",h.attr("autocapitalize")),b.$wrapper=i,b.$control=j,b.$control_input=k,b.$dropdown=l,b.$dropdown_content=m,l.on("mouseenter","[data-selectable]",function(){return b.onOptionHover.apply(b,arguments)}),l.on("mousedown click","[data-selectable]",function(){return b.onOptionSelect.apply(b,arguments)}),H(j,"mousedown","*:not(input)",function(){return b.onItemSelect.apply(b,arguments)
}),L(k),j.on({mousedown:function(){return b.onMouseDown.apply(b,arguments)},click:function(){return b.onClick.apply(b,arguments)}}),k.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return b.onKeyDown.apply(b,arguments)},keyup:function(){return b.onKeyUp.apply(b,arguments)},keypress:function(){return b.onKeyPress.apply(b,arguments)},resize:function(){b.positionDropdown.apply(b,[])},blur:function(){return b.onBlur.apply(b,arguments)},focus:function(){return b.ignoreBlur=!1,b.onFocus.apply(b,arguments)
},paste:function(){return b.onPaste.apply(b,arguments)}}),g.on("keydown"+d,function(a){b.isCmdDown=a[f?"metaKey":"ctrlKey"],b.isCtrlDown=a[f?"altKey":"ctrlKey"],b.isShiftDown=a.shiftKey}),g.on("keyup"+d,function(a){a.keyCode===u&&(b.isCtrlDown=!1),a.keyCode===s&&(b.isShiftDown=!1),a.keyCode===t&&(b.isCmdDown=!1)}),g.on("mousedown"+d,function(a){if(b.isFocused){if(a.target===b.$dropdown[0]||a.target.parentNode===b.$dropdown[0])return!1;b.$control.has(a.target).length||a.target===b.$control[0]||b.blur(a.target)
}}),e.on(["scroll"+d,"resize"+d].join(" "),function(){b.isOpen&&b.positionDropdown.apply(b,arguments)}),e.on("mousemove"+d,function(){b.ignoreHover=!1}),this.revertSettings={$children:h.children().detach(),tabindex:h.attr("tabindex")},h.attr("tabindex",-1).hide().after(b.$wrapper),a.isArray(c.items)&&(b.setValue(c.items),delete c.items),y&&h.on("invalid"+d,function(a){a.preventDefault(),b.isInvalid=!0,b.refreshState()}),b.updateOriginalInput(),b.refreshItems(),b.refreshState(),b.updatePlaceholder(),b.isSetup=!0,h.is(":disabled")&&b.disable(),b.on("change",this.onChange),h.data("selectize",b),h.addClass("selectized"),b.trigger("initialize"),c.preload===!0&&b.onSearchChange("")
},setupTemplates:function(){var b=this,c=b.settings.labelField,d=b.settings.optgroupLabelField,e={optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[d])+"</div>"},option:function(a,b){return'<div class="option">'+b(a[c])+"</div>"},item:function(a,b){return'<div class="item">'+b(a[c])+"</div>"},option_create:function(a,b){return'<div class="create">Add <strong>'+b(a.input)+"</strong>&hellip;</div>"}};b.settings.render=a.extend({},e,b.settings.render)
},setupCallbacks:function(){var a,b,c={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(a in c)c.hasOwnProperty(a)&&(b=this.settings[c[a]],b&&this.on(a,b))
},onClick:function(a){var b=this;b.isFocused||(b.focus(),a.preventDefault())},onMouseDown:function(b){{var c=this,d=b.isDefaultPrevented();a(b.target)}if(c.isFocused){if(b.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(b){var c=this;c.isFull()||c.isInputHidden||c.isLocked?b.preventDefault():c.settings.splitOn&&setTimeout(function(){for(var b=a.trim(c.$control_input.val()||"").split(c.settings.splitOn),d=0,e=b.length;e>d;d++)c.createItem(b[d])
},0)},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);return this.settings.create&&"multi"===this.settings.mode&&b===this.settings.delimiter?(this.createItem(),a.preventDefault(),!1):void 0},onKeyDown:function(a){var c=(a.target===this.$control_input[0],this);if(c.isLocked)return a.keyCode!==v&&a.preventDefault(),void 0;switch(a.keyCode){case g:if(c.isCmdDown)return c.selectAll(),void 0;break;case j:return c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.close()),void 0;
case p:if(!a.ctrlKey||a.altKey)break;case o:if(!c.isOpen&&c.hasOptions)c.open();else if(c.$activeOption){c.ignoreHover=!0;var d=c.getAdjacentOption(c.$activeOption,1);d.length&&c.setActiveOption(d,!0,!0)}return a.preventDefault(),void 0;case m:if(!a.ctrlKey||a.altKey)break;case l:if(c.$activeOption){c.ignoreHover=!0;var e=c.getAdjacentOption(c.$activeOption,-1);e.length&&c.setActiveOption(e,!0,!0)}return a.preventDefault(),void 0;case i:return c.isOpen&&c.$activeOption&&(c.onOptionSelect({currentTarget:c.$activeOption}),a.preventDefault()),void 0;
case k:return c.advanceSelection(-1,a),void 0;case n:return c.advanceSelection(1,a),void 0;case v:return c.settings.selectOnTab&&c.isOpen&&c.$activeOption&&(c.onOptionSelect({currentTarget:c.$activeOption}),c.isFull()||a.preventDefault()),c.settings.create&&c.createItem()&&a.preventDefault(),void 0;case q:case r:return c.deleteSelection(a),void 0}return!c.isFull()&&!c.isInputHidden||(f?a.metaKey:a.ctrlKey)?void 0:(a.preventDefault(),void 0)},onKeyUp:function(a){var b=this;if(b.isLocked)return a&&a.preventDefault();
var c=b.$control_input.val()||"";b.lastValue!==c&&(b.lastValue=c,b.onSearchChange(c),b.refreshOptions(),b.trigger("type",c))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&(b.loadedSearches.hasOwnProperty(a)||(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])})))},onFocus:function(a){var b=this,c=b.isFocused;return b.isDisabled?(b.blur(),a&&a.preventDefault(),!1):(b.ignoreFocus||(b.isFocused=!0,"focus"===b.settings.preload&&b.onSearchChange(""),c||b.trigger("focus"),b.$activeItems.length||(b.showInput(),b.setActiveItem(null),b.refreshOptions(!!b.settings.openOnFocus)),b.refreshState()),void 0)
},onBlur:function(a,b){var c=this;if(c.isFocused&&(c.isFocused=!1,!c.ignoreFocus)){if(!c.ignoreBlur&&document.activeElement===c.$dropdown_content[0])return c.ignoreBlur=!0,c.onFocus(a),void 0;var d=function(){c.close(),c.setTextboxValue(""),c.setActiveItem(null),c.setActiveOption(null),c.setCaret(c.items.length),c.refreshState(),(b||document.body).focus(),c.ignoreFocus=!1,c.trigger("blur")};c.ignoreFocus=!0,c.settings.create&&c.settings.createOnBlur?c.createItem(null,!1,d):d()}},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)
},onOptionSelect:function(b){var c,d,f=this;b.preventDefault&&(b.preventDefault(),b.stopPropagation()),d=a(b.currentTarget),d.hasClass("create")?f.createItem(null,function(){f.settings.closeAfterSelect&&f.close()}):(c=d.attr("data-value"),"undefined"!=typeof c&&(f.lastQuery=null,f.setTextboxValue(""),f.addItem(c),f.settings.closeAfterSelect?f.close():!f.settings.hideSelected&&b.type&&/mouse/.test(b.type)&&f.setActiveOption(f.getOption(c))))},onItemSelect:function(a){var b=this;b.isLocked||"multi"===b.settings.mode&&(a.preventDefault(),b.setActiveItem(a.currentTarget,a))
},load:function(a){var b=this,c=b.$wrapper.addClass(b.settings.loadingClass);b.loading++,a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0),a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden)),b.loading||c.removeClass(b.settings.loadingClass),b.trigger("load",a)}])},setTextboxValue:function(a){var b=this.$control_input,c=b.val()!==a;c&&(b.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)
},setValue:function(a,b){var c=b?[]:["change"];G(this,c,function(){this.clear(b),this.addItems(a,b)})},setActiveItem:function(b,c){var e,f,g,h,i,j,k,l,d=this;if("single"!==d.settings.mode){if(b=a(b),!b.length)return a(d.$activeItems).removeClass("active"),d.$activeItems=[],d.isFocused&&d.showInput(),void 0;if(e=c&&c.type.toLowerCase(),"mousedown"===e&&d.isShiftDown&&d.$activeItems.length){for(l=d.$control.children(".active:last"),h=Array.prototype.indexOf.apply(d.$control[0].childNodes,[l[0]]),i=Array.prototype.indexOf.apply(d.$control[0].childNodes,[b[0]]),h>i&&(k=h,h=i,i=k),f=h;i>=f;f++)j=d.$control[0].childNodes[f],-1===d.$activeItems.indexOf(j)&&(a(j).addClass("active"),d.$activeItems.push(j));
c.preventDefault()}else"mousedown"===e&&d.isCtrlDown||"keydown"===e&&this.isShiftDown?b.hasClass("active")?(g=d.$activeItems.indexOf(b[0]),d.$activeItems.splice(g,1),b.removeClass("active")):d.$activeItems.push(b.addClass("active")[0]):(a(d.$activeItems).removeClass("active"),d.$activeItems=[b.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(b,c,d){var e,f,g,h,i,j=this;j.$activeOption&&j.$activeOption.removeClass("active"),j.$activeOption=null,b=a(b),b.length&&(j.$activeOption=b.addClass("active"),(c||!z(c))&&(e=j.$dropdown_content.height(),f=j.$activeOption.outerHeight(!0),c=j.$dropdown_content.scrollTop()||0,g=j.$activeOption.offset().top-j.$dropdown_content.offset().top+c,h=g,i=g-e+f,g+f>e+c?j.$dropdown_content.stop().animate({scrollTop:i},d?j.settings.scrollDuration:0):c>g&&j.$dropdown_content.stop().animate({scrollTop:h},d?j.settings.scrollDuration:0)))
},selectAll:function(){var a=this;"single"!==a.settings.mode&&(a.$activeItems=Array.prototype.slice.apply(a.$control.children(":not(input)").addClass("active")),a.$activeItems.length&&(a.hideInput(),a.close()),a.focus())},hideInput:function(){var a=this;a.setTextboxValue(""),a.$control_input.css({opacity:0,position:"absolute",left:a.rtl?1e4:-1e4}),a.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1,a.onFocus()
},0))},blur:function(a){this.$control_input[0].blur(),this.onBlur(null,a)},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=this.settings,b=a.sortField;return"string"==typeof b&&(b=[{field:b}]),{fields:a.searchField,conjunction:a.searchConjunction,sort:b}},search:function(b){var c,f,g,h=this,i=h.settings,j=this.getSearchOptions();if(i.score&&(g=h.settings.score.apply(this,[b]),"function"!=typeof g))throw new Error('Selectize "score" setting must be a function that returns a function');
if(b!==h.lastQuery?(h.lastQuery=b,f=h.sifter.search(b,a.extend(j,{score:g})),h.currentResults=f):f=a.extend(!0,{},h.currentResults),i.hideSelected)for(c=f.items.length-1;c>=0;c--)-1!==h.items.indexOf(A(f.items[c].id))&&f.items.splice(c,1);return f},refreshOptions:function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;"undefined"==typeof b&&(b=!0);var t=this,u=a.trim(t.$control_input.val()),v=t.search(u),w=t.$dropdown_content,x=t.$activeOption&&A(t.$activeOption.attr("data-value"));for(g=v.items.length,"number"==typeof t.settings.maxOptions&&(g=Math.min(g,t.settings.maxOptions)),h={},i=[],c=0;g>c;c++)for(j=t.options[v.items[c].id],k=t.render("option",j),l=j[t.settings.optgroupField]||"",m=a.isArray(l)?l:[l],e=0,f=m&&m.length;f>e;e++)l=m[e],t.optgroups.hasOwnProperty(l)||(l=""),h.hasOwnProperty(l)||(h[l]=[],i.push(l)),h[l].push(k);
for(this.settings.lockOptgroupOrder&&i.sort(function(a,b){var c=t.optgroups[a].$order||0,d=t.optgroups[b].$order||0;return c-d}),n=[],c=0,g=i.length;g>c;c++)l=i[c],t.optgroups.hasOwnProperty(l)&&h[l].length?(o=t.render("optgroup_header",t.optgroups[l])||"",o+=h[l].join(""),n.push(t.render("optgroup",a.extend({},t.optgroups[l],{html:o})))):n.push(h[l].join(""));if(w.html(n.join("")),t.settings.highlight&&v.query.length&&v.tokens.length)for(c=0,g=v.tokens.length;g>c;c++)d(w,v.tokens[c].regex);if(!t.settings.hideSelected)for(c=0,g=t.items.length;g>c;c++)t.getOption(t.items[c]).addClass("selected");
p=t.canCreate(u),p&&(w.prepend(t.render("option_create",{input:u})),s=a(w[0].childNodes[0])),t.hasOptions=v.items.length>0||p,t.hasOptions?(v.items.length>0?(r=x&&t.getOption(x),r&&r.length?q=r:"single"===t.settings.mode&&t.items.length&&(q=t.getOption(t.items[0])),q&&q.length||(q=s&&!t.settings.addPrecedence?t.getAdjacentOption(s,1):w.find("[data-selectable]:first"))):q=s,t.setActiveOption(q),b&&!t.isOpen&&t.open()):(t.setActiveOption(null),b&&t.isOpen&&t.close())},addOption:function(b){var c,d,e,f=this;if(a.isArray(b))for(c=0,d=b.length;d>c;c++)f.addOption(b[c]);
else(e=f.registerOption(b))&&(f.userOptions[e]=!0,f.lastQuery=null,f.trigger("option_add",e,b))},registerOption:function(a){var b=A(a[this.settings.valueField]);return!b||this.options.hasOwnProperty(b)?!1:(a.$order=a.$order||++this.order,this.options[b]=a,b)},registerOptionGroup:function(a){var b=A(a[this.settings.optgroupValueField]);return b?(a.$order=a.$order||++this.order,this.optgroups[b]=a,b):!1},addOptionGroup:function(a,b){b[this.settings.optgroupValueField]=a,(a=this.registerOptionGroup(b))&&this.trigger("optgroup_add",a,b)
},removeOptionGroup:function(a){this.optgroups.hasOwnProperty(a)&&(delete this.optgroups[a],this.renderCache={},this.trigger("optgroup_remove",a))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(b,c){var e,f,g,h,i,j,k,d=this;if(b=A(b),g=A(c[d.settings.valueField]),null!==b&&d.options.hasOwnProperty(b)){if("string"!=typeof g)throw new Error("Value must be set in option data");k=d.options[b].$order,g!==b&&(delete d.options[b],h=d.items.indexOf(b),-1!==h&&d.items.splice(h,1,g)),c.$order=c.$order||k,d.options[g]=c,i=d.renderCache.item,j=d.renderCache.option,i&&(delete i[b],delete i[g]),j&&(delete j[b],delete j[g]),-1!==d.items.indexOf(g)&&(e=d.getItem(b),f=a(d.render("item",c)),e.hasClass("active")&&f.addClass("active"),e.replaceWith(f)),d.lastQuery=null,d.isOpen&&d.refreshOptions(!1)
}},removeOption:function(a,b){var c=this;a=A(a);var d=c.renderCache.item,e=c.renderCache.option;d&&delete d[a],e&&delete e[a],delete c.userOptions[a],delete c.options[a],c.lastQuery=null,c.trigger("option_remove",a),c.removeItem(a,b)},clearOptions:function(){var a=this;a.loadedSearches={},a.userOptions={},a.renderCache={},a.options=a.sifter.items={},a.lastQuery=null,a.trigger("option_clear"),a.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(b,c){var d=this.$dropdown.find("[data-selectable]"),e=d.index(b)+c;
return e>=0&&e<d.length?d.eq(e):a()},getElementWithValue:function(b,c){if(b=A(b),"undefined"!=typeof b&&null!==b)for(var d=0,e=c.length;e>d;d++)if(c[d].getAttribute("data-value")===b)return a(c[d]);return a()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(b,c){for(var d=a.isArray(b)?b:[b],e=0,f=d.length;f>e;e++)this.isPending=f-1>e,this.addItem(d[e],c)},addItem:function(b,c){var d=c?[]:["change"];G(this,d,function(){var d,e,f,k,l,g=this,h=g.settings.mode;return b=A(b),-1!==g.items.indexOf(b)?("single"===h&&g.close(),void 0):(g.options.hasOwnProperty(b)&&("single"===h&&g.clear(c),"multi"===h&&g.isFull()||(d=a(g.render("item",g.options[b])),l=g.isFull(),g.items.splice(g.caretPos,0,b),g.insertAtCaret(d),(!g.isPending||!l&&g.isFull())&&g.refreshState(),g.isSetup&&(f=g.$dropdown_content.find("[data-selectable]"),g.isPending||(e=g.getOption(b),k=g.getAdjacentOption(e,1).attr("data-value"),g.refreshOptions(g.isFocused&&"single"!==h),k&&g.setActiveOption(g.getOption(k))),!f.length||g.isFull()?g.close():g.positionDropdown(),g.updatePlaceholder(),g.trigger("item_add",b,d),g.updateOriginalInput({silent:c})))),void 0)
})},removeItem:function(a,b){var d,e,f,c=this;d="object"==typeof a?a:c.getItem(a),a=A(d.attr("data-value")),e=c.items.indexOf(a),-1!==e&&(d.remove(),d.hasClass("active")&&(f=c.$activeItems.indexOf(d[0]),c.$activeItems.splice(f,1)),c.items.splice(e,1),c.lastQuery=null,!c.settings.persist&&c.userOptions.hasOwnProperty(a)&&c.removeOption(a,b),e<c.caretPos&&c.setCaret(c.caretPos-1),c.refreshState(),c.updatePlaceholder(),c.updateOriginalInput({silent:b}),c.positionDropdown(),c.trigger("item_remove",a,d))},createItem:function(b,c){var d=this,e=d.caretPos;
b=b||a.trim(d.$control_input.val()||"");var f=arguments[arguments.length-1];if("function"!=typeof f&&(f=function(){}),"boolean"!=typeof c&&(c=!0),!d.canCreate(b))return f(),!1;d.lock();var g="function"==typeof d.settings.create?this.settings.create:function(a){var b={};return b[d.settings.labelField]=a,b[d.settings.valueField]=a,b},h=E(function(a){if(d.unlock(),!a||"object"!=typeof a)return f();var b=A(a[d.settings.valueField]);return"string"!=typeof b?f():(d.setTextboxValue(""),d.addOption(a),d.setCaret(e),d.addItem(b),d.refreshOptions(c&&"single"!==d.settings.mode),f(a),void 0)
}),i=g.apply(this,[b,h]);return"undefined"!=typeof i&&h(i),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var a,b=this;b.isRequired&&(b.items.length&&(b.isInvalid=!1),b.$control_input.prop("required",a)),b.refreshClasses()},refreshClasses:function(){var b=this,c=b.isFull(),d=b.isLocked;b.$wrapper.toggleClass("rtl",b.rtl),b.$control.toggleClass("focus",b.isFocused).toggleClass("disabled",b.isDisabled).toggleClass("required",b.isRequired).toggleClass("invalid",b.isInvalid).toggleClass("locked",d).toggleClass("full",c).toggleClass("not-full",!c).toggleClass("input-active",b.isFocused&&!b.isInputHidden).toggleClass("dropdown-active",b.isOpen).toggleClass("has-options",!a.isEmptyObject(b.options)).toggleClass("has-items",b.items.length>0),b.$control_input.data("grow",!c&&!d)
},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(a){var b,c,d,e,f=this;if(a=a||{},f.tagType===w){for(d=[],b=0,c=f.items.length;c>b;b++)e=f.options[f.items[b]][f.settings.labelField]||"",d.push('<option value="'+B(f.items[b])+'" selected="selected">'+B(e)+"</option>");d.length||this.$input.attr("multiple")||d.push('<option value="" selected="selected"></option>'),f.$input.html(d.join(""))}else f.$input.val(f.getValue()),f.$input.attr("value",f.$input.val());
f.isSetup&&(a.silent||f.trigger("change",f.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder),a.triggerHandler("update",{force:!0})}},open:function(){var a=this;a.isLocked||a.isOpen||"multi"===a.settings.mode&&a.isFull()||(a.focus(),a.isOpen=!0,a.refreshState(),a.$dropdown.css({visibility:"hidden",display:"block"}),a.positionDropdown(),a.$dropdown.css({visibility:"visible"}),a.trigger("dropdown_open",a.$dropdown))
},close:function(){var a=this,b=a.isOpen;"single"===a.settings.mode&&a.items.length&&a.hideInput(),a.isOpen=!1,a.$dropdown.hide(),a.setActiveOption(null),a.refreshState(),b&&a.trigger("dropdown_close",a.$dropdown)},positionDropdown:function(){var a=this.$control,b="body"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0),this.$dropdown.css({width:a.outerWidth(!0),top:b.top,left:b.left})},clear:function(a){var b=this;b.items.length&&(b.$control.children(":not(input)").remove(),b.items=[],b.lastQuery=null,b.setCaret(0),b.setActiveItem(null),b.updatePlaceholder(),b.updateOriginalInput({silent:a}),b.refreshState(),b.showInput(),b.trigger("clear"))
},insertAtCaret:function(b){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(b):a(this.$control[0].childNodes[c]).before(b),this.setCaret(c+1)},deleteSelection:function(b){var c,d,e,f,g,h,i,j,k,l=this;if(e=b&&b.keyCode===q?-1:1,f=I(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(i=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),g=[],l.$activeItems.length){for(k=l.$control.children(".active:"+(e>0?"last":"first")),h=l.$control.children(":not(input)").index(k),e>0&&h++,c=0,d=l.$activeItems.length;d>c;c++)g.push(a(l.$activeItems[c]).attr("data-value"));
b&&(b.preventDefault(),b.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(0>e&&0===f.start&&0===f.length?g.push(l.items[l.caretPos-1]):e>0&&f.start===l.$control_input.val().length&&g.push(l.items[l.caretPos]));if(!g.length||"function"==typeof l.settings.onDelete&&l.settings.onDelete.apply(l,[g])===!1)return!1;for("undefined"!=typeof h&&l.setCaret(h);g.length;)l.removeItem(g.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),i&&(j=l.getOption(i),j.length&&l.setActiveOption(j)),!0
},advanceSelection:function(a,b){var c,d,e,f,g,h,i=this;0!==a&&(i.rtl&&(a*=-1),c=a>0?"last":"first",d=I(i.$control_input[0]),i.isFocused&&!i.isInputHidden?(f=i.$control_input.val().length,g=0>a?0===d.start&&0===d.length:d.start===f,g&&!f&&i.advanceCaret(a,b)):(h=i.$control.children(".active:"+c),h.length&&(e=i.$control.children(":not(input)").index(h),i.setActiveItem(null),i.setCaret(a>0?e+1:e))))},advanceCaret:function(a,b){var d,e,c=this;0!==a&&(d=a>0?"next":"prev",c.isShiftDown?(e=c.$control_input[d](),e.length&&(c.hideInput(),c.setActiveItem(e),b&&b.preventDefault())):c.setCaret(c.caretPos+a))
},setCaret:function(b){var c=this;if(b="single"===c.settings.mode?c.items.length:Math.max(0,Math.min(c.items.length,b)),!c.isPending){var d,e,g,h;for(g=c.$control.children(":not(input)"),d=0,e=g.length;e>d;d++)h=a(g[d]).detach(),b>d?c.$control_input.before(h):c.$control.append(h)}c.caretPos=b},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var a=this;a.$input.prop("disabled",!0),a.$control_input.prop("disabled",!0).prop("tabindex",-1),a.isDisabled=!0,a.lock()
},enable:function(){var a=this;a.$input.prop("disabled",!1),a.$control_input.prop("disabled",!1).prop("tabindex",a.tabIndex),a.isDisabled=!1,a.unlock()},destroy:function(){var b=this,c=b.eventNS,d=b.revertSettings;b.trigger("destroy"),b.off(),b.$wrapper.remove(),b.$dropdown.remove(),b.$input.html("").append(d.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:d.tabindex}).show(),b.$control_input.removeData("grow"),b.$input.removeData("selectize"),a(window).off(c),a(document).off(c),a(document.body).off(c),delete b.$input[0].selectize
},render:function(a,b){var c,d,f="",g=!1,h=this,i=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===a||"item"===a)&&(c=A(b[h.settings.valueField]),g=!!c),g&&(z(h.renderCache[a])||(h.renderCache[a]={}),h.renderCache[a].hasOwnProperty(c))?h.renderCache[a][c]:(f=h.settings.render[a].apply(this,[b,B]),("option"===a||"option_create"===a)&&(f=f.replace(i,"<$1 data-selectable")),"optgroup"===a&&(d=b[h.settings.optgroupValueField]||"",f=f.replace(i,'<$1 data-group="'+C(B(d))+'"')),("option"===a||"item"===a)&&(f=f.replace(i,'<$1 data-value="'+C(B(c||""))+'"')),g&&(h.renderCache[a][c]=f),f)
},clearCache:function(a){var b=this;"undefined"==typeof a?b.renderCache={}:delete b.renderCache[a]},canCreate:function(a){var b=this;if(!b.settings.create)return!1;var c=b.settings.createFilter;return!(!a.length||"function"==typeof c&&!c.apply(b,[a])||"string"==typeof c&&!new RegExp(c).test(a)||c instanceof RegExp&&!c.test(a))}}),M.count=0,M.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},a.fn.selectize=function(b){var c=a.fn.selectize.defaults,d=a.extend({},c,b),e=d.dataAttr,f=d.labelField,g=d.valueField,h=d.optgroupField,i=d.optgroupLabelField,j=d.optgroupValueField,k=function(b,c){var h,i,j,k,l=b.attr(e);
if(l)for(c.options=JSON.parse(l),h=0,i=c.options.length;i>h;h++)c.items.push(c.options[h][g]);else{var m=a.trim(b.val()||"");if(!d.allowEmptyOption&&!m.length)return;for(j=m.split(d.delimiter),h=0,i=j.length;i>h;h++)k={},k[f]=j[h],k[g]=j[h],c.options.push(k);c.items=j}},l=function(b,c){var k,l,m,n,p=c.options,q={},r=function(a){var b=e&&a.attr(e);return"string"==typeof b&&b.length?JSON.parse(b):null},s=function(b,e){b=a(b);var i=A(b.attr("value"));if(i||d.allowEmptyOption)if(q.hasOwnProperty(i)){if(e){var j=q[i][h];
j?a.isArray(j)?j.push(e):q[i][h]=[j,e]:q[i][h]=e}}else{var k=r(b)||{};k[f]=k[f]||b.text(),k[g]=k[g]||i,k[h]=k[h]||e,q[i]=k,p.push(k),b.is(":selected")&&c.items.push(i)}},t=function(b){var d,e,f,g,h;for(b=a(b),f=b.attr("label"),f&&(g=r(b)||{},g[i]=f,g[j]=f,c.optgroups.push(g)),h=a("option",b),d=0,e=h.length;e>d;d++)s(h[d],f)};for(c.maxItems=b.attr("multiple")?null:1,n=b.children(),k=0,l=n.length;l>k;k++)m=n[k].tagName.toLowerCase(),"optgroup"===m?t(n[k]):"option"===m&&s(n[k])};return this.each(function(){if(!this.selectize){var e,f=a(this),g=this.tagName.toLowerCase(),h=f.attr("placeholder")||f.attr("data-placeholder");
h||d.allowEmptyOption||(h=f.children('option[value=""]').text());var i={placeholder:h,options:[],optgroups:[],items:[]};"select"===g?l(f,i):k(f,i),e=new M(f,a.extend(!0,{},c,i,b))}})},a.fn.selectize.defaults=M.defaults,a.fn.selectize.support={validity:y},M.define("drag_drop",function(){if(!a.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var c=this;c.lock=function(){var a=c.lock;return function(){var b=c.$control.data("sortable");return b&&b.disable(),a.apply(c,arguments)
}}(),c.unlock=function(){var a=c.unlock;return function(){var b=c.$control.data("sortable");return b&&b.enable(),a.apply(c,arguments)}}(),c.setup=function(){var b=c.setup;return function(){b.apply(this,arguments);var d=c.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:c.isLocked,start:function(a,b){b.placeholder.css("width",b.helper.css("width")),d.css({overflow:"visible"})},stop:function(){d.css({overflow:"hidden"});var b=c.$activeItems?c.$activeItems.slice():null,e=[];d.children("[data-value]").each(function(){e.push(a(this).attr("data-value"))
}),c.setValue(e),c.setActiveItem(b)}})}}()}}),M.define("dropdown_header",function(b){var c=this;b=a.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'
}},b),c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments),c.$dropdown_header=a(b.html(b)),c.$dropdown.prepend(c.$dropdown_header)}}()}),M.define("optgroup_columns",function(b){var c=this;b=a.extend({equalizeWidth:!0,equalizeHeight:!0},b),this.getAdjacentOption=function(b,c){var d=b.closest("[data-group]").find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e,f,g;return!this.isOpen||b.keyCode!==k&&b.keyCode!==n?a.apply(this,arguments):(c.ignoreHover=!0,g=this.$activeOption.closest("[data-group]"),d=g.find("[data-selectable]").index(this.$activeOption),g=b.keyCode===k?g.prev("[data-group]"):g.next("[data-group]"),f=g.find("[data-selectable]"),e=f.eq(Math.min(f.length-1,d)),e.length&&this.setActiveOption(e),void 0)
}}();var d=function(){var a,b=d.width,c=document;return"undefined"==typeof b&&(a=c.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a)),b},e=function(){var e,f,g,h,i,j,k;if(k=a("[data-group]",c.$dropdown_content),f=k.length,f&&c.$dropdown_content.width()){if(b.equalizeHeight){for(g=0,e=0;f>e;e++)g=Math.max(g,k.eq(e).height());
k.css({height:g})}b.equalizeWidth&&(j=c.$dropdown_content.innerWidth()-d(),h=Math.round(j/f),k.css({width:h}),f>1&&(i=j-h*(f-1),k.eq(f-1).css({width:i})))}};(b.equalizeHeight||b.equalizeWidth)&&(D.after(this,"positionDropdown",e),D.after(this,"refreshOptions",e))}),M.define("remove_button",function(b){if("single"!==this.settings.mode){b=a.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);var c=this,d='<a href="javascript:void(0)" class="'+b.className+'" tabindex="-1" title="'+B(b.title)+'">'+b.label+"</a>",e=function(a,b){var c=a.search(/(<\/[^>]+>\s*)$/);
return a.substring(0,c)+b+a.substring(c)};this.setup=function(){var f=c.setup;return function(){if(b.append){var g=c.settings.render.item;c.settings.render.item=function(){return e(g.apply(this,arguments),d)}}f.apply(this,arguments),this.$control.on("click","."+b.className,function(b){if(b.preventDefault(),!c.isLocked){var d=a(b.currentTarget).parent();c.setActiveItem(d),c.deleteSelection()&&c.setCaret(c.items.length)}})}}()}}),M.define("restore_on_backspace",function(a){var b=this;a.text=a.text||function(a){return a[this.settings.labelField]
},this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d,e;return b.keyCode===q&&""===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1,d>=0&&d<this.items.length)?(e=this.options[this.items[d]],this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[e])),this.refreshOptions(!0)),b.preventDefault(),void 0):c.apply(this,arguments)}}()}),M}),ed.define("typeahead",["edjquery"],function(a){window.Typeahead={version:"2.3.1"};var b={input:null,minLength:2,maxItem:8,dynamic:!1,delay:300,order:null,offset:!1,hint:!1,accent:!1,highlight:!0,group:!1,groupOrder:null,maxItemPerGroup:null,dropdownFilter:!1,dynamicFilter:null,backdrop:!1,backdropOnFocus:!1,cache:!1,ttl:36e5,compression:!1,suggestion:!1,searchOnFocus:!1,resultContainer:null,generateOnLoad:null,mustSelectItem:!1,href:null,display:["display"],template:null,correlativeTemplate:!1,emptyTemplate:!1,filter:!0,matcher:null,source:null,callback:{onInit:null,onReady:null,onShowLayout:null,onHideLayout:null,onSearch:null,onResult:null,onLayoutBuiltBefore:null,onLayoutBuiltAfter:null,onNavigateBefore:null,onNavigateAfter:null,onMouseEnter:null,onMouseLeave:null,onClickBefore:null,onClickAfter:null,onSendRequest:null,onReceiveRequest:null,onPopulateSource:null,onCacheSave:null,onSubmit:null},selector:{container:"typeahead-container",result:"typeahead-result",list:"typeahead-list",group:"typeahead-group",item:"typeahead-item",empty:"typeahead-empty",display:"typeahead-display",query:"typeahead-query",filter:"typeahead-filter",filterButton:"typeahead-filter-button",filterValue:"typeahead-filter-value",dropdown:"typeahead-dropdown",dropdownCaret:"typeahead-caret",button:"typeahead-button",backdrop:"typeahead-backdrop",hint:"typeahead-hint"},debug:!1},c=".typeahead",d={from:"\xe3\xe0\xe1\xe4\xe2\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7",to:"aaaaaeeeeeiiiiooooouuuunc"},e=~navigator.appVersion.indexOf("MSIE 9."),f=function(a,b){this.rawQuery="",this.query=a.val()||"",this.tmpSource={},this.source={},this.isGenerated=null,this.generatedGroupCount=0,this.groupCount=0,this.groupBy="group",this.result={},this.resultCount=0,this.options=b,this.node=a,this.container=null,this.resultContainer=null,this.item=null,this.xhr={},this.hintIndex=null,this.filters={dropdown:{},dynamic:{}},this.requests={},this.backdrop={},this.hint={},this.__construct()
};f.prototype={extendOptions:function(){this.options.dynamic&&(this.options.cache=!1,this.options.compression=!1),this.options.cache&&(this.options.cache=function(a){var c,b=["localStorage","sessionStorage"];if(a===!0)a="localStorage";else if("string"==typeof a&&!~b.indexOf(a))return this.options.debug&&(h.log({node:this.node.selector,"function":"extendOptions()",message:'Invalid options.cache, possible options are "localStorage" or "sessionStorage"'}),h.print()),!1;c="undefined"!=typeof window[a];try{window[a].setItem("typeahead","typeahead"),window[a].removeItem("typeahead")
}catch(d){c=!1}return c&&a||!1}.call(this,this.options.cache)),this.options.compression&&("object"==typeof LZString&&this.options.cache||(this.options.debug&&(h.log({node:this.node.selector,"function":"extendOptions()",message:"Missing LZString Library or options.cache, no compression will occur."}),h.print()),this.options.compression=!1)),"undefined"==typeof this.options.maxItem||/^\d+$/.test(this.options.maxItem)&&0!==this.options.maxItem||(this.options.maxItem=1/0),this.options.maxItemPerGroup&&!/^\d+$/.test(this.options.maxItemPerGroup)&&(this.options.maxItemPerGroup=null),!this.options.display||this.options.display instanceof Array||(this.options.display=[this.options.display]),!this.options.group||this.options.group instanceof Array||(this.options.group=[this.options.group]),this.options.highlight&&!~["any",!0].indexOf(this.options.highlight)&&(this.options.highlight=!1),!this.options.dynamicFilter||this.options.dynamicFilter instanceof Array||(this.options.dynamicFilter=[this.options.dynamicFilter]),this.options.accent&&("object"==typeof this.options.accent?this.options.accent.from&&this.options.accent.to&&this.options.accent.from.length===this.options.accent.to.length||this.options.debug&&(h.log({node:this.node.selector,"function":"extendOptions()",message:'Invalid "options.accent", from and to must be defined and same length.'}),h.print()):this.options.accent=d),this.options.resultContainer&&("string"==typeof this.options.resultContainer&&(this.options.resultContainer=a(this.options.resultContainer)),this.options.resultContainer instanceof jQuery&&this.options.resultContainer[0]?this.resultContainer=this.options.resultContainer:this.options.debug&&(h.log({node:this.node.selector,"function":"extendOptions()",message:'Invalid jQuery selector or jQuery Object for "options.resultContainer".'}),h.print())),this.options.group&&"string"==typeof this.options.group[0]&&this.options.maxItemPerGroup&&(this.groupBy=this.options.group[0]),this.options.callback&&this.options.callback.onClick&&(this.options.callback.onClickBefore=this.options.callback.onClick,delete this.options.callback.onClick),this.options.callback&&this.options.callback.onNavigate&&(this.options.callback.onNavigateBefore=this.options.callback.onNavigate,delete this.options.callback.onNavigate),this.options=a.extend(!0,{},b,this.options)
},unifySourceFormat:function(){if(this.options.source instanceof Array)return this.options.source={group:{data:this.options.source}},this.groupCount+=1,!0;("undefined"!=typeof this.options.source.data||"undefined"!=typeof this.options.source.url)&&(this.options.source={group:this.options.source});var a;for(var b in this.options.source)if(this.options.source.hasOwnProperty(b)){if(a=this.options.source[b],("string"==typeof a||a instanceof Array)&&(a={url:a}),!a.data&&!a.url)return this.options.debug&&(h.log({node:this.node.selector,"function":"unifySourceFormat()",arguments:JSON.stringify(this.options.source),message:'Undefined "options.source.'+b+'.[data|url]" is Missing - Typeahead dropped'}),h.print()),!1;
!a.display||a.display instanceof Array||(a.display=[a.display]),a.ignore&&(a.ignore instanceof RegExp||(this.options.debug&&(h.log({node:this.node.selector,"function":"unifySourceFormat()",arguments:JSON.stringify(a.ignore),message:"Invalid ignore RegExp."}),h.print()),delete a.ignore)),this.options.source[b]=a,this.groupCount+=1}return!0},init:function(){this.helper.executeCallback.call(this,this.options.callback.onInit,[this.node]),this.container=this.node.closest("."+this.options.selector.container),this.options.debug&&(h.log({node:this.node.selector,"function":"init()",message:"OK - Typeahead activated on "+this.node.selector}),h.print())
},delegateEvents:function(){var b=this,d=["focus"+c,"input"+c,"propertychange"+c,"keydown"+c,"keyup"+c,"dynamic"+c,"generateOnLoad"+c];this.container.off(c).on("click"+c+" touchstart"+c,function(c){c.stopPropagation(),b.options.dropdownFilter&&b.container.hasClass("filter")&&!a(c.target).closest("."+b.options.selector.dropdown.replace(" ","."))[0]&&b.container.removeClass("filter")}),this.node.closest("form").on("submit",function(a){return b.options.mustSelectItem&&b.helper.isEmpty(b.item)?(a.preventDefault(),void 0):(b.hideLayout(),b.rawQuery="",b.query="",b.helper.executeCallback.call(b,b.options.callback.onSubmit,[b.node,this,b.item,a])?!1:void 0)
});var f=!1;this.node.off(c).on(d.join(" "),function(a){switch(a.type){case"focus":b.options.backdropOnFocus&&(b.buildBackdropLayout(),b.showLayout());case"generateOnLoad":b.options.searchOnFocus&&b.query.length>=b.options.minLength&&(b.isGenerated?b.showLayout():null===b.isGenerated&&b.generateSource());case"keydown":null!==b.isGenerated||b.options.dynamic||b.generateSource(),a.keyCode&&~[9,13,27,38,39,40].indexOf(a.keyCode)&&(f=!0,b.navigate(a));break;case"keyup":e&&b.node[0].value.replace(/^\s+/,"").toString().length<b.query.length&&b.node.trigger("input"+c);
break;case"propertychange":if(f){f=!1;break}case"input":if(b.rawQuery=b.node[0].value.toString(),b.query=b.rawQuery.replace(/^\s+/,""),b.options.hint&&b.hint.container&&""!==b.hint.container.val()&&0!==b.hint.container.val().indexOf(b.rawQuery)&&b.hint.container.val(""),b.options.dynamic)return b.isGenerated=null,b.helper.typeWatch(function(){b.query.length>=b.options.minLength?b.generateSource():b.hideLayout()},b.options.delay),void 0;case"dynamic":if(!b.isGenerated)break;if(b.query.length<b.options.minLength){b.resetLayout(),b.hideLayout();
break}b.searchResult(),b.buildLayout(),b.result.length>0||b.options.emptyTemplate?b.showLayout():b.hideLayout()}}),this.options.generateOnLoad&&this.node.trigger("generateOnLoad"+c)},generateSource:function(){if(!this.isGenerated||this.options.dynamic){if(this.generatedGroupCount=0,this.isGenerated=!1,!this.helper.isEmpty(this.xhr)){for(var a in this.xhr)this.xhr.hasOwnProperty(a)&&this.xhr[a].abort();this.xhr={}}var b,c,d,e;for(b in this.options.source)if(this.options.source.hasOwnProperty(b)){if(c=this.options.source[b],this.options.cache&&(d=window[this.options.cache].getItem("TYPEAHEAD_"+this.node.selector+":"+b))){this.options.compression&&(d=LZString.decompressFromUTF16(d)),e=!1;
try{d=JSON.parse(d+""),d.data&&d.ttl>(new Date).getTime()?(this.populateSource(d.data,b),e=!0,this.options.debug&&(h.log({node:this.node.selector,"function":"generateSource()",message:'Source for group "'+b+'" found in '+this.options.cache}),h.print())):window[this.options.cache].removeItem("TYPEAHEAD_"+this.node.selector+":"+b)}catch(f){}if(e)continue}!c.data||c.url?c.url&&(this.requests[b]||(this.requests[b]=this.generateRequestObject(b))):this.populateSource("function"==typeof c.data&&c.data()||c.data,b)}this.handleRequests()
}},generateRequestObject:function(b){var c=this,d=this.options.source[b];d.url instanceof Array||(d.url=[d.url]);var e={request:{url:null,dataType:"json",beforeSend:function(a){c.xhr[b]=a;var f=c.requests[b].extra.beforeSend||d.url[0].beforeSend;"function"==typeof f&&f.apply(null,arguments)}},extra:{path:null,group:b,callback:{done:null,fail:null,complete:null,always:null}},validForGroup:[b]};Object.defineProperty(e.request,"beforeSend",{writable:!1}),d.url[0]instanceof Object?(d.url[0].callback&&(e.extra.callback=d.url[0].callback,delete d.url[0].callback),e.request=a.extend(!0,e.request,d.url[0])):"string"==typeof d.url[0]&&(e.request.url=d.url[0]),d.url[1]&&"string"==typeof d.url[1]&&(e.extra.path=d.url[1]),"jsonp"===e.request.dataType.toLowerCase()&&(e.request.jsonpCallback="callback_"+b);
var f;for(var g in this.requests)if(this.requests.hasOwnProperty(g)&&(f=JSON.stringify(this.requests[g].request),f===JSON.stringify(e.request))){this.requests[g].validForGroup.push(b),e.isDuplicated=!0,delete e.validForGroup;break}return e},handleRequests:function(){var b=this,c=Object.keys(this.requests).length;this.helper.executeCallback.call(this,this.options.callback.onSendRequest,[this.node,this.query]);for(var d in this.requests)this.requests.hasOwnProperty(d)&&(this.requests[d].isDuplicated||!function(d,e){if("function"==typeof b.options.source[d].url[0]){var f=b.options.source[d].url[0].call(b,b.query);
if(e.request=a.extend(!0,e.request,f),"object"!=typeof e.request||!e.request.url)return b.options.debug&&(h.log({node:b.node.selector,"function":"handleRequests",message:'Source function must return an object containing ".url" key for group "'+d+'"'}),h.print()),void 0;f.beforeSend&&(b.requests[d].extra.beforeSend=f.beforeSend)}var g,i=!1;if(~e.request.url.indexOf("{{query}}")&&(i||(e=a.extend(!0,{},e),i=!0),e.request.url=e.request.url.replace("{{query}}",b.query.sanitize())),e.request.data)for(var j in e.request.data)if(e.request.data.hasOwnProperty(j)&&~String(e.request.data[j]).indexOf("{{query}}")){i||(e=a.extend(!0,{},e),i=!0),e.request.data[j]=e.request.data[j].replace("{{query}}",b.query.sanitize());
break}a.ajax(e.request).done(function(a,d,f){for(var i,j=0;j<e.validForGroup.length;j++)g=b.requests[e.validForGroup[j]],g.extra.callback.done instanceof Function&&(i=g.extra.callback.done(a,d,f),a=i instanceof Array&&i||a,i instanceof Array||b.options.debug&&(h.log({node:b.node.selector,"function":"Ajax.callback.done()",message:"Invalid returned data has to be an Array"}),h.print())),b.populateSource(a,g.extra.group,g.extra.path),c-=1,0===c&&b.helper.executeCallback.call(b,b.options.callback.onReceiveRequest,[b.node,b.query])
}).fail(function(a,c,d){for(var f=0;f<e.validForGroup.length;f++)g=b.requests[e.validForGroup[f]],g.extra.callback.fail instanceof Function&&g.extra.callback.fail(a,c,d);b.options.debug&&(h.log({node:b.node.selector,"function":"Ajax.callback.fail()",message:"Request failed"}),h.print())}).then(function(a,c){for(var d=0;d<e.validForGroup.length;d++)g=b.requests[e.validForGroup[d]],g.extra.callback.then instanceof Function&&g.extra.callback.then(a,c)}).always(function(a,c,d){for(var f=0;f<e.validForGroup.length;f++)g=b.requests[e.validForGroup[f]],g.extra.callback.always instanceof Function&&g.extra.callback.always(a,c,d)
})}(d,this.requests[d]))},populateSource:function(a,b,c){var d=this,e=this.options.source[b],f=e.url&&e.data;a="string"==typeof c?this.helper.namespace(c,a):a,"undefined"==typeof a&&this.options.debug&&(h.log({node:this.node.selector,"function":"populateSource()",arguments:c,message:"Invalid data path."}),h.print()),a instanceof Array||(this.options.debug&&(h.log({node:this.node.selector,"function":"populateSource()",arguments:JSON.stringify({group:b}),message:"Invalid data type, must be Array type."}),h.print()),a=[]),f&&("function"==typeof f&&(f=f()),f instanceof Array?a=a.concat(f):this.options.debug&&(h.log({node:this.node.selector,"function":"populateSource()",arguments:JSON.stringify(f),message:"WARNING - this.options.source."+b+".data Must be an Array or a function that returns an Array."}),h.print()));
for(var g,i=e.display?"compiled"===e.display[0]?e.display[1]:e.display[0]:"compiled"===this.options.display[0]?this.options.display[1]:this.options.display[0],j=0;j<a.length;j++)"string"==typeof a[j]&&(g={},g[i]=a[j],a[j]=g),a[j].group=b;if(this.options.correlativeTemplate){var k=e.template||this.options.template,l="";if("function"==typeof k&&(k=k()),k){if(this.options.correlativeTemplate instanceof Array)for(var j=0;j<this.options.correlativeTemplate.length;j++)l+="{{"+this.options.correlativeTemplate[j]+"}} ";
else l=k.replace(/<.+?>/g,"");for(var j=0;j<a.length;j++)a[j].compiled=l.replace(/\{\{([\w\-\.]+)(?:\|(\w+))?}}/g,function(b,c){return d.helper.namespace(c,a[j],"get","")}).trim();e.display?~e.display.indexOf("compiled")||e.display.unshift("compiled"):~this.options.display.indexOf("compiled")||this.options.display.unshift("compiled")}else this.options.debug&&(h.log({node:this.node.selector,"function":"populateSource()",arguments:JSON.stringify(b),message:"WARNING - this.options.correlativeTemplate is enabled but no template was found."}),h.print())
}if(this.options.callback.onPopulateSource&&(a=this.helper.executeCallback.call(this,this.options.callback.onPopulateSource,[this.node,a,b,c]),a&&a instanceof Array||(h.log({node:this.node.selector,"function":"callback.populateSource()",message:'callback.onPopulateSource must return the "data" parameter'}),h.print())),this.tmpSource[b]=a,this.options.cache&&!window[this.options.cache].getItem("TYPEAHEAD_"+this.node.selector+":"+b)){this.options.callback.onCacheSave&&(a=this.helper.executeCallback.call(this,this.options.callback.onCacheSave,[this.node,a,b,c]),a&&a instanceof Array||(h.log({node:this.node.selector,"function":"callback.populateSource()",message:'callback.onCacheSave must return the "data" parameter'}),h.print()));
var m=JSON.stringify({data:a,ttl:(new Date).getTime()+this.options.ttl});this.options.compression&&(m=LZString.compressToUTF16(m)),window[this.options.cache].setItem("TYPEAHEAD_"+this.node.selector+":"+b,m)}this.incrementGeneratedGroup()},incrementGeneratedGroup:function(){if(this.generatedGroupCount+=1,this.groupCount===this.generatedGroupCount){this.isGenerated=!0,this.xhr={};for(var a=Object.keys(this.options.source),b=0;b<a.length;b++)this.source[a[b]]=this.tmpSource[a[b]];this.tmpSource={},this.node.trigger("dynamic"+c)
}},navigate:function(a){if(this.helper.executeCallback.call(this,this.options.callback.onNavigateBefore,[this.node,this.query,a]),~[9,27].indexOf(a.keyCode))return this.query.length||27!==a.keyCode||this.node.blur(),this.hideLayout(),void 0;if(this.isGenerated&&this.result.length){var b=this.resultContainer.find("> ul > li:not([data-search-group])"),c=b.filter(".active"),d=c[0]&&b.index(c)||null,e=null;if(13===a.keyCode){if(c.length>0)return a.preventDefault(),c.find("a:first")[0].click(),void 0;if(this.options.mustSelectItem&&this.helper.isEmpty(this.item))return;
return this.hideLayout(),void 0}if(39===a.keyCode)return d?b.eq(d).find("a:first")[0].click():this.options.hint&&""!==this.hint.container.val()&&this.helper.getCaret(this.node[0])>=this.query.length&&b.find('a[data-index="'+this.hintIndex+'"]')[0].click(),void 0;b.length>0&&c.removeClass("active"),38===a.keyCode?(a.preventDefault(),c.length>0?d-1>=0&&(e=d-1,b.eq(e).addClass("active")):(e=b.length-1,b.last().addClass("active"))):40===a.keyCode&&(a.preventDefault(),c.length>0?d+1<b.length&&(e=d+1,b.eq(e).addClass("active")):(e=0,b.first().addClass("active"))),a.preventInputChange&&~[38,40].indexOf(a.keyCode)&&this.buildHintLayout(null!==e&&e<this.result.length?[this.result[e]]:null),this.options.hint&&this.hint.container&&this.hint.container.css("color",a.preventInputChange?this.hint.css.color:null===e&&this.hint.css.color||this.hint.container.css("background-color")||"fff"),this.node.val(null===e||a.preventInputChange?this.rawQuery:this.result[e][this.result[e].matchedKey]),this.helper.executeCallback.call(this,this.options.callback.onNavigateAfter,[this.node,b,null!==e&&b.eq(e).find("a:first")||void 0,null!==e&&this.result[e]||void 0,this.query,a])
}},searchResult:function(a){a||(this.item={}),this.helper.executeCallback.call(this,this.options.callback.onSearch,[this.node,this.query]),this.result={},this.resultCount=0,this.resultItemCount=0;var c,f,g,i,m,o,p,q,r,t,u,v,b=this,d=this.options.group&&"boolean"!=typeof this.options.group[0]?this.options.group[0]:"group",e=null,j=this.query.toLowerCase(),k=this.options.maxItemPerGroup,l=this.filters.dynamic&&!this.helper.isEmpty(this.filters.dynamic),n={},s="function"==typeof this.options.matcher&&this.options.matcher;
this.options.accent&&(j=this.helper.removeAccent.call(this,j));for(c in this.source)if(this.source.hasOwnProperty(c)&&(!this.filters.dropdown||"group"!==this.filters.dropdown.key||this.filters.dropdown.value===c)){o="undefined"!=typeof this.options.source[c].filter?this.options.source[c].filter:this.options.filter,q="function"==typeof this.options.source[c].matcher&&this.options.source[c].matcher||s;for(var w=0;w<this.source[c].length&&(!(this.result.length>=this.options.maxItem)||this.options.callback.onResult);w++)if(!l||this.dynamicFilter.validate.apply(this,[this.source[c][w]])){if(f=this.source[c][w],e="group"===d?c:f[d],e&&!this.result[e]&&(this.result[e]=[]),k&&"group"===d&&this.result[e].length>=k&&!this.options.callback.onResult)break;
m=this.options.source[c].display||this.options.display;for(var x=0;x<m.length;x++){if("function"==typeof o){if(p=o.call(this,f,f[m[x]]),void 0===p)break;if(!p)continue;"object"==typeof p&&(f=p)}if(~[void 0,!0].indexOf(o)){if(i=f[m[x]],!i){this.options.debug&&(n[x]={display:m[x],data:f});continue}if(i=i.toString().toLowerCase(),this.options.accent&&(i=this.helper.removeAccent.call(this,i)),g=i.indexOf(j),this.options.correlativeTemplate&&"compiled"===m[x]&&0>g&&/\s/.test(j)){t=!0,u=j.split(" "),v=i;for(var y=0;y<u.length;y++)if(""!==u[y]){if(!~v.indexOf(u[y])){t=!1;
break}v=v.replace(u[y],"")}}if(0>g&&!t)continue;if(this.options.offset&&0!==g)continue;if(this.options.source[c].ignore&&this.options.source[c].ignore.test(i))continue;if(q){if(r=q.call(this,f,f[m[x]]),void 0===r)break;if(!r)continue;"object"==typeof r&&(f=r)}}if(!this.filters.dropdown||this.filters.dropdown.value==f[this.filters.dropdown.key]){if(this.resultCount++,this.resultItemCount<this.options.maxItem){if(k&&this.result[e].length>=k)break;f.matchedKey=m[x],this.result[e].push(f),this.resultItemCount++}break
}}if(!this.options.callback.onResult){if(this.resultItemCount>=this.options.maxItem)break;if(k&&this.result[e].length>=k&&"group"===d)break}}}if(this.options.debug&&(this.helper.isEmpty(n)||(h.log({node:this.node.selector,"function":"searchResult()",arguments:JSON.stringify(n),message:"Missing keys for display, make sure options.display is set properly."}),h.print())),this.options.order){var z,m=[];for(var c in this.result)if(this.result.hasOwnProperty(c)){for(var x=0;x<this.result[c].length;x++)z=this.options.source[this.result[c][x].group].display||this.options.display,~m.indexOf(z[0])||m.push(z[0]);
this.result[c].sort(b.helper.sort(m,"asc"===b.options.order,function(a){return a.toString().toUpperCase()}))}}var B,A=[];B="function"==typeof this.options.groupOrder?this.options.groupOrder.apply(this,[this.node,this.query,this.result,this.resultCount]):this.options.groupOrder instanceof Array?this.options.groupOrder:"string"==typeof this.options.groupOrder&&~["asc","desc"].indexOf(this.options.groupOrder)?Object.keys(this.result).sort(b.helper.sort([],"asc"===b.options.groupOrder,function(a){return a.toString().toUpperCase()
})):Object.keys(this.result);for(var x=0;x<B.length;x++)A=A.concat(this.result[B[x]]||[]);this.result=A,this.helper.executeCallback.call(this,this.options.callback.onResult,[this.node,this.query,this.result,this.resultCount])},buildLayout:function(){this.resultContainer||(this.resultContainer=a("<div/>",{"class":this.options.selector.result}),this.container.append(this.resultContainer));var b=this.query.toLowerCase();this.options.accent&&(b=this.helper.removeAccent.call(this,b));var c=this,d=a("<ul/>",{"class":this.options.selector.list+(c.helper.isEmpty(c.result)?" empty":""),html:function(){if(c.options.emptyTemplate&&c.helper.isEmpty(c.result)){var d="function"==typeof c.options.emptyTemplate?c.options.emptyTemplate.call(c,c.query):c.options.emptyTemplate.replace(/\{\{query}}/gi,c.query.sanitize());
return d instanceof jQuery&&"LI"===d[0].nodeName?d:a("<li/>",{"class":c.options.selector.empty,html:a("<a/>",{href:"javascript:;",html:d})})}for(var e in c.result)c.result.hasOwnProperty(e)&&!function(d,e,f){var h,i,m,n,g=e.group,j=[],k=c.options.source[e.group].display||c.options.display,l=c.options.source[e.group].href||c.options.href;c.options.group&&(c.options.group[1]?"function"==typeof c.options.group[1]?g=c.options.group[1](e):"string"==typeof c.options.group[1]&&(g=c.options.group[1].replace(/(\{\{group}})/gi,e[c.options.group[0]]||g)):"boolean"!=typeof c.options.group[0]&&e[c.options.group[0]]&&(g=e[c.options.group[0]]),a(f).find('li[data-search-group="'+g+'"]')[0]||a(f).append(a("<li/>",{"class":c.options.selector.group,html:a("<a/>",{href:"javascript:;",html:g}),"data-search-group":g}))),h=a("<li/>",{"class":c.options.selector.item,html:a("<a/>",{href:function(){return l&&("string"==typeof l?l=l.replace(/\{\{([\w\-\.]+)(?:\|(\w+))?}}/g,function(a,b,d){var f=c.helper.namespace(b,e,"get","");
return d&&"raw"===d?f:c.helper.slugify.call(c,f)}):"function"==typeof l&&(l=l(e)),e.href=l),l||"javascript:;"},"data-group":g,"data-index":d,html:function(){if(n=e.group&&c.options.source[e.group].template||c.options.template)"function"==typeof n&&(n=n.call(c,c.query,e)),i=n.replace(/\{\{([\w\-\.]+)(?:\|(\w+))?}}/g,function(a,d,f){var g=c.helper.namespace(d,e,"get","");return f&&"raw"===f||c.options.highlight===!0&&b&&~k.indexOf(d)&&(g=c.helper.highlight.call(c,g,b.split(" "),c.options.accent)),g});else{for(var d=0;d<k.length;d++)j.push(e[k[d]]);
i='<span class="'+c.options.selector.display+'">'+j.join(" ")+"</span>"}(c.options.highlight===!0&&b&&!n||"any"===c.options.highlight)&&(i=c.helper.highlight.call(c,i,b.split(" "),c.options.accent)),a(this).append(i)},click:function(b){return c.options.mustSelectItem&&c.helper.isEmpty(e)?(b.preventDefault(),void 0):(c.item=e,c.helper.executeCallback.call(c,c.options.callback.onClickBefore,[c.node,a(this),e,b]),b.originalEvent&&b.originalEvent.defaultPrevented||b.isDefaultPrevented()||(c.query=c.rawQuery=e[e.matchedKey].toString(),c.node.val(c.query).focus(),c.searchResult(!0),c.buildLayout(),c.hideLayout(),c.helper.executeCallback.call(c,c.options.callback.onClickAfter,[c.node,a(this),e,b])),void 0)
},mouseenter:function(b){a(this).closest("ul").find("li.active").removeClass("active"),a(this).closest("li").addClass("active"),c.helper.executeCallback.call(c,c.options.callback.onMouseEnter,[c.node,a(this),e,b])},mouseleave:function(b){a(this).closest("li").removeClass("active"),c.helper.executeCallback.call(c,c.options.callback.onMouseLeave,[c.node,a(this),e,b])}})}),c.options.group?(m=a(f).find('a[data-group="'+g+'"]:last').closest("li"),m[0]||(m=a(f).find('li[data-search-group="'+g+'"]')),a(h).insertAfter(m)):a(f).append(h)
}(e,c.result[e],this)}});if(this.buildBackdropLayout(),this.buildHintLayout(),this.options.callback.onLayoutBuiltBefore){var e=this.helper.executeCallback.call(this,this.options.callback.onLayoutBuiltBefore,[this.node,this.query,this.result,d]);e instanceof jQuery?d=e:this.options.debug&&(h.log({node:this.node.selector,"function":"callback.onLayoutBuiltBefore()",message:"Invalid returned value - You must return resultHtmlList jQuery Object"}),h.print())}this.resultContainer.html(d),this.options.callback.onLayoutBuiltAfter&&this.helper.executeCallback.call(this,this.options.callback.onLayoutBuiltAfter,[this.node,this.query,this.result])
},buildBackdropLayout:function(){this.options.backdrop&&(this.backdrop.container||(this.backdrop.css=a.extend({opacity:.6,filter:"alpha(opacity=60)",position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":1040,"background-color":"#000"},this.options.backdrop),this.backdrop.container=a("<div/>",{"class":this.options.selector.backdrop,css:this.backdrop.css}).insertAfter(this.container)),this.container.addClass("backdrop").css({"z-index":this.backdrop.css["z-index"]+1,position:"relative"}))},buildHintLayout:function(b){if(this.options.hint){var c=this,d="",b=b||this.result,e=this.query.toLowerCase();
if(this.options.accent&&(e=this.helper.removeAccent.call(this,e)),this.hintIndex=null,this.query.length>=this.options.minLength){if(this.hint.container||(this.hint.css=a.extend({"border-color":"transparent",position:"absolute",top:0,display:"inline","z-index":-1,"float":"none",color:"silver","box-shadow":"none",cursor:"default","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},this.options.hint),this.hint.container=a("<input/>",{type:this.node.attr("type"),"class":this.node.attr("class"),readonly:!0,unselectable:"on",tabindex:-1,click:function(){c.node.focus()
}}).addClass(this.options.selector.hint).css(this.hint.css).insertAfter(this.node),this.node.parent().css({position:"relative"})),this.hint.container.css("color",this.hint.css.color),e)for(var f,g,h,i=0;i<b.length;i++){g=b[i].group,f=this.options.source[g].display||this.options.display;for(var j=0;j<f.length;j++)if(h=String(b[i][f[j]]).toLowerCase(),this.options.accent&&(h=this.helper.removeAccent.call(this,h)),0===h.indexOf(e)){d=String(b[i][f[j]]),this.hintIndex=i;break}if(null!==this.hintIndex)break}this.hint.container.val(d.length>0&&this.rawQuery+d.substring(this.query.length)||"")
}}},buildDropdownLayout:function(){function f(a){"*"===a.value?delete this.filters.dropdown:this.filters.dropdown=a,this.container.removeClass("filter").find("."+this.options.selector.filterValue).html(a.display||a.value),this.node.trigger("dynamic"+c),this.node.focus()}if(this.options.dropdownFilter){var d,b=this;if("boolean"==typeof this.options.dropdownFilter)d="all";else if("string"==typeof this.options.dropdownFilter)d=this.options.dropdownFilter;else if(this.options.dropdownFilter instanceof Array)for(var e=0;e<this.options.dropdownFilter.length;e++)if("*"===this.options.dropdownFilter[e].value&&this.options.dropdownFilter[e].display){d=this.options.dropdownFilter[e].display;
break}a("<span/>",{"class":this.options.selector.filter,html:function(){a(this).append(a("<button/>",{type:"button","class":b.options.selector.filterButton,html:"<span class='"+b.options.selector.filterValue+"'>"+d+"</span> <span class='"+b.options.selector.dropdownCaret+"'></span>",click:function(a){a.stopPropagation(),b.container.toggleClass("filter")}})),a(this).append(a("<ul/>",{"class":b.options.selector.dropdown,html:function(){var c=b.options.dropdownFilter;if(~["string","boolean"].indexOf(typeof b.options.dropdownFilter)){c=[];
for(var d in b.options.source)b.options.source.hasOwnProperty(d)&&c.push({key:"group",value:d});c.push({key:"group",value:"*",display:"string"==typeof b.options.dropdownFilter&&b.options.dropdownFilter||"All"})}for(var e=0;e<c.length;e++)!function(c,d,e){return!d.key&&"*"!==d.value||!d.value?(b.options.debug&&(h.log({node:b.node.selector,"function":"buildDropdownLayout()",arguments:JSON.stringify(d),message:'WARNING - Missing key or value, skipping dropdown filter."'}),h.print()),void 0):("*"===d.value&&a(e).append(a("<li/>",{"class":"divider"})),a(e).append(a("<li/>",{html:a("<a/>",{href:"javascript:;",html:d.display||d.value,click:function(a){a.preventDefault(),f.apply(b,[d])
}})})),void 0)}(e,c[e],this)}}))}}).insertAfter(b.container.find("."+b.options.selector.query))}},dynamicFilter:{validate:function(a){var b,e,c=null,d=null;for(var f in this.filters.dynamic)if(this.filters.dynamic.hasOwnProperty(f)&&(e=~f.indexOf(".")?this.helper.namespace(f,a,"get"):a[f],"|"!==this.filters.dynamic[f].modifier||c||(c=e==this.filters.dynamic[f].value||!1),"&"===this.filters.dynamic[f].modifier)){if(e!=this.filters.dynamic[f].value){d=!1;break}d=!0}return b=c,null!==d&&(b=d,d===!0&&null!==c&&(b=c)),!!b
},set:function(a,b){var c=a.match(/^([|&])?(.+)/);b?this.filters.dynamic[c[2]]={modifier:c[1]||"|",value:b}:delete this.filters.dynamic[c[2]],this.searchResult(),this.buildLayout()},bind:function(){if(this.options.dynamicFilter)for(var d,b=this,e=0;e<this.options.dynamicFilter.length;e++)d=this.options.dynamicFilter[e],"string"==typeof d.selector&&(d.selector=a(d.selector)),d.selector instanceof jQuery&&d.selector[0]&&d.key?!function(a){a.selector.off(c).on("change"+c,function(){b.dynamicFilter.set.apply(b,[a.key,b.dynamicFilter.getValue(this)])
}).trigger("change"+c)}(d):this.options.debug&&(h.log({node:this.node.selector,"function":"buildDynamicLayout()",message:'Invalid jQuery selector or jQuery Object for "filter.selector" or missing filter.key'}),h.print())},getValue:function(a){var b;return"SELECT"===a.tagName?b=a.value:"INPUT"===a.tagName&&("checkbox"===a.type?b=a.checked||null:"radio"===a.type&&a.checked&&(b=a.value)),b}},showLayout:function(){if(!this.container.hasClass("result")&&(this.result.length||this.options.emptyTemplate||this.options.backdropOnFocus)){var b=this;
a("html").off(c).one("click"+c+" touchstart"+c,function(){b.hideLayout()}),this.container.addClass([this.result.length||this.options.emptyTemplate&&this.query.length>=this.options.minLength?"result ":"",this.options.hint&&this.query.length>=this.options.minLength?"hint":"",this.options.backdrop||this.options.backdropOnFocus?"backdrop":""].join(" ")),this.helper.executeCallback.call(this,this.options.callback.onShowLayout,[this.node,this.query])}},hideLayout:function(){this.container.removeClass("result hint filter"+(this.options.backdropOnFocus&&a(this.node).is(":focus")?"":" backdrop")),this.options.backdropOnFocus&&this.container.hasClass("backdrop")||(a("html").off(c),this.helper.executeCallback.call(this,this.options.callback.onHideLayout,[this.node,this.query]))
},resetLayout:function(){this.result={},this.resultCount=0,this.resultItemCount=0,this.resultContainer&&this.resultContainer.html(""),this.options.hint&&this.hint.container&&this.hint.container.val("")},__construct:function(){this.extendOptions(),this.unifySourceFormat()&&(this.init(),this.delegateEvents(),this.buildDropdownLayout(),this.dynamicFilter.bind.apply(this),this.helper.executeCallback.call(this,this.options.callback.onReady,[this.node]))},helper:{isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;
return!0},removeAccent:function(a){if("string"==typeof a){var b=this.options.accent||d;return a=a.toLowerCase().replace(new RegExp("["+b.from+"]","g"),function(a){return b.to[b.from.indexOf(a)]})}},slugify:function(a){return a=String(a),""!==a&&(a=this.helper.removeAccent.call(this,a),a=a.replace(/[^-a-z0-9]+/g,"-").replace(/-+/g,"-").trim("-")),a},sort:function(a,b,c){var d=function(b){for(var d=0;d<a.length;d++)if("undefined"!=typeof b[a[d]])return c(b[a[d]]);return b};return b=[-1,1][+!!b],function(a,c){return a=d(a),c=d(c),b*((a>c)-(c>a))
}},replaceAt:function(a,b,c,d){return a.substring(0,b)+d+a.substring(b+c)},highlight:function(a,b,c){a=String(a);var d=c&&this.helper.removeAccent.call(this,a)||a,e=[];b instanceof Array||(b=[b]),b.sort(function(a,b){return b.length-a.length});for(var f=b.length-1;f>=0;f--)""!==b[f].trim()?b[f]=b[f].replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):b.splice(f,1);d.replace(new RegExp("(?:"+b.join("|")+")(?!([^<]+)?>)","gi"),function(a,b,c){e.push({offset:c,length:a.length})});for(var f=e.length-1;f>=0;f--)a=this.helper.replaceAt(a,e[f].offset,e[f].length,"<strong>"+a.substr(e[f].offset,e[f].length)+"</strong>");
return a},getCaret:function(a){if(a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();if(null==b)return 0;var c=a.createTextRange(),d=c.duplicate();return c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),d.text.length}return 0},executeCallback:function(a,b){if(!a)return!1;var c;if("function"==typeof a)c=a;else if(("string"==typeof a||a instanceof Array)&&("string"==typeof a&&(a=[a,[]]),c=this.helper.namespace(a[0],window),"function"!=typeof c))return this.options.debug&&(h.log({node:this.selector,"function":"executeCallback()",arguments:JSON.stringify(a),message:'WARNING - Invalid callback function"'}),h.print()),!1;
return c.apply(this,(a[1]||[]).concat(b?b:[]))||!0},namespace:function(a,b,c,d){if("string"!=typeof a||""===a)return this.options.debug&&(h.log({node:_node.selector,"function":"namespace()",arguments:a,message:'ERROR - Missing namespaceString"'}),h.print()),!1;for(var e=a.split("."),f=b||window,c=c||"get",g=d||{},i="",j=0,k=e.length;k>j;j++){if(i=e[j],"undefined"==typeof f[i]){if(~["get","delete"].indexOf(c))return"undefined"!=typeof d?d:void 0;f[i]={}}if(~["set","create","delete"].indexOf(c)&&j===k-1){if("set"!==c&&"create"!==c)return delete f[i],!0;
f[i]=g}f=f[i]}return f},typeWatch:function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}()}},a.fn.typeahead=a.typeahead=function(a){return g.typeahead(this,a)};var g={typeahead:function(b,c){if(!c||!c.source||"object"!=typeof c.source)return h.log({node:b.selector||c&&c.input,"function":"$.typeahead()",arguments:JSON.stringify(c&&c.source||""),message:'Undefined "options" or "options.source" or invalid source type - Typeahead dropped'}),h.print(),void 0;if("function"==typeof b){if(!c.input)return h.log({node:b.selector,"function":"$.typeahead()",message:'Undefined "options.input" - Typeahead dropped'}),h.print(),void 0;
b=a(c.input)}if(!b.length||"INPUT"!==b[0].nodeName)return h.log({node:b.selector,"function":"$.typeahead()",arguments:JSON.stringify(c.input),message:"Unable to find jQuery input element - Typeahead dropped"}),h.print(),void 0;for(var d,e=0;e<b.length;e++)d=1===b.length?b:a(b.selector.split(",")[e].trim()),window.Typeahead[d.selector||c.input]=new f(d,c)}},h={table:{},log:function(b){b.message&&"string"==typeof b.message&&(this.table[b.message]=a.extend({node:"","function":"",arguments:""},b))},print:function(){!f.prototype.helper.isEmpty(this.table)&&console&&console.table&&((void 0!==console.group||void 0!==console.table)&&(console.groupCollapsed("--- jQuery Typeahead Debug ---"),console.table(this.table),console.groupEnd()),this.table={})
}};h.log({message:"WARNING - You are using the DEBUG version. Use /dist/jquery.typeahead.min.js in production."}),h.print(),"sanitize"in String.prototype||(String.prototype.sanitize=function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return this.replace(/[&<>"'\/]/g,function(b){return a[b]})}),window.console=window.console||{log:function(){}},"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){void 0===b&&(b=0),0>b&&(b+=this.length),0>b&&(b=0);
for(var c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1}),Object.keys||(Object.keys=function(a){var c,b=[];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b})}),ed.define("cropper",["edjquery"],function(){!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){"use strict";function ib(a){return"number"==typeof a&&!isNaN(a)}function jb(a){return"undefined"==typeof a}function kb(a,b){var c=[];
return ib(b)&&c.push(b),c.slice.apply(a,c)}function lb(a,b){var c=kb(arguments,2);return function(){return a.apply(b,c.concat(kb(arguments)))}}function mb(a){var b=a.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return b&&(b[1]!==d.protocol||b[2]!==d.hostname||b[3]!==d.port)}function nb(a){var b="timestamp="+(new Date).getTime();return a+(-1===a.indexOf("?")?"?":"&")+b}function ob(a){return a?' crossOrigin="'+a+'"':""}function pb(a,b){var c;return a.naturalWidth?b(a.naturalWidth,a.naturalHeight):(c=document.createElement("img"),c.onload=function(){b(this.width,this.height)
},c.src=a.src,void 0)}function qb(a){var b=[],c=a.rotate,d=a.scaleX,e=a.scaleY;return ib(c)&&b.push("rotate("+c+"deg)"),ib(d)&&ib(e)&&b.push("scale("+d+","+e+")"),b.length?b.join(" "):"none"}function rb(a,b){var j,k,c=bb(a.degree)%180,d=(c>90?180-c:c)*Math.PI/180,e=cb(d),f=db(d),g=a.width,h=a.height,i=a.aspectRatio;return b?(j=g/(f+e/i),k=j/i):(j=g*f+h*e,k=g*e+h*f),{width:j,height:k}}function sb(b,c){var r,s,t,d=a("<canvas>")[0],e=d.getContext("2d"),f=0,g=0,h=c.naturalWidth,i=c.naturalHeight,j=c.rotate,k=c.scaleX,l=c.scaleY,m=ib(k)&&ib(l)&&(1!==k||1!==l),n=ib(j)&&0!==j,o=n||m,p=h,q=i;
return m&&(r=h/2,s=i/2),n&&(t=rb({width:h,height:i,degree:j}),p=t.width,q=t.height,r=t.width/2,s=t.height/2),d.width=p,d.height=q,o&&(f=-h/2,g=-i/2,e.save(),e.translate(r,s)),n&&e.rotate(j*Math.PI/180),m&&e.scale(k,l),e.drawImage(b,gb(f),gb(g),gb(h),gb(i)),o&&e.restore(),d}function tb(b){var c=b.length,d=0,e=0;return c&&(a.each(b,function(a,b){d+=b.pageX,e+=b.pageY}),d/=c,e/=c),{pageX:d,pageY:e}}function ub(a,b,c){var e,d="";for(e=b,c+=b;c>e;e++)d+=hb(a.getUint8(e));return d}function vb(a){var d,e,f,h,i,j,k,l,m,n,b=new g(a),c=b.byteLength;
if(255===b.getUint8(0)&&216===b.getUint8(1))for(m=2;c>m;){if(255===b.getUint8(m)&&225===b.getUint8(m+1)){k=m;break}m++}if(k&&(e=k+4,f=k+10,"Exif"===ub(b,e,4)&&(j=b.getUint16(f),i=18761===j,(i||19789===j)&&42===b.getUint16(f+2,i)&&(h=b.getUint32(f+4,i),h>=8&&(l=f+h)))),l)for(c=b.getUint16(l,i),n=0;c>n;n++)if(m=l+12*n+2,274===b.getUint16(m,i)){m+=8,d=b.getUint16(m,i),b.setUint16(m,1,i);break}return d}function wb(a){var i,b=a.replace(I,""),c=atob(b),d=c.length,g=new e(d),h=new f(g);for(i=0;d>i;i++)h[i]=c.charCodeAt(i);
return g}function xb(a){var e,b=new f(a),c=b.length,d="";for(e=0;c>e;e++)d+=hb(b[e]);return"data:image/jpeg;base64,"+h(d)}function yb(b,c){this.$element=a(b),this.options=a.extend({},yb.DEFAULTS,a.isPlainObject(c)&&c),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var b=a(window),c=a(document),d=window.location,e=window.ArrayBuffer,f=window.Uint8Array,g=window.DataView,h=window.btoa,i="cropper",j="cropper-modal",k="cropper-hide",l="cropper-hidden",m="cropper-invisible",n="cropper-move",o="cropper-crop",p="cropper-disabled",q="cropper-bg",r="mousedown touchstart pointerdown MSPointerDown",s="mousemove touchmove pointermove MSPointerMove",t="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",u="wheel mousewheel DOMMouseScroll",v="dblclick",w="load."+i,x="error."+i,y="resize."+i,z="build."+i,A="built."+i,B="cropstart."+i,C="cropmove."+i,D="cropend."+i,E="crop."+i,F="zoom."+i,G=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,H=/^data\:/,I=/^data\:([^\;]+)\;base64,/,J=/^data\:image\/jpeg.*;base64,/,K="preview",L="action",M="e",N="w",O="s",P="n",Q="se",R="sw",S="ne",T="nw",U="all",V="crop",W="move",X="zoom",Y="none",Z=a.isFunction(a("<canvas>")[0].getContext),$=Number,_=Math.min,ab=Math.max,bb=Math.abs,cb=Math.sin,db=Math.cos,eb=Math.sqrt,fb=Math.round,gb=Math.floor,hb=String.fromCharCode;
yb.prototype={constructor:yb,init:function(){var b,a=this.$element;if(a.is("img")){if(this.isImg=!0,this.originalUrl=b=a.attr("src"),!b)return;b=a.prop("src")}else a.is("canvas")&&Z&&(b=a[0].toDataURL());this.load(b)},trigger:function(b,c){var d=a.Event(b,c);return this.$element.trigger(d),d},load:function(b){var f,g,c=this.options,d=this.$element;if(b&&(d.one(z,c.build),!this.trigger(z).isDefaultPrevented())){if(this.url=b,this.image={},!c.checkOrientation||!e)return this.clone();if(f=a.proxy(this.read,this),H.test(b))return J.test(b)?f(wb(b)):this.clone();
g=new XMLHttpRequest,g.onerror=g.onabort=a.proxy(function(){this.clone()},this),g.onload=function(){f(this.response)},g.open("get",b),g.responseType="arraybuffer",g.send()}},read:function(a){var e,f,g,b=this.options,c=vb(a),d=this.image;if(c>1)switch(this.url=xb(a),c){case 2:f=-1;break;case 3:e=-180;break;case 4:g=-1;break;case 5:e=90,g=-1;break;case 6:e=90;break;case 7:e=90,f=-1;break;case 8:e=-90}b.rotatable&&(d.rotate=e),b.scalable&&(d.scaleX=f,d.scaleY=g),this.clone()},clone:function(){var f,g,b=this.options,c=this.$element,d=this.url,e="";
b.checkCrossOrigin&&mb(d)&&(e=c.prop("crossOrigin"),e?f=d:(e="anonymous",f=nb(d))),this.crossOrigin=e,this.crossOriginUrl=f,this.$clone=g=a("<img"+ob(e)+' src="'+(f||d)+'">'),this.isImg?c[0].complete?this.start():c.one(w,a.proxy(this.start,this)):g.one(w,a.proxy(this.start,this)).one(x,a.proxy(this.stop,this)).addClass(k).insertAfter(c)},start:function(){var b=this.$element,c=this.$clone;this.isImg||(c.off(x,this.stop),b=c),pb(b[0],a.proxy(function(b,c){a.extend(this.image,{naturalWidth:b,naturalHeight:c,aspectRatio:b/c}),this.isLoaded=!0,this.build()
},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var e,f,g,b=this.options,c=this.$element,d=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=c.parent(),this.$cropper=e=a(yb.TEMPLATE),this.$canvas=e.find(".cropper-canvas").append(d),this.$dragBox=e.find(".cropper-drag-box"),this.$cropBox=f=e.find(".cropper-crop-box"),this.$viewBox=e.find(".cropper-view-box"),this.$face=g=f.find(".cropper-face"),c.addClass(l).after(e),this.isImg||d.removeClass(k),this.initPreview(),this.bind(),b.aspectRatio=ab(0,b.aspectRatio)||0/0,b.viewMode=ab(0,_(3,fb(b.viewMode)))||0,b.autoCrop?(this.isCropped=!0,b.modal&&this.$dragBox.addClass(j)):f.addClass(l),b.guides||f.find(".cropper-dashed").addClass(l),b.center||f.find(".cropper-center").addClass(l),b.cropBoxMovable&&g.addClass(n).data(L,U),b.highlight||g.addClass(m),b.background&&e.addClass(q),b.cropBoxResizable||f.find(".cropper-line, .cropper-point").addClass(l),this.setDragMode(b.dragMode),this.render(),this.isBuilt=!0,this.setData(b.data),c.one(A,b.built),setTimeout(a.proxy(function(){this.trigger(A),this.isCompleted=!0
},this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()
},initContainer:function(){var a=this.options,b=this.$element,c=this.$container,d=this.$cropper;d.addClass(l),b.removeClass(l),d.css(this.container={width:ab(c.width(),$(a.minContainerWidth)||200),height:ab(c.height(),$(a.minContainerHeight)||100)}),b.addClass(l),d.removeClass(l)},initCanvas:function(){var o,b=this.options.viewMode,c=this.container,d=c.width,e=c.height,f=this.image,g=f.naturalWidth,h=f.naturalHeight,i=90===bb(f.rotate),j=i?h:g,k=i?g:h,l=j/k,m=d,n=e;e*l>d?3===b?m=e*l:n=d/l:3===b?n=d/l:m=e*l,o={naturalWidth:j,naturalHeight:k,aspectRatio:l,width:m,height:n},o.oldLeft=o.left=(d-m)/2,o.oldTop=o.top=(e-n)/2,this.canvas=o,this.isLimited=1===b||2===b,this.limitCanvas(!0,!0),this.initialImage=a.extend({},f),this.initialCanvas=a.extend({},o)
},limitCanvas:function(a,b){var l,m,n,o,c=this.options,d=c.viewMode,e=this.container,f=e.width,g=e.height,h=this.canvas,i=h.aspectRatio,j=this.cropBox,k=this.isCropped&&j;a&&(l=$(c.minCanvasWidth)||0,m=$(c.minCanvasHeight)||0,d&&(d>1?(l=ab(l,f),m=ab(m,g),3===d&&(m*i>l?l=m*i:m=l/i)):l?l=ab(l,k?j.width:0):m?m=ab(m,k?j.height:0):k&&(l=j.width,m=j.height,m*i>l?l=m*i:m=l/i)),l&&m?m*i>l?m=l/i:l=m*i:l?m=l/i:m&&(l=m*i),h.minWidth=l,h.minHeight=m,h.maxWidth=1/0,h.maxHeight=1/0),b&&(d?(n=f-h.width,o=g-h.height,h.minLeft=_(0,n),h.minTop=_(0,o),h.maxLeft=ab(0,n),h.maxTop=ab(0,o),k&&this.isLimited&&(h.minLeft=_(j.left,j.left+j.width-h.width),h.minTop=_(j.top,j.top+j.height-h.height),h.maxLeft=j.left,h.maxTop=j.top,2===d&&(h.width>=f&&(h.minLeft=_(0,n),h.maxLeft=ab(0,n)),h.height>=g&&(h.minTop=_(0,o),h.maxTop=ab(0,o))))):(h.minLeft=-h.width,h.minTop=-h.height,h.maxLeft=f,h.maxTop=g))
},renderCanvas:function(a){var g,h,b=this.canvas,c=this.image,d=c.rotate,e=c.naturalWidth,f=c.naturalHeight;this.isRotated&&(this.isRotated=!1,h=rb({width:c.width,height:c.height,degree:d}),g=h.width/h.height,g!==b.aspectRatio&&(b.left-=(h.width-b.width)/2,b.top-=(h.height-b.height)/2,b.width=h.width,b.height=h.height,b.aspectRatio=g,b.naturalWidth=e,b.naturalHeight=f,d%180&&(h=rb({width:e,height:f,degree:d}),b.naturalWidth=h.width,b.naturalHeight=h.height),this.limitCanvas(!0,!1))),(b.width>b.maxWidth||b.width<b.minWidth)&&(b.left=b.oldLeft),(b.height>b.maxHeight||b.height<b.minHeight)&&(b.top=b.oldTop),b.width=_(ab(b.width,b.minWidth),b.maxWidth),b.height=_(ab(b.height,b.minHeight),b.maxHeight),this.limitCanvas(!1,!0),b.oldLeft=b.left=_(ab(b.left,b.minLeft),b.maxLeft),b.oldTop=b.top=_(ab(b.top,b.minTop),b.maxTop),this.$canvas.css({width:b.width,height:b.height,left:b.left,top:b.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),a&&this.output()
},renderImage:function(b){var e,c=this.canvas,d=this.image;d.rotate&&(e=rb({width:c.width,height:c.height,degree:d.rotate,aspectRatio:d.aspectRatio},!0)),a.extend(d,e?{width:e.width,height:e.height,left:(c.width-e.width)/2,top:(c.height-e.height)/2}:{width:c.width,height:c.height,left:0,top:0}),this.$clone.css({width:d.width,height:d.height,marginLeft:d.left,marginTop:d.top,transform:qb(d)}),b&&this.output()},initCropBox:function(){var b=this.options,c=this.canvas,d=b.aspectRatio,e=$(b.autoCropArea)||.8,f={width:c.width,height:c.height};
d&&(c.height*d>c.width?f.height=f.width/d:f.width=f.height*d),this.cropBox=f,this.limitCropBox(!0,!0),f.width=_(ab(f.width,f.minWidth),f.maxWidth),f.height=_(ab(f.height,f.minHeight),f.maxHeight),f.width=ab(f.minWidth,f.width*e),f.height=ab(f.minHeight,f.height*e),f.oldLeft=f.left=c.left+(c.width-f.width)/2,f.oldTop=f.top=c.top+(c.height-f.height)/2,this.initialCropBox=a.extend({},f)},limitCropBox:function(a,b){var k,l,m,n,c=this.options,d=c.aspectRatio,e=this.container,f=e.width,g=e.height,h=this.canvas,i=this.cropBox,j=this.isLimited;
a&&(k=$(c.minCropBoxWidth)||0,l=$(c.minCropBoxHeight)||0,k=_(k,f),l=_(l,g),m=_(f,j?h.width:f),n=_(g,j?h.height:g),d&&(k&&l?l*d>k?l=k/d:k=l*d:k?l=k/d:l&&(k=l*d),n*d>m?n=m/d:m=n*d),i.minWidth=_(k,m),i.minHeight=_(l,n),i.maxWidth=m,i.maxHeight=n),b&&(j?(i.minLeft=ab(0,h.left),i.minTop=ab(0,h.top),i.maxLeft=_(f,h.left+h.width)-i.width,i.maxTop=_(g,h.top+h.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=f-i.width,i.maxTop=g-i.height))},renderCropBox:function(){var a=this.options,b=this.container,c=b.width,d=b.height,e=this.cropBox;
(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=_(ab(e.width,e.minWidth),e.maxWidth),e.height=_(ab(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.oldLeft=e.left=_(ab(e.left,e.minLeft),e.maxLeft),e.oldTop=e.top=_(ab(e.top,e.minTop),e.maxTop),a.movable&&a.cropBoxMovable&&this.$face.data(L,e.width===c&&e.height===d?W:U),this.$cropBox.css({width:e.width,height:e.height,left:e.left,top:e.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()
},output:function(){this.preview(),this.isCompleted?this.trigger(E,this.getData()):this.isBuilt||this.$element.one(A,a.proxy(function(){this.trigger(E,this.getData())},this))},initPreview:function(){var b=ob(this.crossOrigin),c=b?this.crossOriginUrl:this.url;this.$preview=a(this.options.preview),this.$viewBox.html("<img"+b+' src="'+c+'">'),this.$preview.each(function(){var d=a(this);d.data(K,{width:d.width(),height:d.height(),html:d.html()}),d.html("<img"+b+' src="'+c+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')
})},resetPreview:function(){this.$preview.each(function(){var b=a(this),c=b.data(K);b.css({width:c.width,height:c.height}).html(c.html).removeData(K)})},preview:function(){var b=this.image,c=this.canvas,d=this.cropBox,e=d.width,f=d.height,g=b.width,h=b.height,i=d.left-c.left-b.left,j=d.top-c.top-b.top;this.isCropped&&!this.isDisabled&&(this.$viewBox.find("img").css({width:g,height:h,marginLeft:-i,marginTop:-j,transform:qb(b)}),this.$preview.each(function(){var c=a(this),d=c.data(K),k=d.width,l=d.height,m=k,n=l,o=1;
e&&(o=k/e,n=f*o),f&&n>l&&(o=l/f,m=e*o,n=l),c.css({width:m,height:n}).find("img").css({width:g*o,height:h*o,marginLeft:-i*o,marginTop:-j*o,transform:qb(b)})}))},bind:function(){var d=this.options,e=this.$element,f=this.$cropper;a.isFunction(d.cropstart)&&e.on(B,d.cropstart),a.isFunction(d.cropmove)&&e.on(C,d.cropmove),a.isFunction(d.cropend)&&e.on(D,d.cropend),a.isFunction(d.crop)&&e.on(E,d.crop),a.isFunction(d.zoom)&&e.on(F,d.zoom),f.on(r,a.proxy(this.cropStart,this)),d.zoomable&&d.zoomOnWheel&&f.on(u,a.proxy(this.wheel,this)),d.toggleDragModeOnDblclick&&f.on(v,a.proxy(this.dblclick,this)),c.on(s,this._cropMove=lb(this.cropMove,this)).on(t,this._cropEnd=lb(this.cropEnd,this)),d.responsive&&b.on(y,this._resize=lb(this.resize,this))
},unbind:function(){var d=this.options,e=this.$element,f=this.$cropper;a.isFunction(d.cropstart)&&e.off(B,d.cropstart),a.isFunction(d.cropmove)&&e.off(C,d.cropmove),a.isFunction(d.cropend)&&e.off(D,d.cropend),a.isFunction(d.crop)&&e.off(E,d.crop),a.isFunction(d.zoom)&&e.off(F,d.zoom),f.off(r,this.cropStart),d.zoomable&&d.zoomOnWheel&&f.off(u,this.wheel),d.toggleDragModeOnDblclick&&f.off(v,this.dblclick),c.off(s,this._cropMove).off(t,this._cropEnd),d.responsive&&b.off(y,this._resize)},resize:function(){var e,f,g,b=this.options.restore,c=this.$container,d=this.container;
!this.isDisabled&&d&&(g=c.width()/d.width,(1!==g||c.height()!==d.height)&&(b&&(e=this.getCanvasData(),f=this.getCropBoxData()),this.render(),b&&(this.setCanvasData(a.each(e,function(a,b){e[a]=b*g})),this.setCropBoxData(a.each(f,function(a,b){f[a]=b*g})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(o)?this.setDragMode(W):this.setDragMode(V))},wheel:function(b){var c=b.originalEvent||b,d=$(this.options.wheelZoomRatio)||.1,e=1;this.isDisabled||(b.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(a.proxy(function(){this.wheeling=!1
},this),50),c.deltaY?e=c.deltaY>0?1:-1:c.wheelDelta?e=-c.wheelDelta/120:c.detail&&(e=c.detail>0?1:-1),this.zoom(-e*d,b)))},cropStart:function(b){var g,h,c=this.options,d=b.originalEvent,e=d&&d.touches,f=b;if(!this.isDisabled){if(e){if(g=e.length,g>1){if(!c.zoomable||!c.zoomOnTouch||2!==g)return;f=e[1],this.startX2=f.pageX,this.startY2=f.pageY,h=X}f=e[0]}if(h=h||a(f.target).data(L),G.test(h)){if(this.trigger(B,{originalEvent:d,action:h}).isDefaultPrevented())return;b.preventDefault(),this.action=h,this.cropping=!1,this.startX=f.pageX||d&&d.pageX,this.startY=f.pageY||d&&d.pageY,h===V&&(this.cropping=!0,this.$dragBox.addClass(j))
}}},cropMove:function(a){var g,b=this.options,c=a.originalEvent,d=c&&c.touches,e=a,f=this.action;if(!this.isDisabled){if(d){if(g=d.length,g>1){if(!b.zoomable||!b.zoomOnTouch||2!==g)return;e=d[1],this.endX2=e.pageX,this.endY2=e.pageY}e=d[0]}if(f){if(this.trigger(C,{originalEvent:c,action:f}).isDefaultPrevented())return;a.preventDefault(),this.endX=e.pageX||c&&c.pageX,this.endY=e.pageY||c&&c.pageY,this.change(e.shiftKey,f===X?a:null)}}},cropEnd:function(a){var b=a.originalEvent,c=this.action;this.isDisabled||c&&(a.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(j,this.isCropped&&this.options.modal)),this.action="",this.trigger(D,{originalEvent:b,action:c}))
},change:function(a,b){var u,v,c=this.options,d=c.aspectRatio,e=this.action,f=this.container,g=this.canvas,h=this.cropBox,i=h.width,j=h.height,k=h.left,m=h.top,n=k+i,o=m+j,p=0,q=0,r=f.width,s=f.height,t=!0;switch(!d&&a&&(d=i&&j?i/j:1),this.limited&&(p=h.minLeft,q=h.minTop,r=p+_(f.width,g.width),s=q+_(f.height,g.height)),v={x:this.endX-this.startX,y:this.endY-this.startY},d&&(v.X=v.y*d,v.Y=v.x/d),e){case U:k+=v.x,m+=v.y;break;case M:if(v.x>=0&&(n>=r||d&&(q>=m||o>=s))){t=!1;break}i+=v.x,d&&(j=i/d,m-=v.Y/2),0>i&&(e=N,i=0);
break;case P:if(v.y<=0&&(q>=m||d&&(p>=k||n>=r))){t=!1;break}j-=v.y,m+=v.y,d&&(i=j*d,k+=v.X/2),0>j&&(e=O,j=0);break;case N:if(v.x<=0&&(p>=k||d&&(q>=m||o>=s))){t=!1;break}i-=v.x,k+=v.x,d&&(j=i/d,m+=v.Y/2),0>i&&(e=M,i=0);break;case O:if(v.y>=0&&(o>=s||d&&(p>=k||n>=r))){t=!1;break}j+=v.y,d&&(i=j*d,k-=v.X/2),0>j&&(e=P,j=0);break;case S:if(d){if(v.y<=0&&(q>=m||n>=r)){t=!1;break}j-=v.y,m+=v.y,i=j*d}else v.x>=0?r>n?i+=v.x:v.y<=0&&q>=m&&(t=!1):i+=v.x,v.y<=0?m>q&&(j-=v.y,m+=v.y):(j-=v.y,m+=v.y);0>i&&0>j?(e=R,j=0,i=0):0>i?(e=T,i=0):0>j&&(e=Q,j=0);
break;case T:if(d){if(v.y<=0&&(q>=m||p>=k)){t=!1;break}j-=v.y,m+=v.y,i=j*d,k+=v.X}else v.x<=0?k>p?(i-=v.x,k+=v.x):v.y<=0&&q>=m&&(t=!1):(i-=v.x,k+=v.x),v.y<=0?m>q&&(j-=v.y,m+=v.y):(j-=v.y,m+=v.y);0>i&&0>j?(e=Q,j=0,i=0):0>i?(e=S,i=0):0>j&&(e=R,j=0);break;case R:if(d){if(v.x<=0&&(p>=k||o>=s)){t=!1;break}i-=v.x,k+=v.x,j=i/d}else v.x<=0?k>p?(i-=v.x,k+=v.x):v.y>=0&&o>=s&&(t=!1):(i-=v.x,k+=v.x),v.y>=0?s>o&&(j+=v.y):j+=v.y;0>i&&0>j?(e=S,j=0,i=0):0>i?(e=Q,i=0):0>j&&(e=T,j=0);break;case Q:if(d){if(v.x>=0&&(n>=r||o>=s)){t=!1;
break}i+=v.x,j=i/d}else v.x>=0?r>n?i+=v.x:v.y>=0&&o>=s&&(t=!1):i+=v.x,v.y>=0?s>o&&(j+=v.y):j+=v.y;0>i&&0>j?(e=T,j=0,i=0):0>i?(e=R,i=0):0>j&&(e=S,j=0);break;case W:this.move(v.x,v.y),t=!1;break;case X:this.zoom(function(a,b,c,d){var e=eb(a*a+b*b),f=eb(c*c+d*d);return(f-e)/e}(bb(this.startX-this.startX2),bb(this.startY-this.startY2),bb(this.endX-this.endX2),bb(this.endY-this.endY2)),b),this.startX2=this.endX2,this.startY2=this.endY2,t=!1;break;case V:if(!v.x||!v.y){t=!1;break}u=this.$cropper.offset(),k=this.startX-u.left,m=this.startY-u.top,i=h.minWidth,j=h.minHeight,v.x>0?e=v.y>0?Q:S:v.x<0&&(k-=i,e=v.y>0?R:T),v.y<0&&(m-=j),this.isCropped||(this.$cropBox.removeClass(l),this.isCropped=!0,this.limited&&this.limitCropBox(!0,!0))
}t&&(h.width=i,h.height=j,h.left=k,h.top=m,this.action=e,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(j),this.$cropBox.removeClass(l)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=a.extend({},this.initialImage),this.canvas=a.extend({},this.initialCanvas),this.cropBox=a.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())
},clear:function(){this.isCropped&&!this.isDisabled&&(a.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(j),this.$cropBox.addClass(l))},replace:function(a){!this.isDisabled&&a&&(this.isImg&&(this.isReplaced=!0,this.$element.attr("src",a)),this.options.data=null,this.load(a))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(p))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(p))
},destroy:function(){var a=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&a.attr("src",this.originalUrl),this.unbuild(),a.removeClass(l)):this.isImg?a.off(w,this.start):this.$clone&&this.$clone.remove(),a.removeData(i)},move:function(a,b){var c=this.canvas;this.moveTo(jb(a)?a:c.left+$(a),jb(b)?b:c.top+$(b))},moveTo:function(a,b){var c=this.canvas,d=!1;jb(b)&&(b=a),a=$(a),b=$(b),this.isBuilt&&!this.isDisabled&&this.options.movable&&(ib(a)&&(c.left=a,d=!0),ib(b)&&(c.top=b,d=!0),d&&this.renderCanvas(!0))
},zoom:function(a,b){var c=this.canvas;a=$(a),a=0>a?1/(1-a):1+a,this.zoomTo(c.width*a/c.naturalWidth,b)},zoomTo:function(a,b){var i,j,k,l,m,c=this.options,d=this.canvas,e=d.width,f=d.height,g=d.naturalWidth,h=d.naturalHeight;if(a=$(a),a>=0&&this.isBuilt&&!this.isDisabled&&c.zoomable){if(j=g*a,k=h*a,b&&(i=b.originalEvent),this.trigger(F,{originalEvent:i,oldRatio:e/g,ratio:j/g}).isDefaultPrevented())return;i?(l=this.$cropper.offset(),m=i.touches?tb(i.touches):{pageX:b.pageX||i.pageX||0,pageY:b.pageY||i.pageY||0},d.left-=(j-e)*((m.pageX-l.left-d.left)/e),d.top-=(k-f)*((m.pageY-l.top-d.top)/f)):(d.left-=(j-e)/2,d.top-=(k-f)/2),d.width=j,d.height=k,this.renderCanvas(!0)
}},rotate:function(a){this.rotateTo((this.image.rotate||0)+$(a))},rotateTo:function(a){a=$(a),ib(a)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=a%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(a,b){var c=this.image,d=!1;jb(b)&&(b=a),a=$(a),b=$(b),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(ib(a)&&(c.scaleX=a,d=!0),ib(b)&&(c.scaleY=b,d=!0),d&&this.renderImage(!0))},scaleX:function(a){var b=this.image.scaleY;this.scale(a,ib(b)?b:1)},scaleY:function(a){var b=this.image.scaleX;
this.scale(ib(b)?b:1,a)},getData:function(b){var g,h,c=this.options,d=this.image,e=this.canvas,f=this.cropBox;return this.isBuilt&&this.isCropped?(h={x:f.left-e.left,y:f.top-e.top,width:f.width,height:f.height},g=d.width/d.naturalWidth,a.each(h,function(a,c){c/=g,h[a]=b?fb(c):c})):h={x:0,y:0,width:0,height:0},c.rotatable&&(h.rotate=d.rotate||0),c.scalable&&(h.scaleX=d.scaleX||1,h.scaleY=d.scaleY||1),h},setData:function(b){var g,h,i,c=this.options,d=this.image,e=this.canvas,f={};a.isFunction(b)&&(b=b.call(this.element)),this.isBuilt&&!this.isDisabled&&a.isPlainObject(b)&&(c.rotatable&&ib(b.rotate)&&b.rotate!==d.rotate&&(d.rotate=b.rotate,this.isRotated=g=!0),c.scalable&&(ib(b.scaleX)&&b.scaleX!==d.scaleX&&(d.scaleX=b.scaleX,h=!0),ib(b.scaleY)&&b.scaleY!==d.scaleY&&(d.scaleY=b.scaleY,h=!0)),g?this.renderCanvas():h&&this.renderImage(),i=d.width/d.naturalWidth,ib(b.x)&&(f.left=b.x*i+e.left),ib(b.y)&&(f.top=b.y*i+e.top),ib(b.width)&&(f.width=b.width*i),ib(b.height)&&(f.height=b.height*i),this.setCropBoxData(f))
},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var b=this.canvas,c={};return this.isBuilt&&a.each(["left","top","width","height","naturalWidth","naturalHeight"],function(a,d){c[d]=b[d]}),c},setCanvasData:function(b){var c=this.canvas,d=c.aspectRatio;a.isFunction(b)&&(b=b.call(this.$element)),this.isBuilt&&!this.isDisabled&&a.isPlainObject(b)&&(ib(b.left)&&(c.left=b.left),ib(b.top)&&(c.top=b.top),ib(b.width)?(c.width=b.width,c.height=b.width/d):ib(b.height)&&(c.height=b.height,c.width=b.height*d),this.renderCanvas(!0))
},getCropBoxData:function(){var b,a=this.cropBox;return this.isBuilt&&this.isCropped&&(b={left:a.left,top:a.top,width:a.width,height:a.height}),b||{}},setCropBoxData:function(b){var e,f,c=this.cropBox,d=this.options.aspectRatio;a.isFunction(b)&&(b=b.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&a.isPlainObject(b)&&(ib(b.left)&&(c.left=b.left),ib(b.top)&&(c.top=b.top),ib(b.width)&&(e=!0,c.width=b.width),ib(b.height)&&(f=!0,c.height=b.height),d&&(e?c.height=c.width/d:f&&(c.width=c.height*d)),this.renderCropBox())
},getCroppedCanvas:function(b){var c,d,e,f,g,h,i,j,k,l,m;return this.isBuilt&&this.isCropped&&Z?(a.isPlainObject(b)||(b={}),m=this.getData(),c=m.width,d=m.height,j=c/d,a.isPlainObject(b)&&(g=b.width,h=b.height,g?(h=g/j,i=g/c):h&&(g=h*j,i=h/d)),e=gb(g||c),f=gb(h||d),k=a("<canvas>")[0],k.width=e,k.height=f,l=k.getContext("2d"),b.fillColor&&(l.fillStyle=b.fillColor,l.fillRect(0,0,e,f)),l.drawImage.apply(l,function(){var j,k,l,n,o,p,a=sb(this.$clone[0],this.image),b=a.width,e=a.height,f=[a],g=m.x,h=m.y;return-c>=g||g>b?g=j=l=o=0:0>=g?(l=-g,g=0,j=o=_(b,c+g)):b>=g&&(l=0,j=o=_(c,b-g)),0>=j||-d>=h||h>e?h=k=n=p=0:0>=h?(n=-h,h=0,k=p=_(e,d+h)):e>=h&&(n=0,k=p=_(d,e-h)),f.push(gb(g),gb(h),gb(j),gb(k)),i&&(l*=i,n*=i,o*=i,p*=i),o>0&&p>0&&f.push(gb(l),gb(n),gb(o),gb(p)),f
}.call(this)),k):void 0},setAspectRatio:function(a){var b=this.options;this.isDisabled||jb(a)||(b.aspectRatio=ab(0,a)||0/0,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(a){var c,d,b=this.options;this.isLoaded&&!this.isDisabled&&(c=a===V,d=b.movable&&a===W,a=c||d?a:Y,this.$dragBox.data(L,a).toggleClass(o,c).toggleClass(n,d),b.cropBoxMovable||this.$face.data(L,a).toggleClass(o,c).toggleClass(n,d))}},yb.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:0/0,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},yb.setDefaults=function(b){a.extend(yb.DEFAULTS,b)
},yb.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',yb.other=a.fn.cropper,a.fn.cropper=function(b){var d,c=kb(arguments,1);
return this.each(function(){var g,h,e=a(this),f=e.data(i);if(!f){if(/destroy/.test(b))return;g=a.extend({},e.data(),a.isPlainObject(b)&&b),e.data(i,f=new yb(this,g))}"string"==typeof b&&a.isFunction(h=f[b])&&(d=h.apply(f,c))}),jb(d)?this:d},a.fn.cropper.Constructor=yb,a.fn.cropper.setDefaults=yb.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=yb.other,this}})}),ed.define("site/vendors/gmaps",["edjquery"],function(a){"use strict";var b=function(a,b){var c;if(a===b)return a;for(c in b)void 0!==b[c]&&(a[c]=b[c]);
return a},d=function(a,b){var f,c=Array.prototype.slice.call(arguments,2),d=[],e=a.length;if(Array.prototype.map&&a.map===Array.prototype.map)d=Array.prototype.map.call(a,function(a){var d=c.slice(0);return d.splice(0,0,a),b.apply(this,d)});else for(f=0;e>f;f++)callback_params=c,callback_params.splice(0,0,a[f]),d.push(b.apply(this,callback_params));return d},f=function(a){var c,b=[];for(c=0;c<a.length;c++)b=b.concat(a[c]);return b},g=function(a,b){var c=a[0],d=a[1];return b&&(c=a[1],d=a[0]),new google.maps.LatLng(c,d)
},h=function(a,b){var c;for(c=0;c<a.length;c++)a[c]instanceof google.maps.LatLng||(a[c]=a[c].length>0&&"object"==typeof a[c][0]?h(a[c],b):g(a[c],b));return a},i=function(b,c){var d,e=b.replace(".","");return d="jQuery"in this&&c?a("."+e,c)[0]:document.getElementsByClassName(e)[0]},j=function(b,c){var d,b=b.replace("#","");return d="jQuery"in window&&c?a("#"+b,c)[0]:document.getElementById(b)},k=function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},l=function(){var c=document,d=function(a){if("object"!=typeof window.google||!window.google.maps)return"object"==typeof window.console&&window.console.error&&console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js."),function(){};
if(!this)return new d(a);a.zoom=a.zoom||15,a.mapType=a.mapType||"roadmap";var g,e=function(a,b){return void 0===a?b:a},f=this,h=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],l=["mousemove","mouseout","mouseover"],m=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],n=a.el||a.div,o=a.markerClusterer,p=google.maps.MapTypeId[a.mapType.toUpperCase()],q=new google.maps.LatLng(a.lat,a.lng),r=e(a.zoomControl,!0),s=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},t=s.style||"DEFAULT",u=s.position||"TOP_LEFT",v=e(a.panControl,!0),w=e(a.mapTypeControl,!0),x=e(a.scaleControl,!0),y=e(a.streetViewControl,!0),z=e(z,!0),A={},B={zoom:this.zoom,center:q,mapTypeId:p},C={panControl:v,zoomControl:r,zoomControlOptions:{style:google.maps.ZoomControlStyle[t],position:google.maps.ControlPosition[u]},mapTypeControl:w,scaleControl:x,streetViewControl:y,overviewMapControl:z};
if(this.el="string"==typeof a.el||"string"==typeof a.div?n.indexOf("#")>-1?j(n,a.context):i.apply(this,[n,a.context]):n,"undefined"==typeof this.el||null===this.el)throw"No element defined.";for(window.context_menu=window.context_menu||{},window.context_menu[f.el.id]={},this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=a.zoom,this.registered_events={},this.el.style.width=a.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight,google.maps.visualRefresh=a.enableNewStyle,g=0;g<m.length;g++)delete a[m[g]];
for(1!=a.disableDefaultUI&&(B=b(B,C)),A=b(B,a),g=0;g<h.length;g++)delete A[h[g]];for(g=0;g<l.length;g++)delete A[l[g]];this.map=new google.maps.Map(this.el,A),o&&(this.markerClusterer=o.apply(this,[this.map]));var D=function(a,b){var c="",d=window.context_menu[f.el.id][a];for(var e in d)if(d.hasOwnProperty(e)){var g=d[e];c+='<li><a id="'+a+"_"+e+'" href="#">'+g.title+"</a></li>"}if(j("gmaps_context_menu")){var h=j("gmaps_context_menu");h.innerHTML=c;var e,i=h.getElementsByTagName("a"),l=i.length;for(e=0;l>e;e++){var m=i[e],n=function(c){c.preventDefault(),d[this.id.replace(a+"_","")].action.apply(f,[b]),f.hideContextMenu()
};google.maps.event.clearListeners(m,"click"),google.maps.event.addDomListenerOnce(m,"click",n,!1)}var o=k.apply(this,[f.el]),p=o[0]+b.pixel.x-15,q=o[1]+b.pixel.y-15;h.style.left=p+"px",h.style.top=q+"px"}};this.buildContextMenu=function(a,b){if("marker"===a){b.pixel={};var c=new google.maps.OverlayView;c.setMap(f.map),c.draw=function(){var d=c.getProjection(),e=b.marker.getPosition();b.pixel=d.fromLatLngToContainerPixel(e),D(a,b)}}else D(a,b);var d=j("gmaps_context_menu");setTimeout(function(){d.style.display="block"
},0)},this.setContextMenu=function(a){window.context_menu[f.el.id][a.control]={};var b,d=c.createElement("ul");for(b in a.options)if(a.options.hasOwnProperty(b)){var e=a.options[b];window.context_menu[f.el.id][a.control][e.name]={title:e.title,action:e.action}}d.id="gmaps_context_menu",d.style.display="none",d.style.position="absolute",d.style.minWidth="100px",d.style.background="white",d.style.listStyle="none",d.style.padding="8px",d.style.boxShadow="2px 2px 6px #ccc",j("gmaps_context_menu")||c.body.appendChild(d);
var g=j("gmaps_context_menu");google.maps.event.addDomListener(g,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){g.style.display="none"},400)},!1)},this.hideContextMenu=function(){var a=j("gmaps_context_menu");a&&(a.style.display="none")};var E=function(b,c){google.maps.event.addListener(b,c,function(b){void 0==b&&(b=this),a[c].apply(this,[b]),f.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var F=0;F<h.length;F++){var G=h[F];
G in a&&E(this.map,G)}for(var F=0;F<l.length;F++){var G=l[F];G in a&&E(this.map,G)}google.maps.event.addListener(this.map,"rightclick",function(b){a.rightclick&&a.rightclick.apply(this,[b]),void 0!=window.context_menu[f.el.id].map&&f.buildContextMenu("map",b)}),this.refresh=function(){google.maps.event.trigger(this.map,"resize")},this.fitZoom=function(){var c,a=[],b=this.markers.length;for(c=0;b>c;c++)"boolean"==typeof this.markers[c].visible&&this.markers[c].visible&&a.push(this.markers[c].getPosition());this.fitLatLngBounds(a)
},this.fitLatLngBounds=function(a){var d,b=a.length,c=new google.maps.LatLngBounds;for(d=0;b>d;d++)c.extend(a[d]);this.map.fitBounds(c)},this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b)),c&&c()},this.getElement=function(){return this.el},this.zoomIn=function(a){a=a||1,this.zoom=this.map.getZoom()+a,this.map.setZoom(this.zoom)},this.zoomOut=function(a){a=a||1,this.zoom=this.map.getZoom()-a,this.map.setZoom(this.zoom)};var I,H=[];for(I in this.map)"function"!=typeof this.map[I]||this[I]||H.push(I);
for(g=0;g<H.length;g++)!function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}}(this,this.map,H[g])};return d}(this);l.prototype.createControl=function(a){var b=document.createElement("div");b.style.cursor="pointer",a.disableDefaultStyles!==!0&&(b.style.fontFamily="Roboto, Arial, sans-serif",b.style.fontSize="11px",b.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px");for(var c in a.style)b.style[c]=a.style[c];a.id&&(b.id=a.id),a.title&&(b.title=a.title),a.classes&&(b.className=a.classes),a.content&&("string"==typeof a.content?b.innerHTML=a.content:a.content instanceof HTMLElement&&b.appendChild(a.content)),a.position&&(b.position=google.maps.ControlPosition[a.position.toUpperCase()]);
for(var d in a.events)!function(b,c){google.maps.event.addDomListener(b,c,function(){a.events[c].apply(this,[this])})}(b,d);return b.index=1,b},l.prototype.addControl=function(a){var b=this.createControl(a);return this.controls.push(b),this.map.controls[b.position].push(b),b},l.prototype.removeControl=function(a){var c,b=null;for(c=0;c<this.controls.length;c++)this.controls[c]==a&&(b=this.controls[c].position,this.controls.splice(c,1));if(b)for(c=0;c<this.map.controls.length;c++){var d=this.map.controls[a.position];
if(d.getAt(c)==a){d.removeAt(c);break}}return a},l.prototype.createMarker=function(a){if(void 0==a.lat&&void 0==a.lng&&void 0==a.position)throw"No latitude or longitude defined.";var c=this,d=a.details,e=a.fences,f=a.outside,g={position:new google.maps.LatLng(a.lat,a.lng),map:null},h=b(g,a);delete h.lat,delete h.lng,delete h.fences,delete h.outside;var i=new google.maps.Marker(h);if(i.fences=e,a.infoWindow){i.infoWindow=new google.maps.InfoWindow(a.infoWindow);for(var j=["closeclick","content_changed","domready","position_changed","zindex_changed"],k=0;k<j.length;k++)!function(b,c){a.infoWindow[c]&&google.maps.event.addListener(b,c,function(b){a.infoWindow[c].apply(this,[b])
})}(i.infoWindow,j[k])}for(var l=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],m=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],k=0;k<l.length;k++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this,[this])})}(i,l[k]);for(var k=0;k<m.length;k++)!function(b,c,d){a[d]&&google.maps.event.addListener(c,d,function(c){c.pixel||(c.pixel=b.getProjection().fromLatLngToPoint(c.latLng)),a[d].apply(this,[c])
})}(this.map,i,m[k]);return google.maps.event.addListener(i,"click",function(){this.details=d,a.click&&a.click.apply(this,[this]),i.infoWindow&&(c.hideInfoWindows(),i.infoWindow.open(c.map,i))}),google.maps.event.addListener(i,"rightclick",function(b){b.marker=this,a.rightclick&&a.rightclick.apply(this,[b]),void 0!=window.context_menu[c.el.id].marker&&c.buildContextMenu("marker",b)}),i.fences&&google.maps.event.addListener(i,"dragend",function(){c.checkMarkerGeofence(i,function(a,b){f(a,b)})}),i},l.prototype.addMarker=function(a){var b;
if(a.hasOwnProperty("gm_accessors_"))b=a;else{if(!(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position))throw"No latitude or longitude defined.";b=this.createMarker(a)}return b.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(b),this.markers.push(b),l.fire("marker_added",b,this),b},l.prototype.addMarkers=function(a){for(var c,b=0;c=a[b];b++)this.addMarker(c);return this.markers},l.prototype.hideInfoWindows=function(){for(var b,a=0;b=this.markers[a];a++)b.infoWindow&&b.infoWindow.close()
},l.prototype.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===a){this.markers[b].setMap(null),this.markers.splice(b,1),this.markerClusterer&&this.markerClusterer.removeMarker(a),l.fire("marker_removed",a,this);break}return a},l.prototype.removeMarkers=function(a){var b=[];if("undefined"==typeof a){for(var c=0;c<this.markers.length;c++){var d=this.markers[c];d.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(d),l.fire("marker_removed",d,this)}this.markers=b
}else{for(var c=0;c<a.length;c++){var e=this.markers.indexOf(a[c]);if(e>-1){var d=this.markers[e];d.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(d),l.fire("marker_removed",d,this)}}for(var c=0;c<this.markers.length;c++){var d=this.markers[c];null!=d.getMap()&&b.push(d)}this.markers=b}},l.prototype.drawOverlay=function(a){var b=new google.maps.OverlayView,c=!0;return b.setMap(this.map),null!=a.auto_show&&(c=a.auto_show),b.onAdd=function(){var c=document.createElement("div");c.style.borderStyle="none",c.style.borderWidth="0px",c.style.position="absolute",c.style.zIndex=100,c.innerHTML=a.content,b.el=c,a.layer||(a.layer="overlayLayer");
var d=this.getPanes(),e=d[a.layer],f=["contextmenu","DOMMouseScroll","dblclick","mousedown"];e.appendChild(c);for(var g=0;g<f.length;g++)!function(a,b){google.maps.event.addDomListener(a,b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()})}(c,f[g]);a.click&&(d.overlayMouseTarget.appendChild(b.el),google.maps.event.addDomListener(b.el,"click",function(){a.click.apply(b,[b])})),google.maps.event.trigger(this,"ready")},b.draw=function(){var d=this.getProjection(),e=d.fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));
a.horizontalOffset=a.horizontalOffset||0,a.verticalOffset=a.verticalOffset||0;var f=b.el,g=f.children[0],h=g.clientHeight,i=g.clientWidth;switch(a.verticalAlign){case"top":f.style.top=e.y-h+a.verticalOffset+"px";break;default:case"middle":f.style.top=e.y-h/2+a.verticalOffset+"px";break;case"bottom":f.style.top=e.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case"left":f.style.left=e.x-i+a.horizontalOffset+"px";break;default:case"center":f.style.left=e.x-i/2+a.horizontalOffset+"px";break;case"right":f.style.left=e.x+a.horizontalOffset+"px"
}f.style.display=c?"block":"none",c||a.show.apply(this,[f])},b.onRemove=function(){var c=b.el;a.remove?a.remove.apply(this,[c]):(b.el.parentNode.removeChild(b.el),b.el=null)},this.overlays.push(b),b},l.prototype.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null),this.overlays.splice(b,1);break}},l.prototype.removeOverlays=function(){for(var b,a=0;b=this.overlays[a];a++)b.setMap(null);this.overlays=[]},l.prototype.drawPolyline=function(a){var b=[],c=a.path;
if(c.length)if(void 0===c[0][0])b=c;else for(var e,d=0;e=c[d];d++)b.push(new google.maps.LatLng(e[0],e[1]));var f={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(f.clickable=a.clickable),a.hasOwnProperty("editable")&&(f.editable=a.editable),a.hasOwnProperty("icons")&&(f.icons=a.icons),a.hasOwnProperty("zIndex")&&(f.zIndex=a.zIndex);for(var g=new google.maps.Polyline(f),h=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],i=0;i<h.length;i++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])
})}(g,h[i]);return this.polylines.push(g),l.fire("polyline_added",g,this),g},l.prototype.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===a){this.polylines[b].setMap(null),this.polylines.splice(b,1),l.fire("polyline_removed",a,this);break}},l.prototype.removePolylines=function(){for(var b,a=0;b=this.polylines[a];a++)b.setMap(null);this.polylines=[]},l.prototype.drawCircle=function(a){a=b({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a),delete a.lat,delete a.lng;
for(var c=new google.maps.Circle(a),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],e=0;e<d.length;e++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(c,d[e]);return this.polygons.push(c),c},l.prototype.drawRectangle=function(a){a=b({map:this.map},a);var c=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));a.bounds=c;for(var d=new google.maps.Rectangle(a),e=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],f=0;f<e.length;f++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])
})}(d,e[f]);return this.polygons.push(d),d},l.prototype.drawPolygon=function(a){var c=!1;a.hasOwnProperty("useGeoJSON")&&(c=a.useGeoJSON),delete a.useGeoJSON,a=b({map:this.map},a),0==c&&(a.paths=[a.paths.slice(0)]),a.paths.length>0&&a.paths[0].length>0&&(a.paths=f(d(a.paths,h,c)));for(var e=new google.maps.Polygon(a),g=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],i=0;i<g.length;i++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])
})}(e,g[i]);return this.polygons.push(e),l.fire("polygon_added",e,this),e},l.prototype.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null),this.polygons.splice(b,1),l.fire("polygon_removed",a,this);break}},l.prototype.removePolygons=function(){for(var b,a=0;b=this.polygons[a];a++)b.setMap(null);this.polygons=[]},l.prototype.getFromFusionTables=function(a){var b=a.events;delete a.events;var c=a,d=new google.maps.FusionTablesLayer(c);for(var e in b)!function(a,c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])
})}(d,e);return this.layers.push(d),d},l.prototype.loadFromFusionTables=function(a){var b=this.getFromFusionTables(a);return b.setMap(this.map),b},l.prototype.getFromKML=function(a){var b=a.url,c=a.events;delete a.url,delete a.events;var d=a,e=new google.maps.KmlLayer(b,d);for(var f in c)!function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])})}(e,f);return this.layers.push(e),e},l.prototype.loadFromKML=function(a){var b=this.getFromKML(a);return b.setMap(this.map),b},l.prototype.addLayer=function(a,b){b=b||{};
var c;switch(a){case"weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer,c.setTag(b.filter),delete b.filter,b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a),delete b.click
});break;case"places":if(this.singleLayers.places=c=new google.maps.places.PlacesService(this.map),b.search||b.nearbySearch||b.radarSearch){var d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.radarSearch&&c.radarSearch(d,b.radarSearch),b.search&&c.search(d,b.search),b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)}if(b.textSearch){var e={bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null};
c.textSearch(e,b.textSearch)}}return void 0!==c?("function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c):void 0},l.prototype.removeLayer=function(a){if("string"==typeof a&&void 0!==this.singleLayers[a])this.singleLayers[a].setMap(null),delete this.singleLayers[a];else for(var b=0;b<this.layers.length;b++)if(this.layers[b]===a){this.layers[b].setMap(null),this.layers.splice(b,1);break}};var m,n;return l.prototype.getRoutes=function(a){switch(a.travelMode){case"bicycling":m=google.maps.TravelMode.BICYCLING;
break;case"transit":m=google.maps.TravelMode.TRANSIT;break;case"driving":m=google.maps.TravelMode.DRIVING;break;default:m=google.maps.TravelMode.WALKING}n="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var c={avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},d=b(c,a);d.origin=/string/.test(typeof a.origin)?a.origin:new google.maps.LatLng(a.origin[0],a.origin[1]),d.destination=/string/.test(typeof a.destination)?a.destination:new google.maps.LatLng(a.destination[0],a.destination[1]),d.travelMode=m,d.unitSystem=n,delete d.callback,delete d.error;
var e=this,f=new google.maps.DirectionsService;f.route(d,function(b,c){if(c===google.maps.DirectionsStatus.OK){for(var d in b.routes)b.routes.hasOwnProperty(d)&&e.routes.push(b.routes[d]);a.callback&&a.callback(e.routes,b,c)}else a.error&&a.error(b,c)})},l.prototype.removeRoutes=function(){this.routes.length=0},l.prototype.getElevations=function(a){a=b({locations:[],path:!1,samples:256},a),a.locations.length>0&&a.locations[0].length>0&&(a.locations=f(d([a.locations],h,!1)));var c=a.callback;delete a.callback;
var e=new google.maps.ElevationService;if(a.path){var g={path:a.locations,samples:a.samples};e.getElevationAlongPath(g,function(a,b){c&&"function"==typeof c&&c(a,b)})}else delete a.path,delete a.samples,e.getElevationForLocations(a,function(a,b){c&&"function"==typeof c&&c(a,b)})},l.prototype.cleanRoute=l.prototype.removePolylines,l.prototype.renderRoute=function(a,c){var f,e="string"==typeof c.panel?document.getElementById(c.panel.replace("#","")):c.panel;c.panel=e,c=b({map:this.map},c),f=new google.maps.DirectionsRenderer(c),this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,avoidHighways:a.avoidHighways,avoidTolls:a.avoidTolls,optimizeWaypoints:a.optimizeWaypoints,callback:function(a,b,c){c===google.maps.DirectionsStatus.OK&&f.setDirections(b)
}})},l.prototype.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,avoidHighways:a.avoidHighways,avoidTolls:a.avoidTolls,optimizeWaypoints:a.optimizeWaypoints,callback:function(c){if(c.length>0){var d={path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(d.icons=a.icons),b.drawPolyline(d),a.callback&&a.callback(c[c.length-1])
}}})},l.prototype.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,callback:function(b){if(b.length>0&&a.start&&a.start(b[b.length-1]),b.length>0&&a.step){var c=b[b.length-1];if(c.legs.length>0)for(var f,d=c.legs[0].steps,e=0;f=d[e];e++)f.step_number=e,a.step(f,c.legs[0].steps.length-1)}b.length>0&&a.end&&a.end(b[b.length-1])}});else if(a.route&&a.route.legs.length>0)for(var d,b=a.route.legs[0].steps,c=0;d=b[c];c++)d.step_number=c,a.step(d)
},l.prototype.drawSteppedRoute=function(a){var b=this;if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,error:a.error,callback:function(c){if(c.length>0&&a.start&&a.start(c[c.length-1]),c.length>0&&a.step){var d=c[c.length-1];if(d.legs.length>0)for(var g,e=d.legs[0].steps,f=0;g=e[f];f++){g.step_number=f;var h={path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(h.icons=a.icons),b.drawPolyline(h),a.step(g,d.legs[0].steps.length-1)
}}c.length>0&&a.end&&a.end(c[c.length-1])}});else if(a.route&&a.route.legs.length>0)for(var e,c=a.route.legs[0].steps,d=0;e=c[d];d++){e.step_number=d;var f={path:e.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(f.icons=a.icons),b.drawPolyline(f),a.step(e)}},l.Route=function(a){this.origin=a.origin,this.destination=a.destination,this.waypoints=a.waypoints,this.map=a.map,this.route=a.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length;
var b={path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(b.icons=a.icons),this.polyline=this.map.drawPolyline(b).getPath()},l.Route.prototype.getRoute=function(a){var b=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:a.travelMode,waypoints:this.waypoints||[],error:a.error,callback:function(){b.route=e[0],a.callback&&a.callback.call(b)}})},l.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;
var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.pop()}},l.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}},l.prototype.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))},l.prototype.checkMarkerGeofence=function(a,b){if(a.fences)for(var d,c=0;d=a.fences[c];c++){var e=a.getPosition();
this.checkGeofence(e.lat(),e.lng(),d)||b(a,d)}},l.prototype.toImage=function(a){var a=a||{},b={};if(b.size=a.size||[this.el.clientWidth,this.el.clientHeight],b.lat=this.getCenter().lat(),b.lng=this.getCenter().lng(),this.markers.length>0){b.markers=[];for(var c=0;c<this.markers.length;c++)b.markers.push({lat:this.markers[c].getPosition().lat(),lng:this.markers[c].getPosition().lng()})}if(this.polylines.length>0){var d=this.polylines[0];b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(d.getPath()),b.polyline.strokeColor=d.strokeColor,b.polyline.strokeOpacity=d.strokeOpacity,b.polyline.strokeWeight=d.strokeWeight
}return l.staticMapURL(b)},l.staticMapURL=function(a){function t(a,b){if("#"===a[0]&&(a=a.replace("#","0x"),b)){if(b=parseFloat(b),b=Math.min(1,Math.max(b,0)),0===b)return"0x00000000";b=(255*b).toString(16),1===b.length&&(b+=b),a=a.slice(0,8)+b}return a}var c,b=[],d=("file:"===location.protocol?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";a.url&&(d=a.url,delete a.url),d+="?";var e=a.markers;delete a.markers,!e&&a.marker&&(e=[a.marker],delete a.marker);var f=a.styles;delete a.styles;var g=a.polyline;
if(delete a.polyline,a.center)b.push("center="+a.center),delete a.center;else if(a.address)b.push("center="+a.address),delete a.address;else if(a.lat)b.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var h=encodeURI(a.visible.join("|"));b.push("visible="+h)}var i=a.size;i?(i.join&&(i=i.join("x")),delete a.size):i="630x300",b.push("size="+i),a.zoom||a.zoom===!1||(a.zoom=15);var j=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor,b.push("sensor="+j);for(var k in a)a.hasOwnProperty(k)&&b.push(k+"="+a[k]);
if(e)for(var l,m,n=0;c=e[n];n++){l=[],c.size&&"normal"!==c.size?(l.push("size:"+c.size),delete c.size):c.icon&&(l.push("icon:"+encodeURI(c.icon)),delete c.icon),c.color&&(l.push("color:"+c.color.replace("#","0x")),delete c.color),c.label&&(l.push("label:"+c.label[0].toUpperCase()),delete c.label),m=c.address?c.address:c.lat+","+c.lng,delete c.address,delete c.lat,delete c.lng;for(var k in c)c.hasOwnProperty(k)&&l.push(k+":"+c[k]);l.length||0===n?(l.push(m),l=l.join("|"),b.push("markers="+encodeURI(l))):(l=b.pop()+encodeURI("|"+m),b.push(l))
}if(f)for(var n=0;n<f.length;n++){var o=[];f[n].featureType&&o.push("feature:"+f[n].featureType.toLowerCase()),f[n].elementType&&o.push("element:"+f[n].elementType.toLowerCase());for(var p=0;p<f[n].stylers.length;p++)for(var q in f[n].stylers[p]){var r=f[n].stylers[p][q];("hue"==q||"color"==q)&&(r="0x"+r.substring(1)),o.push(q+":"+r)}var s=o.join("|");""!=s&&b.push("style="+s)}if(g){if(c=g,g=[],c.strokeWeight&&g.push("weight:"+parseInt(c.strokeWeight,10)),c.strokeColor){var u=t(c.strokeColor,c.strokeOpacity);
g.push("color:"+u)}if(c.fillColor){var v=t(c.fillColor,c.fillOpacity);g.push("fillcolor:"+v)}var w=c.path;if(w.join)for(var x,p=0;x=w[p];p++)g.push(x.join(","));else g.push("enc:"+w);g=g.join("|"),b.push("path="+encodeURI(g))}var y=window.devicePixelRatio||1;return b.push("scale="+y),b=b.join("&"),d+b},l.prototype.addMapType=function(a,b){if(!b.hasOwnProperty("getTileUrl")||"function"!=typeof b.getTileUrl)throw"'getTileUrl' function required.";b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);
this.map.mapTypes.set(a,c)},l.prototype.addOverlayMapType=function(a){if(!a.hasOwnProperty("getTile")||"function"!=typeof a.getTile)throw"'getTile' function required.";var b=a.index;delete a.index,this.map.overlayMapTypes.insertAt(b,a)},l.prototype.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)},l.prototype.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,{name:a.styledMapName});this.map.mapTypes.set(a.mapTypeId,b)},l.prototype.setStyle=function(a){this.map.setMapTypeId(a)
},l.prototype.createPanorama=function(a){return a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng()),this.panorama=l.createPanorama(a),this.map.setStreetView(this.panorama),this.panorama},l.createPanorama=function(a){var c=j(a.el,a.context);a.position=new google.maps.LatLng(a.lat,a.lng),delete a.el,delete a.context,delete a.lat,delete a.lng;for(var d=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],e=b({visible:!0},a),f=0;f<d.length;f++)delete e[d[f]];
for(var g=new google.maps.StreetViewPanorama(c,e),f=0;f<d.length;f++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this)})}(g,d[f]);return g},l.prototype.on=function(a,b){return l.on(a,this,b)},l.prototype.off=function(a){l.off(a,this)},l.prototype.once=function(a,b){return l.once(a,this,b)},l.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],l.on=function(a,b,c){if(-1==l.custom_events.indexOf(a))return b instanceof l&&(b=b.map),google.maps.event.addListener(b,a,c);
var d={handler:c,eventName:a};return b.registered_events[a]=b.registered_events[a]||[],b.registered_events[a].push(d),d},l.off=function(a,b){-1==l.custom_events.indexOf(a)?(b instanceof l&&(b=b.map),google.maps.event.clearListeners(b,a)):b.registered_events[a]=[]},l.once=function(a,b,c){return-1==l.custom_events.indexOf(a)?(b instanceof l&&(b=b.map),google.maps.event.addListenerOnce(b,a,c)):void 0},l.fire=function(a,b,c){if(-1==l.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));
else if(a in c.registered_events)for(var d=c.registered_events[a],e=0;e<d.length;e++)!function(a,b,c){a.apply(b,[c])}(d[e].handler,c,b)},l.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c),b&&b()},function(c){a.error(c),b&&b()},a.options):(a.not_supported(),b&&b())},l.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng)),delete a.lat,delete a.lng,delete a.callback,this.geocoder.geocode(a,function(a,c){b(a,c)
})},"object"==typeof window.google&&window.google.maps&&(google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(){for(var d,b=new google.maps.LatLngBounds,c=this.getPaths(),e=0;e<c.getLength();e++){d=c.getAt(e);for(var f=0;f<d.getLength();f++)b.extend(d.getAt(f))}return b}),google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var c=!1,d=this.getPaths().getLength(),e=0;d>e;e++)for(var f=this.getPaths().getAt(e),g=f.getLength(),h=g-1,i=0;g>i;i++){var j=f.getAt(i),k=f.getAt(h);
(j.lng()<a.lng()&&k.lng()>=a.lng()||k.lng()<a.lng()&&j.lng()>=a.lng())&&j.lat()+(a.lng()-j.lng())/(k.lng()-j.lng())*(k.lat()-j.lat())<a.lat()&&(c=!c),h=i}return c}),google.maps.Circle.prototype.containsLatLng||(google.maps.Circle.prototype.containsLatLng=function(a){return google.maps.geometry?google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),a)<=this.getRadius():!0}),google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)},google.maps.Marker.prototype.setFences=function(a){this.fences=a
},google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)},google.maps.Marker.prototype.getId=function(){return this.__gm_id}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1
}),l}),ed.define("historyjs",["edjquery"],function(a){var b=a;!function(a,c){"use strict";a.EDHistory=a.EDHistory||{};if("undefined"!=typeof EDHistory.Adapter)throw new Error("EDHistory.js Adapter has already been loaded...");EDHistory.Adapter={bind:function(a,c,d){b(a).bind(c,d)},trigger:function(a,c,d){b(a).trigger(c,d)},extractEventData:function(a,b,d){var e=b&&b.originalEvent&&b.originalEvent[a]||d&&d[a]||c;return e},onDomLoad:function(a){b(a)}},"undefined"!=typeof EDHistory.init&&EDHistory.init()}(window),function(a){"use strict";
var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.EDHistory=a.EDHistory||{};if("undefined"!=typeof EDHistory.initHtml4)throw new Error("EDHistory.js HTML4 Support has already been loaded...");EDHistory.initHtml4=function(){return"undefined"!=typeof EDHistory.initHtml4.initialized?!1:(EDHistory.initHtml4.initialized=!0,EDHistory.enabled=!0,EDHistory.savedHashes=[],EDHistory.isLastHash=function(a){var c,b=EDHistory.getHashByIndex();return c=a===b},EDHistory.saveHash=function(a){return EDHistory.isLastHash(a)?!1:(EDHistory.savedHashes.push(a),!0)
},EDHistory.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?EDHistory.savedHashes[EDHistory.savedHashes.length-1]:0>a?EDHistory.savedHashes[EDHistory.savedHashes.length+a]:EDHistory.savedHashes[a]},EDHistory.discardedHashes={},EDHistory.discardedStates={},EDHistory.discardState=function(a,b,c){var e,d=EDHistory.getHashByState(a);return e={discardedState:a,backState:c,forwardState:b},EDHistory.discardedStates[d]=e,!0},EDHistory.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};
return EDHistory.discardedHashes[a]=d,!0},EDHistory.discardedState=function(a){var c,b=EDHistory.getHashByState(a);return c=EDHistory.discardedStates[b]||!1},EDHistory.discardedHash=function(a){var b=EDHistory.discardedHashes[a]||!1;return b},EDHistory.recycleState=function(a){var b=EDHistory.getHashByState(a);return EDHistory.discardedState(a)&&delete EDHistory.discardedStates[b],!0},EDHistory.emulated.hashChange&&(EDHistory.hashChangeInit=function(){EDHistory.checkerFunction=null;var d,e,g,h,b="";return EDHistory.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),g="",h=!1,EDHistory.checkerFunction=function(){if(h)return!1;
h=!0;var c=EDHistory.getHash()||"",d=EDHistory.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(g=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=EDHistory.escapeHash(c)),EDHistory.Adapter.trigger(a,"hashchange")):d!==g&&(g=d,EDHistory.setHash(d,!1)),h=!1,!0}):EDHistory.checkerFunction=function(){var c=EDHistory.getHash();return c!==b&&(b=c,EDHistory.Adapter.trigger(a,"hashchange")),!0},EDHistory.intervalList.push(f(EDHistory.checkerFunction,EDHistory.options.hashChangeInterval)),!0
},EDHistory.Adapter.onDomLoad(EDHistory.hashChangeInit)),EDHistory.emulated.pushState&&(EDHistory.onHashChange=function(b){var i,d=b&&b.newURL||c.location.href,e=EDHistory.getHashByUrl(d),f=null,g=null;return EDHistory.isLastHash(e)?(EDHistory.busy(!1),!1):(EDHistory.doubleCheckComplete(),EDHistory.saveHash(e),e&&EDHistory.isTraditionalAnchor(e)?(EDHistory.Adapter.trigger(a,"anchorchange"),EDHistory.busy(!1),!1):(f=EDHistory.extractState(EDHistory.getFullUrl(e||c.location.href,!1),!0),EDHistory.isLastSavedState(f)?(EDHistory.busy(!1),!1):(g=EDHistory.getHashByState(f),(i=EDHistory.discardedState(f))?(EDHistory.getHashByIndex(-2)===EDHistory.getHashByState(i.forwardState)?EDHistory.back(!1):EDHistory.forward(!1),!1):(EDHistory.pushState(f.data,f.title,f.url,!1),!0))))
},EDHistory.Adapter.bind(a,"hashchange",EDHistory.onHashChange),EDHistory.pushState=function(b,d,e,f){if(EDHistory.getHashByUrl(e))throw new Error("EDHistory.js does not support states with fragement-identifiers (hashes/anchors).");if(f!==!1&&EDHistory.busy())return EDHistory.pushQueue({scope:g,callback:EDHistory.pushState,args:arguments,queue:f}),!1;EDHistory.busy(!0);var h=EDHistory.createStateObject(b,d,e),i=EDHistory.getHashByState(h),j=EDHistory.getState(!1),k=EDHistory.getHashByState(j),l=EDHistory.getHash();
return EDHistory.storeState(h),EDHistory.expectedStateId=h.id,EDHistory.recycleState(h),EDHistory.setTitle(h),i===k?(EDHistory.busy(!1),!1):i!==l&&i!==EDHistory.getShortUrl(c.location.href)?(EDHistory.setHash(i,!1),!1):(EDHistory.saveState(h),EDHistory.Adapter.trigger(a,"statechange"),EDHistory.busy(!1),!0)},EDHistory.replaceState=function(a,b,c,d){if(EDHistory.getHashByUrl(c))throw new Error("EDHistory.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&EDHistory.busy())return EDHistory.pushQueue({scope:g,callback:EDHistory.replaceState,args:arguments,queue:d}),!1;
EDHistory.busy(!0);var e=EDHistory.createStateObject(a,b,c),f=EDHistory.getState(!1),h=EDHistory.getStateByIndex(-2);return EDHistory.discardState(f,e,h),EDHistory.pushState(e.data,e.title,e.url,!1),!0}),EDHistory.emulated.pushState&&EDHistory.getHash()&&!EDHistory.emulated.hashChange&&EDHistory.Adapter.onDomLoad(function(){EDHistory.Adapter.trigger(a,"hashchange")}),void 0)},"undefined"!=typeof EDHistory.init&&EDHistory.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.EDHistory=a.EDHistory||{},n=a.history;
if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof EDHistory.init)throw new Error("EDHistory.js Core has already been loaded...");EDHistory.init=function(){return"undefined"==typeof EDHistory.Adapter?!1:("undefined"!=typeof EDHistory.initCore&&EDHistory.initCore(),"undefined"!=typeof EDHistory.initHtml4&&EDHistory.initHtml4(),!0)},EDHistory.initCore=function(){if("undefined"!=typeof EDHistory.initCore.initialized)return!1;if(EDHistory.initCore.initialized=!0,EDHistory.options=EDHistory.options||{},EDHistory.options.hashChangeInterval=EDHistory.options.hashChangeInterval||100,EDHistory.options.safariPollInterval=EDHistory.options.safariPollInterval||500,EDHistory.options.doubleCheckInterval=EDHistory.options.doubleCheckInterval||500,EDHistory.options.storeInterval=EDHistory.options.storeInterval||1e3,EDHistory.options.busyDelay=EDHistory.options.busyDelay||250,EDHistory.options.debug=EDHistory.options.debug||!1,EDHistory.options.initialTitle=EDHistory.options.initialTitle||d.title,EDHistory.intervalList=[],EDHistory.clearAllIntervals=function(){var a,b=EDHistory.intervalList;
if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);EDHistory.intervalList=null}},EDHistory.debug=function(){EDHistory.options.debug&&EDHistory.log.apply(m,arguments)},EDHistory.log=function(){var e,f,g,h,i,a=!("undefined"==typeof c||"undefined"==typeof c.log||"undefined"==typeof c.log.apply),b=d.getElementById("log");for(a?(h=Array.prototype.slice.call(arguments),e=h.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n",f=1,g=arguments.length;g>f;++f){if(i=arguments[f],"object"==typeof i&&"undefined"!=typeof k)try{i=k.stringify(i)
}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},EDHistory.getInternetExplorerMajorVersion=function(){var a=EDHistory.getInternetExplorerMajorVersion.cached="undefined"!=typeof EDHistory.getInternetExplorerMajorVersion.cached?EDHistory.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a
},EDHistory.isInternetExplorer=function(){var a=EDHistory.isInternetExplorer.cached="undefined"!=typeof EDHistory.isInternetExplorer.cached?EDHistory.isInternetExplorer.cached:Boolean(EDHistory.getInternetExplorerMajorVersion());return a},EDHistory.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||EDHistory.isInternetExplorer()&&EDHistory.getInternetExplorerMajorVersion()<8)},EDHistory.enabled=!EDHistory.emulated.pushState,EDHistory.bugs={setHash:Boolean(!EDHistory.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!EDHistory.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(EDHistory.isInternetExplorer()&&EDHistory.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(EDHistory.isInternetExplorer()&&EDHistory.getInternetExplorerMajorVersion()<7)},EDHistory.isEmptyObject=function(a){for(var b in a)return!1;
return!0},EDHistory.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},EDHistory.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},EDHistory.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},EDHistory.getBaseUrl=function(){var a=EDHistory.getBaseHref()||EDHistory.getBasePageUrl()||EDHistory.getRootUrl();
return a},EDHistory.getPageUrl=function(){var c,a=EDHistory.getState(!1,!1),b=(a||{}).url||d.location.href;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},EDHistory.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},EDHistory.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?EDHistory.getRootUrl()+a.replace(/^\/+/,""):"#"===d?EDHistory.getPageUrl().replace(/#.*/,"")+a:"?"===d?EDHistory.getPageUrl().replace(/[\?#].*/,"")+a:b?EDHistory.getBaseUrl()+a.replace(/^(\.\/)+/,""):EDHistory.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")
},EDHistory.getShortUrl=function(a){var b=a,c=EDHistory.getBaseUrl(),d=EDHistory.getRootUrl();return EDHistory.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),EDHistory.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},EDHistory.store={},EDHistory.idToState=EDHistory.idToState||{},EDHistory.stateToId=EDHistory.stateToId||{},EDHistory.urlToId=EDHistory.urlToId||{},EDHistory.storedStates=EDHistory.storedStates||[],EDHistory.savedStates=EDHistory.savedStates||[],EDHistory.normalizeStore=function(){EDHistory.store.idToState=EDHistory.store.idToState||{},EDHistory.store.urlToId=EDHistory.store.urlToId||{},EDHistory.store.stateToId=EDHistory.store.stateToId||{}
},EDHistory.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=EDHistory.getLastSavedState();return!c&&b&&(c=EDHistory.createStateObject()),a&&(c=EDHistory.cloneObject(c),c.url=c.cleanUrl||c.url),c},EDHistory.getIdByState=function(a){var c,b=EDHistory.extractId(a.url);if(!b)if(c=EDHistory.getStateString(a),"undefined"!=typeof EDHistory.stateToId[c])b=EDHistory.stateToId[c];else if("undefined"!=typeof EDHistory.store.stateToId[c])b=EDHistory.store.stateToId[c];else{for(;;)if(b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof EDHistory.idToState[b]&&"undefined"==typeof EDHistory.store.idToState[b])break;
EDHistory.stateToId[c]=b,EDHistory.idToState[b]=a}return b},EDHistory.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=EDHistory.getFullUrl(EDHistory.unescapeString(a.url||d.location.href)),b.hash=EDHistory.getShortUrl(b.url),b.data=EDHistory.cloneObject(a.data),b.id=EDHistory.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!EDHistory.isEmptyObject(b.data),(b.title||c)&&(b.hash=EDHistory.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=EDHistory.getFullUrl(b.hash),(EDHistory.emulated.pushState||EDHistory.bugs.safariPoll)&&EDHistory.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)
},EDHistory.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=EDHistory.normalizeState(d)},EDHistory.getStateById=function(a){a=String(a);var c=EDHistory.idToState[a]||EDHistory.store.idToState[a]||b;return c},EDHistory.getStateString=function(a){var b,c,d;return b=EDHistory.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},EDHistory.getStateId=function(a){var b,c;return b=EDHistory.normalizeState(a),c=b.id},EDHistory.getHashByState=function(a){var b,c;return b=EDHistory.normalizeState(a),c=b.hash
},EDHistory.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},EDHistory.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},EDHistory.extractState=function(a,b){var d,e,c=null;return b=b||!1,d=EDHistory.extractId(a),d&&(c=EDHistory.getStateById(d)),c||(e=EDHistory.getFullUrl(a),d=EDHistory.getIdByUrl(e)||!1,d&&(c=EDHistory.getStateById(d)),c||!b||EDHistory.isTraditionalAnchor(a)||(c=EDHistory.createStateObject(null,null,e))),c
},EDHistory.getIdByUrl=function(a){var c=EDHistory.urlToId[a]||EDHistory.store.urlToId[a]||b;return c},EDHistory.getLastSavedState=function(){return EDHistory.savedStates[EDHistory.savedStates.length-1]||b},EDHistory.getLastStoredState=function(){return EDHistory.storedStates[EDHistory.storedStates.length-1]||b},EDHistory.hasUrlDuplicate=function(a){var c,b=!1;return c=EDHistory.extractState(a.url),b=c&&c.id!==a.id},EDHistory.storeState=function(a){return EDHistory.urlToId[a.url]=a.id,EDHistory.storedStates.push(EDHistory.cloneObject(a)),a
},EDHistory.isLastSavedState=function(a){var c,d,e,b=!1;return EDHistory.savedStates.length&&(c=a.id,d=EDHistory.getLastSavedState(),e=d.id,b=c===e),b},EDHistory.saveState=function(a){return EDHistory.isLastSavedState(a)?!1:(EDHistory.savedStates.push(EDHistory.cloneObject(a)),!0)},EDHistory.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?EDHistory.savedStates[EDHistory.savedStates.length-1]:0>a?EDHistory.savedStates[EDHistory.savedStates.length+a]:EDHistory.savedStates[a]},EDHistory.getHash=function(){var a=EDHistory.unescapeHash(d.location.hash);
return a},EDHistory.unescapeString=function(b){for(var d,c=b;;){if(d=a.unescape(c),d===c)break;c=d}return c},EDHistory.unescapeHash=function(a){var b=EDHistory.normalizeHash(a);return b=EDHistory.unescapeString(b)},EDHistory.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},EDHistory.setHash=function(a,b){var c,e,f;return b!==!1&&EDHistory.busy()?(EDHistory.pushQueue({scope:m,callback:EDHistory.setHash,args:arguments,queue:b}),!1):(c=EDHistory.escapeHash(a),EDHistory.busy(!0),e=EDHistory.extractState(a,!0),e&&!EDHistory.emulated.pushState?EDHistory.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(EDHistory.bugs.setHash?(f=EDHistory.getPageUrl(),EDHistory.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)
},EDHistory.escapeHash=function(b){var c=EDHistory.normalizeHash(b);return c=a.escape(c),EDHistory.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},EDHistory.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=EDHistory.unescapeHash(b)},EDHistory.setTitle=function(a){var c,b=a.title;b||(c=EDHistory.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||EDHistory.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")
}catch(e){}return d.title=b,m},EDHistory.queues=[],EDHistory.busy=function(a){if("undefined"!=typeof a?EDHistory.busy.flag=a:"undefined"==typeof EDHistory.busy.flag&&(EDHistory.busy.flag=!1),!EDHistory.busy.flag){h(EDHistory.busy.timeout);var b=function(){var a,c,d;if(!EDHistory.busy.flag)for(a=EDHistory.queues.length-1;a>=0;--a)c=EDHistory.queues[a],0!==c.length&&(d=c.shift(),EDHistory.fireQueueItem(d),EDHistory.busy.timeout=g(b,EDHistory.options.busyDelay))};EDHistory.busy.timeout=g(b,EDHistory.options.busyDelay)
}return EDHistory.busy.flag},EDHistory.busy.flag=!1,EDHistory.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},EDHistory.pushQueue=function(a){return EDHistory.queues[a.queue||0]=EDHistory.queues[a.queue||0]||[],EDHistory.queues[a.queue||0].push(a),m},EDHistory.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),EDHistory.busy()?EDHistory.pushQueue(a):EDHistory.fireQueueItem(a),m},EDHistory.clearQueue=function(){return EDHistory.busy.flag=!1,EDHistory.queues=[],m
},EDHistory.stateChanged=!1,EDHistory.doubleChecker=!1,EDHistory.doubleCheckComplete=function(){return EDHistory.stateChanged=!0,EDHistory.doubleCheckClear(),m},EDHistory.doubleCheckClear=function(){return EDHistory.doubleChecker&&(h(EDHistory.doubleChecker),EDHistory.doubleChecker=!1),m},EDHistory.doubleCheck=function(a){return EDHistory.stateChanged=!1,EDHistory.doubleCheckClear(),EDHistory.bugs.ieDoubleCheck&&(EDHistory.doubleChecker=g(function(){return EDHistory.doubleCheckClear(),EDHistory.stateChanged||a(),!0
},EDHistory.options.doubleCheckInterval)),m},EDHistory.safariStatePoll=function(){var c,b=EDHistory.extractState(d.location.href);if(!EDHistory.isLastSavedState(b))return c=b,c||(c=EDHistory.createStateObject()),EDHistory.Adapter.trigger(a,"popstate"),m},EDHistory.back=function(a){return a!==!1&&EDHistory.busy()?(EDHistory.pushQueue({scope:m,callback:EDHistory.back,args:arguments,queue:a}),!1):(EDHistory.busy(!0),EDHistory.doubleCheck(function(){EDHistory.back(!1)}),n.go(-1),!0)},EDHistory.forward=function(a){return a!==!1&&EDHistory.busy()?(EDHistory.pushQueue({scope:m,callback:EDHistory.forward,args:arguments,queue:a}),!1):(EDHistory.busy(!0),EDHistory.doubleCheck(function(){EDHistory.forward(!1)
}),n.go(1),!0)},EDHistory.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)EDHistory.forward(b);else{if(!(0>a))throw new Error("EDHistory.go: EDHistory.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)EDHistory.back(b)}return m},EDHistory.emulated.pushState){var o=function(){};EDHistory.pushState=EDHistory.pushState||o,EDHistory.replaceState=EDHistory.replaceState||o}else EDHistory.onPopState=function(b,c){var g,h,e=!1,f=!1;return EDHistory.doubleCheckComplete(),(g=EDHistory.getHash())?(h=EDHistory.extractState(g||d.location.href,!0),h?EDHistory.replaceState(h.data,h.title,h.url,!1):(EDHistory.Adapter.trigger(a,"anchorchange"),EDHistory.busy(!1)),EDHistory.expectedStateId=!1,!1):(e=EDHistory.Adapter.extractEventData("state",b,c)||!1,f=e?EDHistory.getStateById(e):EDHistory.expectedStateId?EDHistory.getStateById(EDHistory.expectedStateId):EDHistory.extractState(d.location.href),f||(f=EDHistory.createStateObject(null,null,d.location.href)),EDHistory.expectedStateId=!1,EDHistory.isLastSavedState(f)?(EDHistory.busy(!1),!1):(EDHistory.storeState(f),EDHistory.saveState(f),EDHistory.setTitle(f),EDHistory.Adapter.trigger(a,"statechange"),EDHistory.busy(!1),!0))
},EDHistory.Adapter.bind(a,"popstate",EDHistory.onPopState),EDHistory.pushState=function(b,c,d,e){if(EDHistory.getHashByUrl(d)&&EDHistory.emulated.pushState)throw new Error("EDHistory.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&EDHistory.busy())return EDHistory.pushQueue({scope:m,callback:EDHistory.pushState,args:arguments,queue:e}),!1;EDHistory.busy(!0);var f=EDHistory.createStateObject(b,c,d);return EDHistory.isLastSavedState(f)?EDHistory.busy(!1):(EDHistory.storeState(f),EDHistory.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),EDHistory.Adapter.trigger(a,"popstate")),!0
},EDHistory.replaceState=function(b,c,d,e){if(EDHistory.getHashByUrl(d)&&EDHistory.emulated.pushState)throw new Error("EDHistory.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&EDHistory.busy())return EDHistory.pushQueue({scope:m,callback:EDHistory.replaceState,args:arguments,queue:e}),!1;EDHistory.busy(!0);var f=EDHistory.createStateObject(b,c,d);return EDHistory.isLastSavedState(f)?EDHistory.busy(!1):(EDHistory.storeState(f),EDHistory.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),EDHistory.Adapter.trigger(a,"popstate")),!0
};if(f){try{EDHistory.store=k.parse(f.getItem("EDHistory.store"))||{}}catch(p){EDHistory.store={}}EDHistory.normalizeStore()}else EDHistory.store={},EDHistory.normalizeStore();EDHistory.Adapter.bind(a,"beforeunload",EDHistory.clearAllIntervals),EDHistory.Adapter.bind(a,"unload",EDHistory.clearAllIntervals),EDHistory.saveState(EDHistory.storeState(EDHistory.extractState(d.location.href,!0))),f&&(EDHistory.onUnload=function(){var a,b;try{a=k.parse(f.getItem("EDHistory.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};
for(b in EDHistory.idToState)EDHistory.idToState.hasOwnProperty(b)&&(a.idToState[b]=EDHistory.idToState[b]);for(b in EDHistory.urlToId)EDHistory.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=EDHistory.urlToId[b]);for(b in EDHistory.stateToId)EDHistory.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=EDHistory.stateToId[b]);EDHistory.store=a,EDHistory.normalizeStore(),f.setItem("EDHistory.store",k.stringify(a))},EDHistory.intervalList.push(i(EDHistory.onUnload,EDHistory.options.storeInterval)),EDHistory.Adapter.bind(a,"beforeunload",EDHistory.onUnload),EDHistory.Adapter.bind(a,"unload",EDHistory.onUnload)),EDHistory.emulated.pushState||(EDHistory.bugs.safariPoll&&EDHistory.intervalList.push(i(EDHistory.safariStatePoll,EDHistory.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(EDHistory.Adapter.bind(a,"hashchange",function(){EDHistory.Adapter.trigger(a,"popstate")
}),EDHistory.getHash()&&EDHistory.Adapter.onDomLoad(function(){EDHistory.Adapter.trigger(a,"hashchange")})))},EDHistory.init()}(window);var c=[];a.fn.route=function(b){if(this.is("a")){var d=this.attr("title"),e=(new Date).getTime();c[e]=e,EDHistory.pushState(a.extend({timestamp:e,refresh:!0},b),d,this.attr("href"))}return this},EDHistory.Adapter.bind(window,"statechange",function(){var a=EDHistory.getState();a.id===EDHistory.savedStates[0].id&&(window.location=a.url),a.data.timestamp in c?delete c[a.data.timestamp]:a.data.refresh&&(window.location=a.url)
})}),ed.define("jquery.autosize",["edjquery","lodash"],function(a){var d=function(b,c){var e=this;e.input=a(b),e.options=a.extend(d.defaultOptions,c),e.mirror=a('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),a.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(a,b){e.mirror[0].style[b]=e.input.css(b)}),a("body").append(e.mirror),e.input.bind("keydown keyup input",function(){e.update()}),e.update()};d.defaultOptions={space:30},d.validTypes=["text","password","search","url","tel","email"],d.prototype.update=function(){var a=this,b=a.input,c=a.mirror,d=b.val();
if(d||(d=b.attr("placeholder")),d!==c.text()){c.text(d);var e=c.width()+a.options.space;b.width(e)}},a.fn.autosizeInput=function(b){return this.each(function(){if("INPUT"==this.tagName&&a.inArray(this.type,d.validTypes)>-1){var c=a(this);c.data("autosizeInputInstance")||c.data("autosizeInputInstance",new d(this,b))}})},a(function(){a("input[data-autosize-input]").autosizeInput()})}),ed.define("jquery.fancybox",["edjquery"],function(a){var b=a;!function(a,b,c,d){"use strict";var e=c("html"),f=c(a),g=c(b),h=c.fancybox=function(){h.open.apply(this,arguments)
},i=navigator.userAgent.match(/msie/i),j=null,k=b.createTouch!==d,l=function(a){return a&&a.hasOwnProperty&&a instanceof c},m=function(a){return a&&"string"===c.type(a)},n=function(a){return m(a)&&a.indexOf("%")>0},o=function(a){return a&&!(a.style.overflow&&"hidden"===a.style.overflow)&&(a.clientWidth&&a.scrollWidth>a.clientWidth||a.clientHeight&&a.scrollHeight>a.clientHeight)},p=function(a,b){var c=parseInt(a,10)||0;return b&&n(a)&&(c=h.getViewport()[b]/100*c),Math.ceil(c)},q=function(a,b){return p(a,b)+"px"
};c.extend(h,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!k,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(i?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==h.close(!0))?(c.isArray(a)||(a=l(a)?c(a).get():[a]),c.each(a,function(e,f){var i,j,k,n,o,p,q,g={};
"object"===c.type(f)&&(f.nodeType&&(f=c(f)),l(f)?(g={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,g,f.metadata())):g=f),i=b.href||g.href||(m(f)?f:null),j=b.title!==d?b.title:g.title||"",k=b.content||g.content,n=k?"html":b.type||g.type,!n&&g.isDom&&(n=f.data("fancybox-type"),n||(o=f.prop("class").match(/fancybox\.(\w+)/),n=o?o[1]:null)),m(i)&&(n||(h.isImage(i)?n="image":h.isSWF(i)?n="swf":"#"===i.charAt(0)?n="inline":m(f)&&(n="html",k=f)),"ajax"===n&&(p=i.split(/\s+/,2),i=p.shift(),q=p.shift())),k||("inline"===n?i?k=c(m(i)?i.replace(/.*(?=#[^\s]+$)/,""):i):g.isDom&&(k=f):"html"===n?k=i:n||i||!g.isDom||(n="inline",k=f)),c.extend(g,{href:i,type:n,content:k,title:j,selector:q}),a[e]=g
}),h.opts=c.extend(!0,{},h.defaults,b),b.keys!==d&&(h.opts.keys=b.keys?c.extend({},h.defaults.keys,b.keys):!1),h.group=a,h._start(h.opts.index)):void 0},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.ajaxLoad=null,h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){h.cancel(),!1!==h.trigger("beforeClose")&&(h.unbindEvents(),h.isActive&&(h.isOpen&&a!==!0?(h.isOpen=h.isOpened=!1,h.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),h.wrap.stop(!0,!0).removeClass("fancybox-opened"),h.transitions[h.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),h._afterZoomOut())))
},play:function(a){var b=function(){clearTimeout(h.player.timer)},c=function(){b(),h.current&&h.player.isActive&&(h.player.timer=setTimeout(h.next,h.current.playSpeed))},d=function(){b(),g.unbind(".player"),h.player.isActive=!1,h.trigger("onPlayEnd")},e=function(){h.current&&(h.current.loop||h.current.index<h.group.length-1)&&(h.player.isActive=!0,g.bind({"onCancel.player beforeClose.player":d,"onUpdate.player":c,"beforeLoad.player":b}),c(),h.trigger("onPlayStart"))};a===!0||!h.player.isActive&&a!==!1?e():d()
},next:function(a){var b=h.current;b&&(m(a)||(a=b.direction.next),h.jumpto(b.index+1,a,"next"))},prev:function(a){var b=h.current;b&&(m(a)||(a=b.direction.prev),h.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=h.current;e&&(a=p(a),h.direction=b||e.direction[a>=e.index?"next":"prev"],h.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d&&(h.cancel(),h._start(a)))},reposition:function(a,b){var f,d=h.current,e=d?d.wrap:null;e&&(f=h._getPosition(b),a&&"scroll"===a.type?(delete f.position,e.stop(!0,!0).animate(f,200)):(e.css(f),d.pos=c.extend({},d.dim,f)))
},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(j),j=null),h.isOpen&&!j&&(j=setTimeout(function(){var d=h.current;d&&!h.isClosing&&(h.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&h._setDimension(),"scroll"===b&&d.canShrink||h.reposition(a),h.trigger("onUpdate"),j=null)},c&&!k?0:300))},toggle:function(a){h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,k&&(h.wrap.removeAttr("style").addClass("fancybox-tmp"),h.trigger("onUpdate")),h.update())
},hideLoading:function(){g.unbind(".loading"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"><div></div></div>').click(h.cancel).appendTo("body"),g.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),h.cancel())}),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=h.current&&h.current.locked||!1,c={x:f.scrollLeft(),y:f.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=k&&a.innerWidth?a.innerWidth:f.width(),c.h=k&&a.innerHeight?a.innerHeight:f.height()),c
},unbindEvents:function(){h.wrap&&l(h.wrap)&&h.wrap.unbind(".fb"),g.unbind(".fb"),f.unbind(".fb")},bindEvents:function(){var b,a=h.current;a&&(f.bind("orientationchange.fb"+(k?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),h.update),b=a.keys,b&&g.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||c(g).is("[contenteditable]"))||c.each(b,function(b,g){return a.group.length>1&&g[f]!==d?(h[b](g[f]),e.preventDefault(),!1):c.inArray(f,g)>-1?(h[b](),e.preventDefault(),!1):void 0
}),void 0)}),c.fn.mousewheel&&a.mouseWheel&&h.wrap.bind("mousewheel.fb",function(b,d,e,f){for(var g=b.target||null,i=c(g),j=!1;i.length&&!(j||i.is(".fancybox-skin")||i.is(".fancybox-wrap"));)j=o(i[0]),i=c(i).parent();0===d||j||h.group.length>1&&!a.canShrink&&(f>0||e>0?h.prev(f>0?"down":"left"):(0>f||0>e)&&h.next(0>f?"up":"right"),b.preventDefault())}))},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),d===!1)return!1;e.helpers&&c.each(e.helpers,function(b,d){d&&h.helpers[b]&&c.isFunction(h.helpers[b][a])&&h.helpers[b][a](c.extend(!0,{},h.helpers[b].defaults,d),e)
}),g.trigger(a)}},isImage:function(a){return m(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return m(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d,e,f,g,i,b={};if(a=p(a),d=h.group[a]||null,!d)return!1;if(b=c.extend(!0,{},h.opts,d),g=b.margin,i=b.padding,"number"===c.type(g)&&(b.margin=[g,g,g,g]),"number"===c.type(i)&&(b.padding=[i,i,i,i]),b.modal&&c.extend(!0,b,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),b.autoSize&&(b.autoWidth=b.autoHeight=!0),"auto"===b.width&&(b.autoWidth=!0),"auto"===b.height&&(b.autoHeight=!0),b.group=h.group,b.index=a,h.coming=b,!1===h.trigger("beforeLoad"))return h.coming=null,void 0;
if(f=b.type,e=b.href,!f)return h.coming=null,h.current&&h.router&&"jumpto"!==h.router?(h.current.index=a,h[h.router](h.direction)):!1;if(h.isActive=!0,("image"===f||"swf"===f)&&(b.autoHeight=b.autoWidth=!1,b.scrolling="visible"),"image"===f&&(b.aspectRatio=!0),"iframe"===f&&k&&(b.scrolling="scroll"),b.wrap=c(b.tpl.wrap).addClass("fancybox-"+(k?"mobile":"desktop")+" fancybox-type-"+f+" fancybox-tmp "+b.wrapCSS).appendTo(b.parent||"body"),c.extend(b,{skin:c(".fancybox-skin",b.wrap),outer:c(".fancybox-outer",b.wrap),inner:c(".fancybox-inner",b.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,c){b.skin.css("padding"+c,q(b.padding[a]))
}),h.trigger("onReady"),"inline"===f||"html"===f){if(!b.content||!b.content.length)return h._error("content")}else if(!e)return h._error("href");"image"===f?h._loadImage():"ajax"===f?h._loadAjax():"iframe"===f?h._loadIframe():h._afterLoad()},_error:function(a){c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:h.coming.tpl.error}),h._afterLoad()},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,h.coming.width=this.width/h.opts.pixelRatio,h.coming.height=this.height/h.opts.pixelRatio,h._afterLoad()
},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,a.complete!==!0&&h.showLoading()},_loadAjax:function(){var a=h.coming;h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,h._afterLoad())}}))},_loadIframe:function(){var a=h.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",k?"auto":a.iframe.scrolling).attr("src",a.href);
c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(h.showLoading(),b.one("load",function(){c(this).data("ready",1),k||c(this).bind("load.fb",h.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),h._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||h._afterLoad()},_preloadImages:function(){var e,f,a=h.group,b=h.current,c=a.length,d=b.preload?Math.min(b.preload,c-1):0;
for(f=1;d>=f;f+=1)e=a[(b.index+f)%c],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,f,g,i,j,k,a=h.coming,b=h.current,d="fancybox-placeholder";if(h.hideLoading(),a&&h.isActive!==!1){if(!1===h.trigger("afterLoad",a,b))return a.wrap.stop(!0).trigger("onReset").remove(),h.coming=null,void 0;switch(b&&(h.trigger("beforeChange",b),b.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),h.unbindEvents(),e=a,f=a.content,g=a.type,i=a.scrolling,c.extend(h,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:b}),j=e.href,g){case"inline":case"ajax":case"html":e.selector?f=c("<div>").html(f).find(e.selector):l(f)&&(f.data(d)||f.data(d,c('<div class="'+d+'"></div>').insertAfter(f).hide()),f=f.show().detach(),e.wrap.bind("onReset",function(){c(this).find(f).length&&f.hide().replaceAll(f.data(d)).data(d,!1)
}));break;case"image":f=e.tpl.image.replace("{href}",j);break;case"swf":f='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+j+'"></param>',k="",c.each(e.swf,function(a,b){f+='<param name="'+a+'" value="'+b+'"></param>',k+=" "+a+'="'+b+'"'}),f+='<embed src="'+j+'" type="application/x-shockwave-flash" width="100%" height="100%"'+k+"></embed></object>"}l(f)&&f.parent().is(e.inner)||e.inner.append(f),h.trigger("beforeShow"),e.inner.css("overflow","yes"===i?"scroll":"no"===i?"hidden":i),h._setDimension(),h.reposition(),h.isOpen=!1,h.coming=null,h.bindEvents(),h.isOpened?b.prevMethod&&h.transitions[b.prevMethod]():c(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),h.transitions[h.isOpened?e.nextMethod:e.openMethod](),h._preloadImages()
}},_setDimension:function(){var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,a=h.getViewport(),b=0,d=!1,e=!1,f=h.wrap,g=h.skin,i=h.inner,j=h.current,k=j.width,l=j.height,m=j.minWidth,o=j.minHeight,r=j.maxWidth,s=j.maxHeight,t=j.scrolling,u=j.scrollOutside?j.scrollbarWidth:0,v=j.margin,w=p(v[1]+v[3]),x=p(v[0]+v[2]);if(f.add(g).add(i).width("auto").height("auto").removeClass("fancybox-tmp"),y=p(g.outerWidth(!0)-g.width()),z=p(g.outerHeight(!0)-g.height()),A=w+y,B=x+z,C=n(k)?(a.w-A)*p(k)/100:k,D=n(l)?(a.h-B)*p(l)/100:l,"iframe"===j.type){if(L=j.content,j.autoHeight&&1===L.data("ready"))try{L[0].contentWindow.document.location&&(i.width(C).height(9999),M=L.contents().find("body"),u&&M.css("overflow-x","hidden"),D=M.outerHeight(!0))
}catch(N){}}else(j.autoWidth||j.autoHeight)&&(i.addClass("fancybox-tmp"),j.autoWidth||i.width(C),j.autoHeight||i.height(D),j.autoWidth&&(C=i.width()),j.autoHeight&&(D=i.height()),i.removeClass("fancybox-tmp"));if(k=p(C),l=p(D),G=C/D,m=p(n(m)?p(m,"w")-A:m),r=p(n(r)?p(r,"w")-A:r),o=p(n(o)?p(o,"h")-B:o),s=p(n(s)?p(s,"h")-B:s),E=r,F=s,j.fitToView&&(r=Math.min(a.w-A,r),s=Math.min(a.h-B,s)),J=a.w-w,K=a.h-x,j.aspectRatio?(k>r&&(k=r,l=p(k/G)),l>s&&(l=s,k=p(l*G)),m>k&&(k=m,l=p(k/G)),o>l&&(l=o,k=p(l*G))):(k=Math.max(m,Math.min(k,r)),j.autoHeight&&"iframe"!==j.type&&(i.width(k),l=i.height()),l=Math.max(o,Math.min(l,s))),j.fitToView)if(i.width(k).height(l),f.width(k+y),H=f.width(),I=f.height(),j.aspectRatio)for(;(H>J||I>K)&&k>m&&l>o&&!(b++>19);)l=Math.max(o,Math.min(s,l-10)),k=p(l*G),m>k&&(k=m,l=p(k/G)),k>r&&(k=r,l=p(k/G)),i.width(k).height(l),f.width(k+y),H=f.width(),I=f.height();
else k=Math.max(m,Math.min(k,k-(H-J))),l=Math.max(o,Math.min(l,l-(I-K)));u&&"auto"===t&&D>l&&J>k+y+u&&(k+=u),i.width(k).height(l),f.width(k+y),H=f.width(),I=f.height(),d=(H>J||I>K)&&k>m&&l>o,e=j.aspectRatio?E>k&&F>l&&C>k&&D>l:(E>k||F>l)&&(C>k||D>l),c.extend(j,{dim:{width:q(H),height:q(I)},origWidth:C,origHeight:D,canShrink:d,canExpand:e,wPadding:y,hPadding:z,wrapSpace:I-g.outerHeight(!0),skinSpace:g.height()-l}),!L&&j.autoHeight&&l>o&&s>l&&!e&&i.height("auto")},_getPosition:function(a){var b=h.current,c=h.getViewport(),d=b.margin,e=h.wrap.width()+d[1]+d[3],f=h.wrap.height()+d[0]+d[2],g={position:"absolute",top:d[0],left:d[3]};
return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?g.position="fixed":b.locked||(g.top+=c.y,g.left+=c.x),g.top=q(Math.max(g.top,g.top+(c.h-f)*b.topRatio)),g.left=q(Math.max(g.left,g.left+(c.w-e)*b.leftRatio)),g},_afterZoomIn:function(){var a=h.current;a&&(h.isOpen=h.isOpened=!0,h.wrap.css("overflow","visible").addClass("fancybox-opened"),h.update(),(a.closeClick||a.nextClick&&h.group.length>1)&&h.inner.css("cursor","pointer").bind("click.fb",function(b){c(b.target).is("a")||c(b.target).parent().is("a")||(b.preventDefault(),h[a.closeClick?"close":"next"]())
}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(h.skin).bind("click.fb",function(a){a.preventDefault(),h.close()}),a.arrows&&h.group.length>1&&((a.loop||a.index>0)&&c(a.tpl.prev).appendTo(h.outer).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(a.tpl.next).appendTo(h.outer).bind("click.fb",h.next)),h.trigger("afterShow"),a.loop||a.index!==a.group.length-1?h.opts.autoPlay&&!h.player.isActive&&(h.opts.autoPlay=!1,h.play()):h.play(!1))},_afterZoomOut:function(a){a=a||h.current,c(".fancybox-wrap").trigger("onReset").remove(),c.extend(h,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),h.trigger("afterClose",a)
}}),h.transitions={getOrigPosition:function(){var a=h.current,b=a.element,c=a.orig,d={},e=50,f=50,g=a.hPadding,i=a.wPadding,j=h.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),l(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=j.y+(j.h-f)*a.topRatio,d.left=j.x+(j.w-e)*a.leftRatio),("fixed"===h.wrap.css("position")||a.locked)&&(d.top-=j.y,d.left-=j.x),d={top:q(d.top-g*a.topRatio),left:q(d.left-i*a.leftRatio),width:q(e+i),height:q(f+g)}},step:function(a,b){var c,d,e,f=b.prop,g=h.current,i=g.wrapSpace,j=g.skinSpace;
("width"===f||"height"===f)&&(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),h.isClosing&&(c=1-c),d="width"===f?g.wPadding:g.hPadding,e=a-d,h.skin[f](p("width"===f?e:e-i*c)),h.inner[f](p("width"===f?e:e-i*c-j*c)))},zoomIn:function(){var a=h.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),h.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:h._afterZoomIn})
},zoomOut:function(){var a=h.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),h.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:h._afterZoomOut})},changeIn:function(){var g,a=h.current,b=a.nextEffect,c=a.pos,d={opacity:1},e=h.direction,f=200;c.opacity=.1,"elastic"===b&&(g="down"===e||"up"===e?"top":"left","down"===e||"right"===e?(c[g]=q(p(c[g])-f),d[g]="+="+f+"px"):(c[g]=q(p(c[g])+f),d[g]="-="+f+"px")),"none"===b?h._afterZoomIn():h.wrap.css(c).animate(d,{duration:a.nextSpeed,easing:a.nextEasing,complete:h._afterZoomIn})
},changeOut:function(){var a=h.previous,b=a.prevEffect,d={opacity:.1},e=h.direction,f=200;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"="+f+"px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},h.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!k,fixed:!0},overlay:null,fixed:!1,el:c("html"),create:function(a){a=c.extend({},this.defaults,a),this.overlay&&this.close(),this.overlay=c('<div class="fancybox-overlay"></div>').appendTo(h.coming?h.coming.parent:a.parent),this.fixed=!1,a.fixed&&h.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)
},open:function(a){var b=this;a=c.extend({},this.defaults,a),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a),this.fixed||(f.bind("resize.overlay",c.proxy(this.update,this)),this.update()),a.closeClick&&this.overlay.bind("click.overlay",function(a){return c(a.target).hasClass("fancybox-overlay")?(h.isActive?h.close():b.close(),!1):void 0}),this.overlay.css(a.css).show()},close:function(){var a,b;f.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(c(".fancybox-margin").removeClass("fancybox-margin"),a=f.scrollTop(),b=f.scrollLeft(),this.el.removeClass("fancybox-lock"),f.scrollTop(a).scrollLeft(b)),c(".fancybox-overlay").remove().hide(),c.extend(this,{overlay:null,fixed:!1})
},update:function(){var c,a="100%";this.overlay.width(a).height("100%"),i?(c=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),g.width()>c&&(a=g.width())):g.width()>f.width()&&(a=g.width()),this.overlay.width(a).height(g.height())},onReady:function(a,b){var d=this.overlay;c(".fancybox-overlay").stop(!0,!0),d||this.create(a),a.locked&&this.fixed&&b.fixed&&(d||(this.margin=g.height()>f.height()?c("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1),a.showEarly===!0&&this.beforeShow.apply(this,arguments)
},beforeShow:function(a,b){var d,e;b.locked&&(this.margin!==!1&&(c("*").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&!c(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),d=f.scrollTop(),e=f.scrollLeft(),this.el.addClass("fancybox-lock"),f.scrollTop(d).scrollLeft(e)),this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!h.coming&&this.overlay.fadeOut(a.speedOut,c.proxy(this.close,this))
}},h.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var f,g,b=h.current,d=b.title,e=a.type;if(c.isFunction(d)&&(d=d.call(b.element,b)),m(d)&&""!==c.trim(d)){switch(f=c('<div class="fancybox-title fancybox-title-'+e+'-wrap">'+d+"</div>"),e){case"inside":g=h.skin;break;case"outside":g=h.wrap;break;case"over":g=h.inner;break;default:g=h.skin,f.appendTo("body"),i&&f.width(f.width()),f.wrapInner('<span class="child"></span>'),h.current.margin[2]+=Math.abs(p(f.css("margin-bottom")))
}f["top"===a.position?"prependTo":"appendTo"](g)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",f=function(f){var j,k,g=c(this).blur(),i=b;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||g.is(".fancybox-wrap")||(j=a.groupAttr||"data-fancybox-group",k=g.attr(j),k||(j="rel",k=g.get(0)[j]),k&&""!==k&&"nofollow"!==k&&(g=e.length?c(e):d,g=g.filter("["+j+'="'+k+'"]'),i=g.index(this)),a.index=i,h.open(g,a)!==!1&&f.preventDefault())};return a=a||{},b=a.index||0,e&&a.live!==!1?g.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",f):d.unbind("click.fb-start").bind("click.fb-start",f),this.filter("[data-fancybox-start=1]").trigger("click"),this
},g.ready(function(){var b,f;c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),d=b.innerWidth()-b.height(99).innerWidth();return a.remove(),d}),c.support.fixedPosition===d&&(c.support.fixedPosition=function(){var a=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),b=20===a[0].offsetTop||15===a[0].offsetTop;return a.remove(),b}()),c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),b=c(a).width(),e.addClass("fancybox-lock-test"),f=c(a).width(),e.removeClass("fancybox-lock-test"),c("<style type='text/css'>.fancybox-margin{margin-right:"+(f-b)+"px;}</style>").appendTo("head")
})}(window,document,b)}),ed.define("jquery.raty",["edjquery"],function(a){var b=a;!function(a){var b={init:function(c){return this.each(function(){b.destroy.call(this),this.opt=a.extend(!0,{},a.fn.raty.defaults,c);var d=a(this),e=["number","readOnly","score","scoreName"];b._callback.call(this,e),this.opt.precision&&b._adjustPrecision.call(this),this.opt.number=b._between(this.opt.number,0,this.opt.numberMax),this.stars=b._createStars.call(this),this.score=b._createScore.call(this),b._apply.call(this,this.opt.score),this.opt.cancel&&(this.cancel=b._createCancel.call(this)),this.opt.width&&d.css("width",this.opt.width),this.opt.readOnly?b._lock.call(this):(d.css("cursor","pointer"),b._binds.call(this)),b._target.call(this,this.opt.score),d.data({settings:this.opt,raty:!0})
})},_adjustPrecision:function(){this.opt.targetType="score",this.opt.half=!0},_apply:function(a){a&&a>0&&(a=b._between(a,0,this.opt.number),this.score.val(a)),b._fill.call(this,a),a&&b._roundStars.call(this,a)},_between:function(a,b,c){return Math.min(Math.max(parseFloat(a),b),c)},_binds:function(){this.cancel&&b._bindCancel.call(this),b._bindClick.call(this),b._bindOut.call(this),b._bindOver.call(this)},_bindCancel:function(){b._bindClickCancel.call(this),b._bindOutCancel.call(this),b._bindOverCancel.call(this)
},_bindClick:function(){var b=this,c=a(b);b.stars.on("click.raty",function(d){b.score.val(b.opt.half||b.opt.precision?c.data("score"):a(this).data("score")),b.opt.click&&b.opt.click.call(b,parseFloat(b.score.val()),d)})},_bindClickCancel:function(){var a=this;a.cancel.on("click.raty",function(b){a.score.removeAttr("value"),a.opt.click&&a.opt.click.call(a,null,b)})},_bindOut:function(){var c=this;a(this).on("mouseleave.raty",function(a){var d=parseFloat(c.score.val())||void 0;b._apply.call(c,d),b._target.call(c,d,a),c.opt.mouseout&&c.opt.mouseout.call(c,d,a)
})},_bindOutCancel:function(){var b=this;b.cancel.on("mouseleave.raty",function(c){a(this).attr("class",b.opt.cancelOff),b.opt.mouseout&&b.opt.mouseout.call(b,b.score.val()||null,c)})},_bindOverCancel:function(){var c=this;c.cancel.on("mouseover.raty",function(d){a(this).attr("class",c.opt.cancelOn),c.stars.attr("class",c.opt.starOff),b._target.call(c,null,d),c.opt.mouseover&&c.opt.mouseover.call(c,null)})},_bindOver:function(){var c=this,d=a(c),e=c.opt.half?"mousemove.raty":"mouseover.raty";c.stars.on(e,function(e){var f=parseInt(a(this).data("score"),10);
if(c.opt.half){var g=parseFloat((e.pageX-a(this).offset().left)/(c.opt.size?c.opt.size:parseInt(d.css("font-size")))),h=g>.5?1:.5;f=f-1+h,b._fill.call(c,f),c.opt.precision&&(f=f-h+g),b._roundStars.call(c,f),d.data("score",f)}else b._fill.call(c,f);b._target.call(c,f,e),c.opt.mouseover&&c.opt.mouseover.call(c,f,e)})},_callback:function(a){for(var b in a)"function"==typeof this.opt[a[b]]&&(this.opt[a[b]]=this.opt[a[b]].call(this))},_createCancel:function(){var b=a(this),c=this.opt.cancelOff,d=a("<i />",{"class":c,title:this.opt.cancelHint});
return"left"==this.opt.cancelPlace?b.prepend("&#160;").prepend(d):b.append("&#160;").append(d),d},_createScore:function(){return a("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)},_createStars:function(){for(var c=a(this),d=1;d<=this.opt.number;d++){var e=b._getHint.call(this,d),f=this.opt.score&&this.opt.score>=d?"starOn":"starOff";f=this.opt[f],a("<i />",{"class":f,title:e,"data-score":d}).appendTo(this),this.opt.space&&c.append(d<this.opt.number?"&#160;":"")}return c.children("i")},_error:function(b){a(this).html(b),a.error(b)
},_fill:function(a){for(var b=this,c=0,d=1;d<=b.stars.length;d++){var e=b.stars.eq(d-1),f=b.opt.single?d==a:a>=d;if(b.opt.iconRange&&b.opt.iconRange.length>c){var g=b.opt.iconRange[c],h=g.on||b.opt.starOn,i=g.off||b.opt.starOff,j=f?h:i;d<=g.range&&e.attr("class",j),d==g.range&&c++}else{var j=f?"starOn":"starOff";e.attr("class",this.opt[j])}}},_getHint:function(a){var b=this.opt.hints[a-1];return""===b?"":b||a},_lock:function(){var c=parseInt(this.score.val(),10),d=c?b._getHint.call(this,c):this.opt.noRatedMsg;
a(this).data("readonly",!0).css("cursor","").attr("title",d),this.score.attr("readonly","readonly"),this.stars.attr("title",d),this.cancel&&this.cancel.hide()},_roundStars:function(a){var b=(a-Math.floor(a)).toFixed(2);if(b>this.opt.round.down){var c="starOn";this.opt.halfShow&&b<this.opt.round.up?c="starHalf":b<this.opt.round.full&&(c="starOff"),this.stars.eq(Math.ceil(a)-1).attr("class",this.opt[c])}},_target:function(c,d){if(this.opt.target){var e=a(this.opt.target);0===e.length&&b._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&b._error.call(this,'Template "{score}" missing!');
var f=d&&"mouseover"==d.type;void 0===c?c=this.opt.targetText:null===c?c=f?this.opt.cancelHint:this.opt.targetText:("hint"==this.opt.targetType?c=b._getHint.call(this,Math.ceil(c)):this.opt.precision&&(c=parseFloat(c).toFixed(1)),f||this.opt.targetKeep||(c=this.opt.targetText)),c&&(c=this.opt.targetFormat.toString().replace("{score}",c)),e.is(":input")?e.val(c):e.html(c)}},_unlock:function(){a(this).data("readonly",!1).css("cursor","pointer").removeAttr("title"),this.score.removeAttr("readonly","readonly");for(var c=0;c<this.opt.number;c++)this.stars.eq(c).attr("title",b._getHint.call(this,c+1));
this.cancel&&this.cancel.css("display","")},cancel:function(c){return this.each(function(){a(this).data("readonly")!==!0&&(b[c?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(c){return a(this).each(function(){a(this).data("readonly")!==!0&&(b._apply.call(this,c),this.opt.click||b._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,c,a.Event("click")),b._target.call(this,c))})},destroy:function(){return a(this).each(function(){var b=a(this),c=b.data("raw");
c?b.off(".raty").empty().css({cursor:c.style.cursor,width:c.style.width}).removeData("readonly"):b.data("raw",b.clone()[0])})},getScore:function(){var c,b=[];return a(this).each(function(){c=this.score.val(),b.push(c?parseFloat(c):void 0)}),b.length>1?b:b[0]},readOnly:function(c){return this.each(function(){var d=a(this);d.data("readonly")!==c&&(c?(d.off(".raty").children("i").off(".raty"),b._lock.call(this)):(b._binds.call(this),b._unlock.call(this)),d.data("readonly",c))})},reload:function(){return b.set.call(this,{})
},score:function(){return arguments.length?b.setScore.apply(this,arguments):b.getScore.call(this)},set:function(b){return this.each(function(){var c=a(this),d=c.data("settings"),e=a.extend({},d,b);c.raty(e)})},setScore:function(c){return a(this).each(function(){a(this).data("readonly")!==!0&&(b._apply.call(this,c),b._target.call(this,c))})}};a.fn.raty=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist!"),void 0):b.init.apply(this,arguments)
},a.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"fa fa-fw fa-minus-square",cancelOn:"fa fa-fw fa-check-square",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,size:null,space:!0,starHalf:"fa fa-fw fa-star-half-o",starOff:"fa fa-fw fa-star-o",starOn:"fa fa-fw fa-star",target:void 0,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:!1}
}(b)}),ed.define("jquery.scrollto",["edjquery","lodash"],function(a){var c=a;!function(a){function c(a){return"object"==typeof a?a:{top:a,left:a}}var b=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},b.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;
return/webkit/i.test(navigator.userAgent)||"BackCompat"==d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},b.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){function m(a){h.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})}if(null!=d){var j,g=this,h=a(g),i=d,k={},l=h.is("html,body");
switch(typeof i){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(i)){i=c(i);break}if(i=a(i,this),!i.length)return;case"object":(i.is||i.style)&&(j=(i=a(i)).offset())}a.each(f.axis.split(""),function(a,c){var d="x"==c?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=g[n],p=b.max(g,c);if(j)k[n]=j[e]+(l?0:o-h.offset()[e]),f.margin&&(k[n]-=parseInt(i.css("margin"+d))||0,k[n]-=parseInt(i.css("border"+d+"Width"))||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=i["x"==c?"width":"height"]()*f.over[e]);else{var q=i[e];
k[n]=q.slice&&"%"==q.slice(-1)?parseFloat(q)/100*p:q}f.limit&&/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!=k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}}).end()},a.fn.scrollIntoView=function(b){var b=a(b);if(!(b.length<1)){var c=this.offset(),d=this.height(),e=c.top,f=e+d,g=b.offset(),h=b.height(),i=g.top,j=i+h;return j>f?this.scrollTo(b):e>i?this.scrollTo(b,{offset:-1*(d-h)}):void 0}},b.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();
var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(c)}),ed.define("jquery.ui.autocomplete",["edjquery","jquery.ui.widget","jquery.ui.menu"],function(a){var b=a;!function(a){var c=0;a.widget("ui.autocomplete",{version:"@VERSION",defaultElement:"<input>",options:{appendTo:"[id=fd].ui",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;
this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,c=!0,void 0;b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);
break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault(),void 0;if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);
break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur
});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)}),void 0;var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)
},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")
}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b
},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))
},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()
},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();
this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)
},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[a](b),void 0):(this.search(null,b),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")
},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))
}})}(b),function(a){function d(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(b){return d.test(a("<div>").html(b.label||b.value||b).text())})}var b=a.ui.autocomplete.prototype,c=b._initSource;a.extend(b,{_initSource:function(){this.options.html&&a.isArray(this.options.source)?this.source=function(a,b){b(d(this.options.source,a.term))}:c.call(this)},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>")[this.options.html?"html":"text"](c.label)).appendTo(b)
}})}(b)}),ed.define("jquery.ui.core",["edjquery"],function(a){var b=a;!function(a,b){function e(b,c){var d,e,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,e=d.name,b.href&&e&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+e+"]")[0],!!g&&f(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&f(b)}function f(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var c=0,d=/^ui-id-\d+$/;
a.ui=a.ui||{},a.extend(a.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;
return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);
if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)
}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return e(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&e(b,!d)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};
a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)
}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])
},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}),a(function(){a("body > [id=fd].ui").length>0||a(document.createElement("div")).attr("id","fd").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0,zIndex:10002}).appendTo("body")
})}(b)}),ed.define("jquery.ui.menu",["edjquery","jquery.ui.core","jquery.ui.widget"],function(a){var b=a;!function(a){a.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()
},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))
},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1
}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);
b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function i(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c,d,e,f,g,h=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);
break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:h=!1,d=this.previousFilter||"",e=String.fromCharCode(b.keyCode),f=!1,clearTimeout(this.filterTimer),e===d?f=!0:e=d+e,g=new RegExp("^"+i(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())
}),c=f&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(b.keyCode),g=new RegExp("^"+i(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())})),c.length?(this.focus(b,c),c.length>1?(this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))
},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);
/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()
},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))
},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)
},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);
b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;
this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(b),void 0)
},previousPage:function(b){var c,d,e;return this.active?(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(b),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");
var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(b)}),ed.define("jquery.ui.position",["edjquery"],function(a){var b=a;!function(a,b){function m(a,b,c){return[parseFloat(a[0])*(k.test(a[0])?b/100:1),parseFloat(a[1])*(k.test(a[1])?c/100:1)]}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}
}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+(\.[\d]+)?%?/,j=/^\w+/,k=/%$/,l=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;
return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return l.apply(this,arguments);b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};
return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var c,d,a=(b[this]||"").split(" ");1===a.length&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=k:"center"===b.at[0]&&(r.left+=k/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());
"right"===b.my[0]?A.left-=j:"center"===b.my[0]&&(A.left-=j/2),"bottom"===b.my[1]?A.top-=l:"center"===b.my[1]&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:0>f?"left":c>0?"right":"center",vertical:0>h?"top":g>0?"bottom":"middle"};
j>k&&e(c+f)<k&&(m.horizontal="center"),l>p&&e(g+h)<p&&(m.vertical="middle"),m.important=d(e(c),e(f))>d(e(g),e(h))?"horizontal":"vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e;b.collisionWidth>f?h>0&&0>=i?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):a.left=i>0&&0>=h?e:h>i?e+f-b.collisionWidth:e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)
},top:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e;b.collisionHeight>f?h>0&&0>=i?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):a.top=i>0&&0>=h?e:h>i?e+f-b.collisionHeight:e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){var n,o,c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];
0>i?(n=a.left+k+l+m+b.collisionWidth-f-d,(0>n||n<e(i))&&(a.left+=k+l+m)):j>0&&(o=a.left-b.collisionPosition.marginLeft+k+l+m-g,(o>0||e(o)<j)&&(a.left+=k+l+m))},top:function(a,b){var o,p,c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k="top"===b.my[1],l=k?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>i?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(0>p||p<e(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(a.top+=l+m+n))
}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];
b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(b)}),ed.define("jquery.ui.widget",["edjquery","jquery.ui.core"],function(a){var b=a;!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];
b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)
};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)
},a.widget.extend=function(c){for(var h,i,e=d.call(arguments,1),f=0,g=e.length;g>f;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(c[h]=a.isPlainObject(i)?a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")
}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()
}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")
},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var f,g,h,e=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(e={},f=c.split("."),c=f.shift(),f.length){for(g=e[c]=a.widget.extend({},this.options[c]),h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];if(c=f.pop(),d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);
return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0
}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")
},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);
return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()
})}})}(b)}),ed.define("site/vendors/microplugin",["edjquery"],function(){var b={};b.mixin=function(a){a.plugins={},a.prototype.initializePlugins=function(a){var b,d,e,f=this,g=[];if(f.plugins={names:[],settings:{},requested:{},loaded:{}},c.isArray(a))for(b=0,d=a.length;d>b;b++)"string"==typeof a[b]?g.push(a[b]):(f.plugins.settings[a[b].name]=a[b].options,g.push(a[b].name));else if(a)for(e in a)a.hasOwnProperty(e)&&(f.plugins.settings[e]=a[e],g.push(e));for(;g.length;)f.require(g.shift())},a.prototype.loadPlugin=function(b){var c=this,d=c.plugins,e=a.plugins[b];
if(!a.plugins.hasOwnProperty(b))throw new Error('Unable to find "'+b+'" plugin');d.requested[b]=!0,d.loaded[b]=e.fn.apply(c,[c.plugins.settings[b]||{}]),d.names.push(b)},a.prototype.require=function(a){var b=this,c=b.plugins;if(!b.plugins.loaded.hasOwnProperty(a)){if(c.requested[a])throw new Error('Plugin has circular dependency ("'+a+'")');b.loadPlugin(a)}return c.loaded[a]},a.define=function(b,c){a.plugins[b]={name:b,fn:c}}};var c={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)
}};return b}),ed.define("site/vendors/prism",function(){!function(){var a=/\blang(?:uage)?-(?!\*)(\w+)\b/i,b=self.Prism={util:{type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},clone:function(a){var c=b.util.type(a);switch(c){case"Object":var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=b.util.clone(a[e]));return d;case"Array":return a.slice()}return a}},languages:{extend:function(a,c){var d=b.util.clone(b.languages[a]);for(var e in c)d[e]=c[e];return d},insertBefore:function(a,c,d,e){e=e||b.languages;
var f=e[a],g={};for(var h in f)if(f.hasOwnProperty(h)){if(h==c)for(var i in d)d.hasOwnProperty(i)&&(g[i]=d[i]);g[h]=f[h]}return e[a]=g},DFS:function(a,c){for(var d in a)c.call(a,d,a[d]),"Object"===b.util.type(a)&&b.languages.DFS(a[d],c)}},highlightAll:function(a,c){for(var f,d=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),e=0;f=d[e++];)b.highlightElement(f,a===!0,c)},highlightElement:function(d,e,f){for(var g,h,i=d;i&&!a.test(i.className);)i=i.parentNode;
if(i&&(g=(i.className.match(a)||[,""])[1],h=b.languages[g]),h){d.className=d.className.replace(a,"").replace(/\s+/g," ")+" language-"+g,i=d.parentNode,/pre/i.test(i.nodeName)&&(i.className=i.className.replace(a,"").replace(/\s+/g," ")+" language-"+g);var j=d.textContent;if(j){j=j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var k={element:d,language:g,grammar:h,code:j};if(b.hooks.run("before-highlight",k),e&&self.Worker){var l=new Worker(b.filename);l.onmessage=function(a){k.highlightedCode=c.stringify(JSON.parse(a.data),g),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(k.element),b.hooks.run("after-highlight",k)
},l.postMessage(JSON.stringify({language:k.language,code:k.code}))}else k.highlightedCode=b.highlight(k.code,k.grammar,k.language),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(d),b.hooks.run("after-highlight",k)}}},highlight:function(a,d,e){return c.stringify(b.tokenize(a,d),e)},tokenize:function(a,c){var e=b.Token,f=[a],g=c.rest;if(g){for(var h in g)c[h]=g[h];delete c.rest}a:for(var h in c)if(c.hasOwnProperty(h)&&c[h]){var i=c[h],j=i.inside,k=!!i.lookbehind,l=0;i=i.pattern||i;
for(var m=0;m<f.length;m++){var n=f[m];if(f.length>a.length)break a;if(!(n instanceof e)){i.lastIndex=0;var o=i.exec(n);if(o){k&&(l=o[1].length);var p=o.index-1+l,o=o[0].slice(l),q=o.length,r=p+q,s=n.slice(0,p+1),t=n.slice(r+1),u=[m,1];s&&u.push(s);var v=new e(h,j?b.tokenize(o,j):o);u.push(v),t&&u.push(t),Array.prototype.splice.apply(f,u)}}}}return f},hooks:{all:{},add:function(a,c){var d=b.hooks.all;d[a]=d[a]||[],d[a].push(c)},run:function(a,c){var d=b.hooks.all[a];if(d&&d.length)for(var f,e=0;f=d[e++];)f(c)
}}},c=b.Token=function(a,b){this.type=a,this.content=b};if(c.stringify=function(a,d,e){if("string"==typeof a)return a;if("[object Array]"==Object.prototype.toString.call(a))return a.map(function(b){return c.stringify(b,d,a)}).join("");var f={type:a.type,content:c.stringify(a.content,d,e),tag:"span",classes:["token",a.type],attributes:{},language:d,parent:e};"comment"==f.type&&(f.attributes.spellcheck="true"),b.hooks.run("wrap",f);var g="";for(var h in f.attributes)g+=h+'="'+(f.attributes[h]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+g+">"+f.content+"</"+f.tag+">"
},!self.document)return self.addEventListener("message",function(a){var c=JSON.parse(a.data),d=c.language,e=c.code;self.postMessage(JSON.stringify(b.tokenize(e,b.languages[d]))),self.close()},!1),void 0;var d=document.getElementsByTagName("script");d=d[d.length-1],d&&(b.filename=d.src,document.addEventListener&&!d.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",b.highlightAll))}(),Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))
}),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}}),Prism.languages.css.selector={pattern:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,inside:{"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/g,"pseudo-class":/:[-\w]+(?:\(.*\))?/g,"class":/\.[-:\.\w]+/g,id:/#[-:\.\w]+/g}},Prism.languages.insertBefore("css","ignore",{hexcode:/#[\da-f]{3,6}/gi,entity:/\\[\da-f]{1,8}/gi,number:/[\d%\.]+/g,"function":/(attr|calc|cross-fade|cycle|element|hsla?|image|lang|linear-gradient|matrix3d|matrix|perspective|radial-gradient|repeating-linear-gradient|repeating-radial-gradient|rgba?|rotatex|rotatey|rotatez|rotate3d|rotate|scalex|scaley|scalez|scale3d|scale|skewx|skewy|skew|steps|translatex|translatey|translatez|translate3d|translate|url|var)/gi}),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/gi,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/gi,inside:{punctuation:/\(/}},number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|throw|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/g,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+[e]?[\d]*[df]\b|\W\d*\.?\d+\b/gi,operator:{pattern:/([^\.]|^)([-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\/|%|\^|(&lt;){2}|($gt;){2,3}|:|~)/g,lookbehind:!0}}),Prism.languages.php=Prism.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|extends|private|protected|parent|static|throw|null|echo|print|trait|namespace|use|final|yield|goto|instanceof|finally|try|catch)\b/gi,constant:/\b[A-Z0-9_]{2,}\b/g}),Prism.languages.insertBefore("php","keyword",{delimiter:/(\?>|&lt;\?php|&lt;\?)/gi,variable:/(\$\w+)\b/gi,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/g,lookbehind:!0,inside:{punctuation:/\\/}}}),Prism.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/g,lookbehind:!0}}),Prism.languages.markup&&(Prism.hooks.add("before-highlight",function(a){"php"===a.language&&(a.tokenStack=[],a.code=a.code.replace(/(?:&lt;\?php|&lt;\?|<\?php|<\?)[\w\W]*?(?:\?&gt;|\?>)/gi,function(b){return a.tokenStack.push(b),"{{{PHP"+a.tokenStack.length+"}}}"
}))}),Prism.hooks.add("after-highlight",function(a){if("php"===a.language){for(var c,b=0;c=a.tokenStack[b];b++)a.highlightedCode=a.highlightedCode.replace("{{{PHP"+(b+1)+"}}}",Prism.highlight(c,a.grammar,"php"));a.element.innerHTML=a.highlightedCode}}),Prism.hooks.add("wrap",function(a){"php"===a.language&&"markup"===a.type&&(a.content=a.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),Prism.languages.insertBefore("php","comment",{markup:{pattern:/(&lt;|<)[^?]\/?(.*?)(>|&gt;)/g,inside:Prism.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/g})),Prism.languages.insertBefore("php","variable",{"this":/\$this/g,global:/\$_?(GLOBALS|SERVER|GET|POST|FILES|REQUEST|SESSION|ENV|COOKIE|HTTP_RAW_POST_DATA|argc|argv|php_errormsg|http_response_header)/g,scope:{pattern:/\b[\w\\]+::/g,inside:{keyword:/(static|self|parent)/,punctuation:/(::|\\)/}}}),Prism.languages.coffeescript=Prism.languages.extend("javascript",{"block-comment":/([#]{3}\s*\r?\n(.*\s*\r*\n*)\s*?\r?\n[#]{3})/g,comment:/(\s|^)([#]{1}[^#^\r^\n]{2,}?(\r?\n|$))/g,keyword:/\b(this|window|delete|class|extends|namespace|extend|ar|let|if|else|while|do|for|each|of|return|in|instanceof|new|with|typeof|try|catch|finally|null|undefined|break|continue)\b/g}),Prism.languages.insertBefore("coffeescript","keyword",{"function":{pattern:/[a-z|A-z]+\s*[:|=]\s*(\([.|a-z\s|,|:|{|}|\"|\'|=]*\))?\s*-&gt;/gi,inside:{"function-name":/[_?a-z-|A-Z-]+(\s*[:|=])| @[_?$?a-z-|A-Z-]+(\s*)| /g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g}},"attr-name":/[_?a-z-|A-Z-]+(\s*:)| @[_?$?a-z-|A-Z-]+(\s*)| /g}),Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&amp;|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm}),Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return)|(?=@for\s+\$[-_\w]+\s)+from/i}),Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i}),Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g}),Prism.languages.bash=Prism.languages.extend("clike",{comment:{pattern:/(^|[^"{\\])(#.*?(\r?\n|$))/g,lookbehind:!0},string:{pattern:/("|')(\\?[\s\S])*?\1/g,inside:{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^\}]+\})/g}},keyword:/\b(if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)\b/g}),Prism.languages.insertBefore("bash","keyword",{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^}]+\})/g}),Prism.languages.insertBefore("bash","comment",{important:/(^#!\s*\/bin\/bash)|(^#!\s*\/bin\/sh)/g}),Prism.languages.c=Prism.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/g,operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\//g}),Prism.languages.insertBefore("c","keyword",{property:/#\s*[a-zA-Z]+/g}),Prism.languages.cpp=Prism.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|delete\[\]|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|new\[\]|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/g,operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|:{1,2}|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/g}),Prism.languages.python={comment:{pattern:/(^|[^\\])#.*?(\r?\n|$)/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/g,"boolean":/\b(True|False)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|=?&lt;|=?&gt;|!|={1,2}|(&){1,2}|(&amp;){1,2}|\|?\||\?|\*|\/|~|\^|%|\b(or|and|not)\b/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.sql={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|((--)|(\/\/)).*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(ACTION|ADD|AFTER|ALGORITHM|ALTER|ANALYZE|APPLY|AS|ASC|AUTHORIZATION|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADE|CASCADED|CASE|CHAIN|CHAR VARYING|CHARACTER VARYING|CHECK|CHECKPOINT|CLOSE|CLUSTERED|COALESCE|COLUMN|COLUMNS|COMMENT|COMMIT|COMMITTED|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS|CONTAINSTABLE|CONTINUE|CONVERT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|CURRENT_USER|CURSOR|DATA|DATABASE|DATABASES|DATETIME|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DOUBLE PRECISION|DROP|DUMMY|DUMP|DUMPFILE|DUPLICATE KEY|ELSE|ENABLE|ENCLOSED BY|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPE|ESCAPED BY|EXCEPT|EXEC|EXECUTE|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR|FOR EACH ROW|FORCE|FOREIGN|FREETEXT|FREETEXTTABLE|FROM|FULL|FUNCTION|GEOMETRY|GEOMETRYCOLLECTION|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|IDENTITY|IDENTITY_INSERT|IDENTITYCOL|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTO|INVOKER|ISOLATION LEVEL|JOIN|KEY|KEYS|KILL|LANGUAGE SQL|LAST|LEFT|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONGBLOB|LONGTEXT|MATCH|MATCHED|MEDIUMBLOB|MEDIUMINT|MEDIUMTEXT|MERGE|MIDDLEINT|MODIFIES SQL DATA|MODIFY|MULTILINESTRING|MULTIPOINT|MULTIPOLYGON|NATIONAL|NATIONAL CHAR VARYING|NATIONAL CHARACTER|NATIONAL CHARACTER VARYING|NATIONAL VARCHAR|NATURAL|NCHAR|NCHAR VARCHAR|NEXT|NO|NO SQL|NOCHECK|NOCYCLE|NONCLUSTERED|NULLIF|NUMERIC|OF|OFF|OFFSETS|ON|OPEN|OPENDATASOURCE|OPENQUERY|OPENROWSET|OPTIMIZE|OPTION|OPTIONALLY|ORDER|OUT|OUTER|OUTFILE|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREV|PRIMARY|PRINT|PRIVILEGES|PROC|PROCEDURE|PUBLIC|PURGE|QUICK|RAISERROR|READ|READS SQL DATA|READTEXT|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEATABLE|REPLICATION|REQUIRE|RESTORE|RESTRICT|RETURN|RETURNS|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROWCOUNT|ROWGUIDCOL|ROWS?|RTREE|RULE|SAVE|SAVEPOINT|SCHEMA|SELECT|SERIAL|SERIALIZABLE|SESSION|SESSION_USER|SET|SETUSER|SHARE MODE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|START|STARTING BY|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLE|TABLES|TABLESPACE|TEMPORARY|TEMPTABLE|TERMINATED BY|TEXT|TEXTSIZE|THEN|TIMESTAMP|TINYBLOB|TINYINT|TINYTEXT|TO|TOP|TRAN|TRANSACTION|TRANSACTIONS|TRIGGER|TRUNCATE|TSEQUAL|TYPE|TYPES|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNPIVOT|UPDATE|UPDATETEXT|USAGE|USE|USER|USING|VALUE|VALUES|VARBINARY|VARCHAR|VARCHARACTER|VARYING|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH|WITH ROLLUP|WITHIN|WORK|WRITE|WRITETEXT)\b/gi,"boolean":/\b(TRUE|FALSE|NULL)\b/gi,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/\b(ALL|AND|ANY|BETWEEN|EXISTS|IN|LIKE|NOT|OR|IS|UNIQUE|CHARACTER SET|COLLATE|DIV|OFFSET|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b|[-+]{1}|!|=?&lt;|=?&gt;|={1}|(&amp;){1,2}|\|?\||\?|\*|\//gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[;[\]()`,.]/g},Prism.languages.groovy=Prism.languages.extend("clike",{keyword:/\b(as|def|in|abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|transient|try|void|volatile|while)\b/g,string:/("""|''')[\W\w]*?\1|("|'|\/)[\W\w]*?\2/g,number:/\b0b[01_]+\b|\b0x[\da-f_]+(\.[\da-f_p\-]+)?\b|\b[\d_]+(\.[\d_]+[e]?[\d]*)?[glidf]\b|[\d_]+(\.[\d_]+)?\b/gi,operator:/={0,2}~|\?\.|\*?\.@|\.&amp;|\.(?=\w)|\.{2}(&lt;)?(?=\w)|-&gt;|\?:|[-+]{1,2}|!|&lt;=&gt;|(&gt;){1,3}|(&lt;){1,2}|={1,2}|(&amp;){1,2}|\|{1,2}|\?|\*{1,2}|\/|\^|%/g,punctuation:/\.+|[{}[\];(),:$]/g,annotation:/@\w+/}),Prism.languages.insertBefore("groovy","punctuation",{"spock-block":/\b(setup|given|when|then|and|cleanup|expect|where):/g}),Prism.hooks.add("wrap",function(a){if("groovy"===a.language&&"string"===a.type){var b=a.content[0];
"'"!=b&&(a.content=Prism.highlight(a.content,{expression:{pattern:/([^\\])(\$(\{.*?\}|[\w\.]*))/,lookbehind:!0,inside:Prism.languages.groovy}}),a.classes.push("/"===b?"regex":"gstring"))}}),Prism.languages.http={"request-line":{pattern:/^(POST|GET|PUT|DELETE|OPTIONS)\b\shttps?:\/\/\S+\sHTTP\/[0-9.]+/g,inside:{property:/^\b(POST|GET|PUT|DELETE|OPTIONS)\b/g,"attr-name":/:\w+/g}},"response-status":{pattern:/^HTTP\/1.[01] [0-9]+.*/g,inside:{property:/[0-9]+[A-Z\s-]+$/g}},keyword:/^[\w-]+:(?=.+)/gm};var a={"application/json":Prism.languages.javascript,"application/xml":Prism.languages.markup,"text/xml":Prism.languages.markup,"text/html":Prism.languages.markup};
for(var b in a)if(a[b]){var c={};c[b]={pattern:new RegExp("(content-type:\\s*"+b+"[\\w\\W]*?)\\n\\n[\\w\\W]*","gi"),lookbehind:!0,inside:{rest:a[b]}},Prism.languages.insertBefore("http","keyword",c)}Prism.languages.ruby=Prism.languages.extend("clike",{comment:/#[^\r\n]*(\r?\n|$)/g,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/g,builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*[?!]?\b/g}),Prism.languages.insertBefore("ruby","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0},variable:/[@$&]+\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g,symbol:/:\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g}),Prism.languages.gherkin={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|((#)|(\/\/)).*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,atrule:/\b(And|Given|When|Then|In order to|As an|I want to|As a)\b/g,keyword:/\b(Scenario Outline|Scenario|Feature|Background|Story)\b/g},Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(abstract|as|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/g,string:/@?("|')(\\?.)*?\1/g,preprocessor:/^\s*#.*/gm,number:/\b-?(0x)?\d*\.?\d+\b/g}),Prism.hooks.add("after-highlight",function(a){var b=a.element.parentNode;
if(b&&/pre/i.test(b.nodeName)&&-1!==b.className.indexOf("line-numbers")){var d,c=1+a.code.split("\n").length;lines=new Array(c),lines=lines.join("<span></span>"),d=document.createElement("span"),d.className="line-numbers-rows",d.innerHTML=lines,b.hasAttribute("data-start")&&(b.style.counterReset="linenumber "+(parseInt(b.getAttribute("data-start"),10)-1)),a.element.appendChild(d)}})}),ed.define("responsive",["edjquery"],function(a){a.responsive=function(a,b){return new d(a,b)},a.fn.responsive=function(b){if(b){var c=this,d={elementWidth:function(a){return a.outerWidth(!0)
},conditions:b};a.responsive(c,d)}return this};var b=a(window),c=a.isFunction,d=function(c,d){var e=this,c=a(c),f=c.data("$responsive");f&&f.destroy(),a.extend(e,{elem:c,options:d,conditions:a.sortBy(a.makeArray(d.conditions),function(a){return a.at}),event:"resize.responsive"+a.uid(),handler:a.debounce(function(){e.set()},250)}),delete d.conditions,c.data("$responsive",e),a(function(){b.on(e.event,e.handler),e.set()}),a(window).load(function(){e.set()})};a.extend(d.prototype,{set:function(){var b=this,d=b.options.elementWidth;
b.elem.each(function(){var e=a(this),f=c(d)?d(e):d;b.removeCondition(e.data("currentCondition"),e),a.each(b.conditions,function(a,c){var d=c.at;return d>=f?(b.applyCondition(c,e),!1):void 0})})},applyCondition:function(b,d){var e,f,g,h;(e=b.switchTo)&&d.addClass(e),(f=b.alsoSwitch)&&a.each(f,function(b,c){a(b).addClass(c)}),(g=b.switchStylesheet)&&a.each(a.makeArray(g),function(b,c){var d=a('link[href$="'+c+'"]');d.length<1&&a("<link/>").attr({rel:"stylesheet",type:"text/css",href:c}).appendTo("head")}),(h=b.whenApplied)&&c(h)&&h(),d.data("currentCondition",b).trigger("responsive",[b])
},removeCondition:function(b,d){if(b){var e,f,g,h;(e=b.switchTo)&&d.removeClass(e),(f=b.alsoSwitch)&&a.each(f,function(b,c){a(b).removeClass(c)}),(g=b.switchStylesheet)&&a.each(a.makeArray(g),function(b,c){a('link[href$="'+c+'"]').remove()}),(h=b.whenRemoved)&&c(h)&&h(),d.removeData("currentCondition")}},resetToDefault:function(b){var c=this,d=c.elem;a.each(c.conditions,function(a,e){b&&a==b||c.removeCondition(e,d)})},destroy:function(){b.off(this.event);var c=this;c.elem.each(function(){var b=a(this);c.removeCondition(b.data("currentCondition"),b)
})}})}),ed.define("site/vendors/sifter",["edjquery"],function(a){var b=function(a,b){this.items=a,this.settings=b||{diacritics:!0}};b.prototype.tokenize=function(a){if(a=e(String(a||"").toLowerCase()),!a||!a.length)return[];var b,c,d,g,i=[],j=a.split(/ +/);for(b=0,c=j.length;c>b;b++){if(d=f(j[b]),this.settings.diacritics)for(g in h)h.hasOwnProperty(g)&&(d=d.replace(new RegExp(g,"g"),h[g]));i.push({string:j[b],regex:new RegExp(d,"i")})}return i},b.prototype.iterator=function(a,b){var c;c=g(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;c>b;b++)a(this[b],b,this)
}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)},c.apply(a,[b])},b.prototype.getScoreFunction=function(a,b){var c,d,e,f;c=this,a=c.prepareSearch(a,b),e=a.tokens,d=a.options.fields,f=e.length;var g=function(a,b){var c,d;return a?(a=String(a||""),d=a.search(b.regex),-1===d?0:(c=b.string.length/a.length,0===d&&(c+=.5),c)):0},h=function(){var a=d.length;return a?1===a?function(a,b){return g(b[d[0]],a)}:function(b,c){for(var e=0,f=0;a>e;e++)f+=g(c[d[e]],b);return f/a}:function(){return 0
}}();return f?1===f?function(a){return h(e[0],a)}:"and"===a.options.conjunction?function(a){for(var b,c=0,d=0;f>c;c++){if(b=h(e[c],a),0>=b)return 0;d+=b}return d/f}:function(a){for(var b=0,c=0;f>b;b++)c+=h(e[b],a);return c/f}:function(){return 0}},b.prototype.getSortFunction=function(a,b){var d,e,f,g,h,i,j,k,l,m,n;if(f=this,a=f.prepareSearch(a,b),n=!a.query&&b.sort_empty||b.sort,l=function(a,b){return"$score"===a?b.score:f.items[b.id][a]},h=[],n)for(d=0,e=n.length;e>d;d++)(a.query||"$score"!==n[d].field)&&h.push(n[d]);
if(a.query){for(m=!0,d=0,e=h.length;e>d;d++)if("$score"===h[d].field){m=!1;break}m&&h.unshift({field:"$score",direction:"desc"})}else for(d=0,e=h.length;e>d;d++)if("$score"===h[d].field){h.splice(d,1);break}for(k=[],d=0,e=h.length;e>d;d++)k.push("desc"===h[d].direction?-1:1);return i=h.length,i?1===i?(g=h[0].field,j=k[0],function(a,b){return j*c(l(g,a),l(g,b))}):function(a,b){var d,e,j;for(d=0;i>d;d++)if(j=h[d].field,e=k[d]*c(l(j,a),l(j,b)))return e;return 0}:null},b.prototype.prepareSearch=function(a,b){if("object"==typeof a)return a;
b=d({},b);var c=b.fields,e=b.sort,f=b.sort_empty;return c&&!g(c)&&(b.fields=[c]),e&&!g(e)&&(b.sort=[e]),f&&!g(f)&&(b.sort_empty=[f]),{options:b,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},b.prototype.search=function(a,b){var e,f,h,i,c=this;return f=this.prepareSearch(a,b),b=f.options,a=f.query,i=b.score||c.getScoreFunction(f),a.length?c.iterator(c.items,function(a,c){e=i(a),(b.filter===!1||e>0)&&f.items.push({score:e,id:c})}):c.iterator(c.items,function(a,b){f.items.push({score:1,id:b})
}),h=c.getSortFunction(f,b),h&&f.items.sort(h),f.total=f.items.length,"number"==typeof b.limit&&(f.items=f.items.slice(0,b.limit)),f};var c=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:b>a?-1:0:(a=i(String(a||"")),b=i(String(b||"")),a>b?1:b>a?-1:0)},d=function(a){var c,d,e,f;for(c=1,d=arguments.length;d>c;c++)if(f=arguments[c])for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);return a},e=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},f=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")
},g=Array.isArray||a&&a.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h={a:"[a\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\u0100\u0101\u0105\u0104]",c:"[c\xc7\xe7\u0107\u0106\u010d\u010c]",d:"[d\u0111\u0110\u010f\u010e]",e:"[e\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb\u011b\u011a\u0112\u0113\u0119\u0118]",i:"[i\xcc\xcd\xce\xcf\xec\xed\xee\xef\u012a\u012b]",l:"[l\u0142\u0141]",n:"[n\xd1\xf1\u0148\u0147\u0144\u0143]",o:"[o\xd2\xd3\xd4\xd5\xd5\xd6\xd8\xf2\xf3\xf4\xf5\xf6\xf8\u014c\u014d]",r:"[r\u0159\u0158]",s:"[s\u0160\u0161\u015b\u015a]",t:"[t\u0165\u0164]",u:"[u\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc\u016f\u016e\u016a\u016b]",y:"[y\u0178\xff\xfd\xdd]",z:"[z\u017d\u017e\u017c\u017b\u017a\u0179]"},i=function(){var a,b,c,d,e="",f={};
for(c in h)if(h.hasOwnProperty(c))for(d=h[c].substring(2,h[c].length-1),e+=d,a=0,b=d.length;b>a;a++)f[d.charAt(a)]=c;var g=new RegExp("["+e+"]","g");return function(a){return a.replace(g,function(a){return f[a]}).toLowerCase()}}();return b}),ed.define("api",["edjquery","easydiscuss","markitup"],function(a,b){a(document).on("click.conversation","[data-ed-conversations-api]",function(){var c=a(this).data("userid");b.dialog({content:b.ajax("site/views/conversation/compose",{id:c}),bindings:{init:function(){console.log("initializing")
}}})})}),ed.define("site/src/ask",["edq","abstract"],function(a,b){return new b(function(){return{opts:{"{submit}":"[data-form-submit]"},"{submit} click":function(b){if(!b.attr("disabled")){var c="",d=!1,e=a(".discuss-form *[name=category_id]").val();if(0==e||0==e.length){var f=a.language("COM_EASYDISCUSS_PLEASE_SELECT_CATEGORY_DESC");c+="<li>"+f+"</li>",d=!0}if(""==a("#ez-title").val()&&""==a("#post-topic-title").val()){var f=a.language("COM_EASYDISCUSS_POST_TITLE_CANNOT_EMPTY");c+="<li>"+f+"</li>",d=!0}var g=discuss.getContent();
if(""==g){var f=a.language("COM_EASYDISCUSS_POST_CONTENT_IS_EMPTY");c+="<li>"+f+"</li>",d=!0}return d?(c='<div class="alert alert-error"><ul class="unstyled">'+c+"</ul></div>",a(".ask-notification").html(""),a(".ask-notification").append(c),a(document).scrollTop(a(".ask-notification").offset().top),!1):(a(this).prop("disabled",!0),a("#dc_submit").submit(),!1)}}}})}),ed.define("site/src/attachments",["edq","abstract"],function(a){var d=a("[data-ed-attachment-form]").clone(),e=a("[data-ed-attachment-item-input]");
e.on("change",function(){var a=el.parents(self.opts["{form}"]);g(a)});var f=function(b){var c=b.substr(b.lastIndexOf(".")+1),d="default";return-1!=a.inArray(c,self.opts.types.image)&&(d="image"),-1!=a.inArray(c,self.opts.types.archive)&&(d="archive"),-1!=a.inArray(c,self.opts.types.pdf)&&(d="pdf"),d},g=function(b){var c=b.find("input:not(:hidden)"),d={title:c.val(),type:f(c.val())};d.title.match(/fakepath/)&&(d.title=d.title.replace(/C:\\fakepath\\/i,""));var e=b.children(self.opts["{title}"]);e.html(d.title),b.removeClass("ed-attachment-form").addClass("attachment-type-"+d.type);
var g=a("[data-ed-attachments-list]");b.appendTo(g),h()},h=function(){var a=d.clone();self.element.append(a)};return{opts:{clonedForm:null,"{list}":"[data-ed-attachments-list]","{form}":"[data-ed-attachment-form]","{title}":"[data-ed-attachment-item-title]","{input}":"[data-attachment-item-input]","{removeItem}":"[data-ed-attachment-item-remove]"},init:function(){self.clonedForm=self.form().clone()},getType:function(){},remove:function(a){a.remove()},reset:function(){},"{input} change":function(){},"{removeItem} click":function(a){var c=a.parents(".attachment-item");
self.remove(c)}}}),ed.define("site/src/bbcode",["edq","abstract","markitup","lodash","site/vendors/jquery.expanding"],function(a,b,c,d){var e=new b(function(b){return{opts:{editorType:null,operation:null,"{editor}":"[name=dc_reply_content]","{tabs}":".formTabs [data-foundry-toggle=tab]","{form}":"form[name=dc_submit]","{attachmentItem}":"[data-attachment-item]","{attachments}":"input.fileInput","{submitButton}":".submit-reply","{cancelButton}":".cancel-reply","{notification}":".replyNotification","{loadingIndicator}":".reply-loading"},init:function(){b.id=b.element.data("id"),b.options.operation=b.element.data("operation"),b.options.editorType=b.element.data("editortype"),"bbcode"==b.options.editorType&&b.editor().markItUp(b.options.bbcodeSettings).expandingTextarea()
},initMentions:function(){b.editor().mentionsInput({allowRepeat:!0,minChars:1,onDataRequest:function(a,b,c){var e=[{id:1,name:"Kenneth Auchenberg",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:2,name:"Jon Froda",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:3,name:"Anders Pollas",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:4,name:"Kasper Hulthin",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:5,name:"Andreas Haugstrup",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:6,name:"Pete Lacey",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:7,name:"kenneth@auchenberg.dk",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:8,name:"Pete Awesome Lacey",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"},{id:9,name:"Kenneth Hulthin",avatar:"http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif",type:"contact"}];
e=d.filter(e,function(a){return a.name.toLowerCase().indexOf(b.toLowerCase())>-1}),c.call(this,e)},onCaret:!0}),a(".get-syntax-text").click(function(){a("textarea.mention").mentionsInput("val",function(a){alert(a)})}),a(".get-mentions").click(function(){a("textarea.mention").mentionsInput("getMentions",function(a){alert(JSON.stringify(a))})})},"{submitButton} click":function(){b.submit()},"{cancelButton} click":function(){b.trigger("cancel")},notify:function(a,c){b.notification().addClass("alert-"+a).html(c).show()
},submit:function(){var a=b.form().serializeObject();a.content=a.dc_reply_content,a.files=b.attachmentItem(":not(.new)").find("input[type=file]"),EasyDiscuss.ajax("site/views/post/saveReply",a,{type:"iframe",beforeSend:function(){b.submitButton().prop("disabled",!0),b.loadingIndicator().show()},notify:b.notify,reloadCaptcha:function(){"undefined"!=typeof Recaptcha&&Recaptcha.reload()},complete:function(){b._destroyed||(b.submitButton().removeAttr("disabled"),b.loadingIndicator().hide())}}).done(function(a){b.trigger("save",a)
}).fail(b.notify)}}});return e}),ed.define("site/src/conversations",["edq","easydiscuss","markitup","jquery.expanding","jquery.scrollto"],function(a){a(document).ready(function(){var b=a("[data-ed-conversation-contents-wrapper]"),c=a("[data-ed-conversation-contents]"),d=a("[data-ed-conversation-reply-form]"),e=a("[data-ed-conversation-reply-form-notice]"),f=a("[data-ed-conversation-reply-button]"),g=a("[data-ed-conversation-reply-textarea]"),h=a("[data-ed-conversations-list]"),i=a("[data-ed-conversations-list-items]"),j=i.find("[data-ed-conversations-item]"),k=a("[data-ed-conversation-title]"),l=function(){var b=a("[data-ed-conversation-contents-scroller]"),c=a("[data-ed-conversation-latest]");
b.scrollTo(c)},m=function(){g.val("")},n=function(b){var c=a("[data-ed-conversations-list-items]"),d=c.find("[data-ed-conversations-item]");d.removeClass("is-active"),b.addClass("is-active"),l()},o=function(a){EasyDiscuss.dialog({content:EasyDiscuss.ajax("site/views/conversation/confirmArchive",{id:a})})},p=function(a){EasyDiscuss.dialog({content:EasyDiscuss.ajax("site/views/conversation/confirmDelete",{id:a})})},q=function(a){EasyDiscuss.ajax("site/views/conversation/unread",{id:a}).done(function(){})},r=a("[data-ed-conversation-menu]");
r.live("click",function(b){b.stopPropagation(),b.preventDefault();{var c=a(this).parents(j.selector),d=c.data("id"),e=a(this).data("type");a(this)}"archive"==e&&o(d),"delete"==e&&p(d),"unread"==e&&(q(d),c.removeClass("is-active"),c.addClass("is-unread"),c.find(".open").removeClass("open"))}),l(),j.find("[data-ed-toggle=dropdown]").live("click",function(a){a.stopPropagation(),a.preventDefault()}),g.markItUp({markupSet:EasyDiscuss.bbcode}),g.expandingTextarea(),j.live("click",function(e){e.stopPropagation(),e.preventDefault();
var f=a(this),g=f.find("[data-link]"),h=a(this).data("id");g.route(),d.data("id",h),b.addClass("is-loading"),c.html(""),EasyDiscuss.ajax("site/views/conversation/getConversation",{id:h}).done(function(a,b){k.html(a),c.html(b),n(f)}).fail(function(a){c.html(a)}).always(function(){b.removeClass("is-loading")})}),f.live("click",function(b){b.preventDefault();var f=d.data("id"),h=(a(this),d.find("[data-ed-conversation-reply-textarea]")),i=h.val();EasyDiscuss.ajax("site/controllers/conversation/reply",{id:f,message:i}).done(function(b,d){e.addClass("text-success").html(d);
var f=a(b);c.append(f),m(),l()}).fail(function(a){e.addClass("text-danger").html(a)})});var s=a("[data-ed-conversation-archive]");s.live("click",function(){var a=d.data("id");o(a)});var t=a("[data-ed-conversation-unread]");t.live("click",function(){var a=d.data("id");q(a)});var u=a("[data-ed-conversation-delete]");u.live("click",function(){var a=d.data("id");p(a)});var v=a("[data-ed-conversations-toggle]"),w=a("[data-ed-conversations-sidebar]");v.on("click",function(){a(w).hasClass("is-open")?a(w).removeClass("is-open"):(a(w).removeClass("is-open"),a(w).addClass("is-open"))
});var x=a("[data-ed-conversations-tab]");x.on("click",function(c){c.stopPropagation(),c.preventDefault();var d=a(this).data("type"),e=a(this),f=e.find("> a");f.route(),x.removeClass("active"),e.addClass("active"),h.addClass("is-loading"),b.addClass("is-loading"),EasyDiscuss.ajax("site/views/conversation/getConversations",{type:d}).done(function(c){h.removeClass("is-loading"),h.removeClass("is-empty"),b.removeClass("is-loading"),b.removeClass("is-empty"),a("[data-ed-content-wrapper]").removeClass("has-active"),c.length<1&&(h.addClass("is-empty"),b.addClass("is-empty")),c.length>1&&a("[data-ed-content-wrapper]").addClass("has-active"),i.html(c);
var e=a(i.selector).children(":first");e.click()})})})}),ed.define("dependencies",["edq","easydiscuss"],function(a,b){a(document).on("mouseover.tooltip.data-ed-api","[data-ed-provide=tooltip]",function(){a(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div id="ed" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")}),a(document).on("mouseover","[rel=ed-popover]",function(){a(this).popover({container:"body",delay:{show:100,hide:100},animation:!1,trigger:"hover"})
}),a(document).on("click","[data-ed-subscribe]",function(){var c=a(this),d=c.data("type"),e=c.data("cid");b.dialog({content:b.ajax("site/views/subscription/form",{type:d,cid:e})})}),a(document).on("click","[data-ed-unsubscribe]",function(){var c=a(this),d=c.data("sid"),e=c.data("type"),f=c.data("cid");b.dialog({content:b.ajax("site/views/subscription/unsubscribeDialog",{sid:d,type:e,cid:f})})})}),ed.define("site/src/discuss",["edq"],function($){jQuery=$;var discuss={location:{remove:function(a){disjax.loadingDialog(),disjax.load("location","removeLocation",a.toString())
},removeHTML:function(a){$("#location-"+a).remove()}},reply:{clear:function(){if($("textarea[name=dc_reply_content]").val(""),window.CKEDITOR)try{window.CKEDITOR.instances.dc_reply_content.setData("")}catch(b){}discuss.attachments.clear(),discuss.references.clear(form),$(form).find(".showCoords").removeClass("showCoords"),$(form).find(".locationMap").remove(),$(form).find("[name=latitude]").val(""),$(form).find("[name=longitude]").val("");var c=$(form).find(".polls-tab").controller();c&&$(form).find(".polls-tab").controller().resetPollForm()
},submit:function(id){var token=$(".easydiscuss-token").val();action_url=discuss_site+"&view=post&layout=ajaxSubmitReply&format=ajax&tmpl=component&"+token+"=1",form=$("."+id).find("[name=dc_submit]")[0];var replyNotification=$("."+id).find(".replyNotification"),iframe=document.createElement("iframe");iframe.setAttribute("id","upload_iframe"),iframe.setAttribute("name","upload_iframe"),iframe.setAttribute("width","0"),iframe.setAttribute("height","0"),iframe.setAttribute("border","0"),iframe.setAttribute("style","width: 0; height: 0; border: none;"),form.parentNode.appendChild(iframe),window.frames.upload_iframe.name="upload_iframe";
var iframeId=document.getElementById("upload_iframe");$(".submit-reply").prop("disabled",!0);var eventHandler=function(){var content;iframeId.detachEvent?iframeId.detachEvent("onload",eventHandler):iframeId.removeEventListener("load",eventHandler,!1),iframeId.contentDocument?content=iframeId.contentDocument:iframeId.contentWindow?content=iframeId.contentWindow.document:iframeId.document&&(content=iframeId.document),content=$(content).find("script#ajaxResponse").html();var result=$.parseJSON(content);switch(result.type){case"success.captcha":Recaptcha.reload();
case"success":discuss.spinner.hide("reply_loading"),replyNotification.html(result.message).removeClass("alert-error").addClass("alert-success"),$(".discussionReplies .empty").hide();var count=$(".replyCount").html();if(count=parseInt(count)+1,$(".replyCount").html(count),$(".discussionReplies").length>0){var controller=$(".discussionReplies").controller();controller.addItem(result.html,!0)}discuss.attachments.initGallery({type:"image",helpers:{overlay:null}}),EasyDiscuss.main_syntax_highlighter&&Prism.highlightAll(),"undefined"!=result.script&&eval(result.script),form.reset(),discuss.reply.clear(form);
break;case"error":discuss.spinner.hide("reply_loading"),$(".submit-reply").removeAttr("disabled"),replyNotification.html(result.message).removeClass("alert-success").addClass("alert-error");break;case"error.captcha":Recaptcha.reload(),discuss.spinner.hide("reply_loading"),$(".submit-reply").removeAttr("disabled"),replyNotification.html(result.message).removeClass("alert-success").addClass("alert-error")}replyNotification.show(),$(".submit-reply").removeAttr("disabled"),setTimeout(function(){$(iframeId).remove()
},250)};$(iframeId).load(eventHandler),form.setAttribute("target","upload_iframe"),form.setAttribute("action",action_url),form.setAttribute("method","post"),form.setAttribute("enctype","multipart/form-data"),form.setAttribute("encoding","multipart/form-data"),form.submit(),EasyDiscuss.repliesCount=void 0===EasyDiscuss.repliesCount?1:EasyDiscuss.repliesCount+1},verify:function(){$("#dc_notification .msg_in").html(""),$("#dc_notification .msg_in").removeClass("dc_error dc_success dc_alert"),disjax.loadingDialog(),disjax.load("post","checklogin")
},post:function(){$(".submit-reply").prop("disabled",!0),$("#dc_notification .msg_in").html(""),$("#dc_notification .msg_in").removeClass("dc_error dc_success dc_alert"),discuss.spinner.show("reply_loading"),discuss.post.validate(!0,"reply")?disjax.load("post","ajaxSubmitReply",disjax.getFormVal("#dc_submit")):(discuss.spinner.hide("reply_loading"),$(".submit-reply").removeAttr("disabled"))},minimize:function(a){$("#dc_reply_"+a).hide(),$("#reply_minimize_msg_"+a).show()},maximize:function(a){$("#dc_reply_"+a).removeClass("is-minimized"),$("#reply_minimize_msg_"+a).hide()
},addURL:function(a){var b=$(a).siblings("ul.attach-list").children(":first").clone(),c=$(".remove-url").clone();c.css("display","block"),$(b).find("input").val(""),$(b).find("a").show(),$(a).siblings("ul.attach-list").append(b)},removeURL:function(a){var b=$("ul.attach-list").children();return 1==b.length?!1:($(a).parents("li").remove(),void 0)},accept:function(a){disjax.loadingDialog(),disjax.load("post","confirmAccept",a)},reject:function(a){disjax.loadingDialog(),disjax.load("post","confirmReject",a)}},composer:{init:function(a,b){EasyDiscuss.require().script("composer").done(function(){$(a).implement(EasyDiscuss.Controller.Composer,b)
})}},filter:function(a,b){EasyDiscuss.ajax("site.views.index.filter",{args:[a,b]},{beforeSend:function(){discuss.spinner.show("index-loading"),$("#dc_list").hide(),$("#dc_pagination").hide(),$("#filter-links").children().removeClass("active")},success:function(a,b,c,d,e,f){a&&$("#dc_featured_list").show(),$("#dc_list").html(b),$("#sort-wrapper").html(),$("#pagination-filter").val(d),$("#pagination-start").val(e),$("#dc_pagination").html(f)},complete:function(){discuss.spinner.hide("index-loading"),$("#dc_list").show(),$("#dc_pagination").show(),$("#filter-links").find("."+a).addClass("active")
}})},sort:function(a,b,c){discuss.spinner.show("index-loading"),"2"==discuss_featured_style&&"allposts"!=b&&$("#dc_featured_list").hide(),$("#dc_list").hide(),$("#dc_pagination").hide(),$("#sort-links").children().removeClass("active"),$("#sort-links").find("."+a).addClass("active"),disjax.load("index","sort",a,b,c)},references:{clear:function(a){var b=$(a).find(".field-references ul.attach-list"),c=b.children(":first").clone();b.empty().append(c)}},attachments:{initGallery:function(a){$(".attachment-image-link").fancybox(a)
},clear:function(){$(".uploadQueue").empty()}},map:{render:function(a,b,c,d){{var e=new google.maps.LatLng(b,c),f=new google.maps.Map(document.getElementById(d),{zoom:12,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({position:e,center:e,title:a,map:f})}}},widget:{init:function(){$(".widget-toggle").click(function(){$(this).parents(".discuss-widget").find(".widget-body").toggle(),$(this).parents(".discuss-widget").toggleClass("is-hidden")})}},post:{move:function(a){disjax.loadingDialog(),disjax.load("post","movePost",a)
},branch:function(a){disjax.loadingDialog(),disjax.load("post","branchForm",a)},mergeForm:function(a){disjax.loadingDialog(),disjax.load("post","mergeForm",a)},feature:function(a){disjax.loadingDialog(),disjax.load("post","confirmFeature",a)},unfeature:function(a){disjax.loadingDialog(),disjax.load("post","confirmUnfeature",a)},submit:function(){return"0"==$("#dc_submit #category_id").val()?(disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1):($("#createpost").prop("disabled",!0),document.dc_submit.submit(),void 0)
},qqSubmit:function(){return"0"==$("#category_id").val()?(disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1):($("#createpost").prop("disabled",!0),document.mod_edqq.submit(),void 0)},postTopicSubmit:function(){return"0"==$("#mod_post_topic_category_id").val()?(disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1):($("#createpost").prop("disabled",!0),document.mod_post_topic.submit(),void 0)},reply:function(){return discuss.post.validate(!0,"reply")&&(finalData=disjax.getFormVal("#dc_submit"),disjax.load("Post","ajaxSubmitReply",finalData)),!1
},validate:function(a,b){return a||""!=$("#ez-title").val()&&$("#ez-title").val()!=langPostTitle?!0:("reply"==b?($("#dc_notification .msg_in").html(langEmptyTitle),$("#dc_notification .msg_in").addClass("dc_error")):($("#dc_post_notification .msg_in").html(langEmptyTitle),$("#dc_post_notification .msg_in").addClass("dc_error")),!1)},del:function(a,b,c){disjax.loadingDialog(),disjax.load("post","deletePostForm",a,b,c)},vote:{add:function(a,b){disjax.load("Post","ajaxAddVote",a,b)},check:function(a){disjax.load("Post","ajaxSumVote",a)
},view:function(a){disjax.load("Post","ajaxViewVote",a,"")}},lock:function(a){disjax.load("Post","ajaxLockPost",a)},unlock:function(a){disjax.load("Post","ajaxUnlockPost",a)},resolve:function(a){disjax.load("Post","resolve",a)},unresolve:function(a){disjax.load("Post","unresolve",a)},likes:function(a,b,c){disjax.load("Post","ajaxLikes",a,b,c)},replyLikes:function(a,b,c){disjax.load("Post","ajaxReplyLikes",a,b,c)},onhold:function(a){disjax.load("Post","ajaxOnHoldPost",a)},accepted:function(a){disjax.load("Post","ajaxAcceptedPost",a)
},workingon:function(a){disjax.load("Post","ajaxWorkingOnPost",a)},reject:function(a){disjax.load("Post","ajaxRejectPost",a)},nostatus:function(a){disjax.load("Post","ajaxNoStatusPost",a)},featured:function(a,b){disjax.load("Post","ajaxFeatured",a,b)},toggleTools:function(a,b,c){a?($(".post_delete_link").show(),$(".likes").show(),$(".comments").show(),$(".vote_up").show(),$(".vote_down").show(),$("#dc_main_reply_form").show()):(discuss.comment.cancel(),"1"==c?$(".post_delete_link").show():$(".post_delete_link").hide(),$(".likes").hide(),$(".comments").hide(),$(".vote_up").hide(),$(".vote_down").hide(),$("#dc_main_reply_form").hide())
},attachment:{remove:function(a){$("#button-delete-att-"+a).prop("disabled",!0),disjax.load("post","deleteAttachment",a)}}},login:{verify:function(){return discuss.post.validate(!1,"reply")?($("#submit").prop("disabled",!0),disjax.loadingDialog(),disjax.load("post","checklogin"),void 0):!1},token:"",showpane:function(a){switch($("#usertype_pane_right").children().hide(),$("#usertype_pane_left").children(),$("#usertype_member").removeClass("active"),$("#usertype_guest").removeClass("active"),$("#discuss_register").removeClass("active"),$("#usertype_twitter").removeClass("active"),$("#usertype_status .msg_in").html(""),$("#usertype_status .msg_in").removeClass("dc_error"),a){case"guest":$("#usertype_guest").addClass("active"),$("#usertype_guest_pane_wrapper").show();
break;case"register":$("#discuss_register").addClass("active"),$("#discuss_register_pane_wrapper").show();break;case"twitter":$("#usertype_twitter").addClass("active"),$("#usertype_twitter_pane_wrapper").show();break;case"member":default:$("#usertype_member").addClass("active"),$("#usertype_member_pane_wrapper").show()}},submit:{reply:function(a){switch(a){case"guest":$("#edialog-guest-reply").prop("disabled",!0);var b=$("#discuss_usertype_guest_email").val(),c=$("#discuss_usertype_guest_name").val();disjax.load("post","ajaxGuestReply",b,c);
break;case"member":$("#edialog-member-reply").prop("disabled",!0);var d=$("#discuss_usertype_member_username").val(),e=$("#discuss_usertype_member_password").val(),f=discuss.login.token;disjax.load("post","ajaxMemberReply",d,e,f);break;case"twitter":$("#edialog-twitter-reply").prop("disabled",!0),disjax.load("post","ajaxTwitterReply")}}},getGuestDefaultName:function(){var a=$("#discuss_usertype_guest_email").val();$("#discuss_usertype_guest_name").val(a.split("@",1))},twitter:{signin:function(a){a?disjax.load("post","ajaxRefreshTwitter"):alert("failed")
},signout:function(){disjax.load("post","ajaxSignOutTwitter")}}},files:{add:function(){jQuery("#file_contents div").before('<input type="file" name="filedata[]" id="filedata" size="50" />')}},pagination:{more:function(a){"questions"==a?disjax.load("index","ajaxReadmore",$("#pagination-start").val(),$("#pagination-sorting").val(),a,$("#discuss_parent").val(),$("#pagination-filter").val(),$("#pagination-category").val(),$("#pagination-query").val()):disjax.load("index","ajaxReadmore",$("#pagination-start").val(),$("#pagination-sorting").val(),a,$("#discuss_parent").val(),$("#pagination-filter").val(),$("#pagination-category").val())
},addButton:function(a,b){html='<a href="javascript:void(0);" onclick="discuss.pagination.more( \''+a+"' );\"><span>"+b+"</span></a>",$("#dc_pagination a").length<1&&$("#dc_pagination").prepend(html)}},comment:{save:function(a){discuss.spinner.show("discussSubmitWait"),finalData=disjax.getFormVal("#frmComment"+a),disjax.load("Post","ajaxSubmitComment",finalData)},add:function(a,b){$(b).toggleClass("active"),$("#comment-action-container-"+a).toggle(),$("#err-msg .msg_in").html(""),$("#comment-notification-"+a+" .msg_in").html(""),$("#comment-notification-"+a+" .msg_in").removeClass("alert alert-error success")
},clearForm:function(a){$("#comment-err-msg .msg_in").html(""),$("#comment-err-msg .msg_in").removeClass("alert alert-error success"),$("#comment").val(""),$("#comment-action-container-"+a).hide()},cancel:function(a){$("#comment-err-msg .msg_in").html(""),$("#comment-err-msg .msg_in").removeClass("dc_alert dc_error dc_success"),$("#comment-notification-"+a+" .msg_in").html(""),$("#comment-notification-"+a+" .msg_in").removeClass("alert alert-error success"),$("#comment").val(""),$("#comment-action-container-"+a).hide(),$("#comments-button-"+a).show()
},remove:function(a){var b="Are you sure?";return window.confirm(b)?(disjax.load("Post","ajaxCommentDelete",a),EasyDiscuss.commentsCount=void 0===EasyDiscuss.commentsCount?0:EasyDiscuss.commentsCount-1,void 0):!1},removeEntry:function(a){$("#comment-"+a).remove()}},reports:{add:function(a){disjax.loadingDialog(),disjax.load("post","reportForm",a)},cancel:function(){disjax.closedlg()},submit:function(){disjax.load("post","ajaxSubmitReport",disjax.getFormVal("#frmReport"))},revertForm:function(a){effect.highlight("#post_content_layout_"+a),setTimeout(function(){discuss.reports.cancel()
},4e3)}},element:{focus:function(a){ele="#"+a,$(ele).focus()}},spinner:{show:function(a){var b=new Image;b.src=spinnerPath,b.name="discuss-loading",b.id="discuss-loading",$("#"+a).html(b),$("#"+a).show()},hide:function(a){$("#"+a).hide()}},system:{redirect:function(a){window.location=a},refresh:function(){window.location.reload()}},subscribe:{post:function(a){var b="post",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e="instant";discuss.spinner.show("dialog_loading"),disjax.load("post","ajaxAddSubscription",b,c,d,e,a+"")
},site:function(){var a="site",b=$("#subscribe_email").val(),c=$("#subscribe_name").val(),d=$("input:radio[name=subscription_interval]:checked").val(),e="0";discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",a,b,c,d,e+"")},tag:function(a){var b="tag",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e=$("input:radio[name=subscription_interval]:checked").val();discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",b,c,d,e,a+"")},category:function(a){var b="category",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e=$("input:radio[name=subscription_interval]:checked").val();
discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",b,c,d,e,a+"")},user:function(a){var b="user",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e=$("input:radio[name=subscription_interval]:checked").val();discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",b,c,d,e,a+"")}},user:{tabs:{show:function(a,b,c){discuss.spinner.show("profile-loading"),$(".user-tabs ul li").removeClass("active"),$(a).parent().addClass("active"),$("#dc_profile .tab-item").hide(),$("#dc_pagination").hide();
var d=$("#profile-id").val();c?disjax.load("profile","filter",b,d):$("#dc_profile ."+b).show()}},checkAlias:function(){var a=$("#profile-alias").val();""!=a&&disjax.load("profile","ajaxCheckAlias",a)}},tooltips:{init:function(){},execute:function(){}},notifications:{interval:3e3,monitor:null,count:null,startMonitor:function(){var a=discuss.notifications;a.monitor=setTimeout(a.update,a.interval)},stopMonitor:function(){clearTimeout(discuss.notifications.monitor)},update:function(){var a=discuss.notifications;
a.stopMonitor();var b={};b[$(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.notifications.count",b,{type:"jsonp",success:function(b){0==b&&($("#notification-count").hide(),$("#mod-notification-count").hide()),0!=b&&b&&(a.count!=b&&($("#notification-count").html(b),$("#mod-notification-count").html(b)),b>0&&($("#notification-count").show(),$("#mod-notification-count").show()),a.count=b)},complete:function(){a.startMonitor()}})}},conversation:{interval:3e3,monitor:null,count:null,startMonitor:function(){var a=discuss.conversation;
a.monitor=setTimeout(a.update,a.interval)},stopMonitor:function(){clearTimeout(discuss.conversation.monitor)},update:function(){var a=discuss.conversation;a.stopMonitor();var b={};b[$(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.conversation.count",b,{type:"jsonp",success:function(b){0==b&&$("#conversation-count").hide(),0!=b&&b&&(a.count!=b&&$("#conversation-count").html(b),b>0&&$("#conversation-count").show(),a.count=b)},complete:function(){a.startMonitor()}})},reply:function(a){EasyDiscuss.ajax("site.views.conversation.reply",{id:a}).done(function(){})
},write:function(a){disjax.load("conversation","write",a)},send:function(){var a=$("#conversationMessage").val(),b=$("#recipientId").val();return a?(EasyDiscuss.ajax("site.views.conversation.save",{contents:a,recipient:b}).done(function(a){disjax.dialog(a)}),void 0):($("#conversationEmptyMessage").show(),!1)}},polls:{show:function(){$("#discuss-polls").toggle(),$("#discuss-multiple-polls").toggle(),$("#discuss-multiple-polls-title").toggle()},vote:function(a){var b=$(a).val();disjax.load("polls","vote",b)},unvote:function(a){disjax.load("polls","unvote",a)
},showVoters:function(a){disjax.load("polls","getvoters",a)},lock:function(a){EasyDiscuss.ajax("site.views.polls.lockPolls",{postId:a}).done(function(a,b,c,d){b?$(".discussQuestion").addClass("is-poll-lock"):$("#dc_reply_"+c).addClass("is-poll-lock");for(var e=d.length,f=null,g=0;e>g;g++)f=d[g],$("#poll-count-"+f).attr("disabled","disabled"),$("#poll-count-"+f).prop("disabled","disabled");$("#poll_notice_"+c).html(a),$("#poll_notice_"+c).show(),$("#poll_notice_"+c).parent().addClass("alert")})},unlock:function(a){EasyDiscuss.ajax("site.views.polls.unlockPolls",{postId:a}).done(function(a,b,c){a?$(".discussQuestion").removeClass("is-poll-lock"):$("#dc_reply_"+b).removeClass("is-poll-lock");
for(var d=c.length,e=null,f=0;d>f;f++)e=c[f],$("#poll-count-"+e).removeAttr("disabled","disabled"),$("#poll-count-"+e).removeProp("disabled","disabled");$("#poll_notice_"+b).html(""),$("#poll_notice_"+b).parent().removeClass("alert")})}},tabs:{show:function(a,b){$(".form-tab-item").hide(),$(a).parent().siblings().removeClass("active"),$(a).parent().addClass("active"),$(".tab-"+b).show()}},toolbar:{login:function(){$("#dc_toolbar .to_login div.toolbar-note").toggle()}}};return discuss}),ed.define("site/src/favourite",["edq","easydiscuss"],function(a,b){var c=a("[data-ed-fav-button]");
c.live("click",function(){var d=a(this),e=d.parents("[data-ed-post-favourite]"),f=d.data("task"),g=d.data("id"),h=e.find("[data-ed-fav-count]"),i=parseInt(h.html()),j=e.find("[data-ed-fav-loader]"),l=(e.find("[data-original-title]"),e.find(c.selector+"[data-task=favourite]")),m=e.find(c.selector+"[data-task=unfavourite]");d.hide(),j.removeClass("t-hidden"),b.ajax("site/views/favourites/"+f,{postid:g}).always(function(){j.addClass("t-hidden"),e.removeClass("has-counter")}).done(function(){"favourite"==f&&(i+=1,l.hide(),m.show(),e.addClass("is-active")),"unfavourite"==f&&(i-=1,l.show(),m.hide(),e.removeClass("is-active")),h.html(i.toString()),i>0&&e.addClass("has-counter")
})});var d=a("[data-ed-counter-fav]");d.live("click",function(){var c=a(this),e=(c.parents("[data-ed-post-favourite]"),c.data("id"));b.dialog({content:b.ajax("site/views/favourites/popbox",{postid:e})})})}),ed.define("site/src/frontpage",["edq","easydiscuss","abstract","selectize"],function(a,b,c){var d=new c(function(a){return{opts:{activefiltertype:null,activeSortType:null,"{allPostsFilter}":".allPostsFilter","{newPostsFilter}":".newPostsFilter","{unResolvedFilter}":".unResolvedFilter","{resolvedFilter}":".resolvedFilter","{unAnsweredFilter}":".unAnsweredFilter","{sortLatest}":".sortLatest","{sortPopular}":".sortPopular","{itemList}":"[data-list-item]","{emptyList}":"div.empty","{pagination}":"[data-frontpage-pagination]","{sortTab}":"[data-sort-tab]","{filterTab}":"[data-filter-tab]","{indexSortTab}":"[data-index-sort-filter]"},init:function(){this.indexSortTab().selectize({onChange:function(b){a.doSort(b)
}})},doSort:function(a){this.sortTab().removeClass("active").filterBy("sortType",a).addClass("active"),filterType=this.options.activefiltertype,this.options.activeSortType=a,this.doFilter(filterType,a)},doFilter:function(a,c){var d=this.itemList(),f=(this.emptyList(),this.pagination());this.filterTab().removeClass("active").filterBy("filterType",a).addClass("active"),this.options.activefiltertype=a,void 0===c&&(c=this.options.activeSortType,null==c&&(c="latest")),d.children("div.ed-post-item").remove(),d.addClass("is-loading"),d.removeClass("is-empty"),b.ajax("site/views/index/filter",{filter:a,sort:c,id:this.element.data("id"),view:this.element.data("view")}).done(function(a,b){a.length<=0?d.addClass("is-empty"):d.append(a),f.html(b)
}).always(function(){d.removeClass("is-loading")})},"{filterTab} click":function(a){var b=a.data("filterType");this.doFilter(b)}}});return d}),ed.define("site/src/label",["edq","easydiscuss","abstract"],function(a,b){var c=new b(function(){return{init:function(b){var c=a(b),d=a(".discuss-post-label");c.on("click",function(){var b=a(this).data("labelid"),c=a(this).data("postid");EasyDiscuss.ajax("site/views/post/ajaxSaveLabel",{labelId:b,postId:c}).done(function(a){d.html(a)})})}}});return c}),ed.define("site/src/like",["edq","easydiscuss"],function(a,b){var c=a("[data-ed-likes-button]");
c.live("click",function(){var d=a(this),e=d.parents("[data-ed-post-likes]"),f=d.data("task"),g=d.data("id"),h=e.find("[data-ed-like-count]"),i=parseInt(h.html()),j=e.find("[data-ed-like-loader]"),k=e.find(c.selector+"[data-task=like]"),l=e.find(c.selector+"[data-task=unlike]");d.hide(),j.removeClass("t-hidden"),b.ajax("site/views/likes/"+f,{postid:g}).always(function(){j.addClass("t-hidden"),e.removeClass("has-counter")}).done(function(){"like"==f&&(i+=1,k.hide(),l.show(),e.addClass("is-active")),"unlike"==f&&(i-=1,l.hide(),k.show(),e.removeClass("is-active")),h.html(i.toString()),i>0&&e.addClass("has-counter")
})});var d=a("[data-ed-counter-like]");d.live("click",function(){var c=a(this),e=(c.parents("[data-ed-post-likes]"),c.data("id"));b.dialog({content:b.ajax("site/views/likes/popbox",{postid:e})})})}),ed.define("site/src/posts",function(){EasyDiscuss.Controller("PostItems",{defaultOptions:{activefiltertype:null,"{allPostsFilter}":".allPostsFilter","{newPostsFilter}":".newPostsFilter","{unResolvedFilter}":".unResolvedFilter","{resolvedFilter}":".resolvedFilter","{unAnsweredFilter}":".unAnsweredFilter","{sortLatest}":".sortLatest","{sortPopular}":".sortPopular","{ulList}":"ul.normal","{emptyList}":"div.empty","{loader}":".loader","{pagination}":".dc-pagination","{filterTab}":"[data-filter-tab]","{sortTab}":"[data-sort-tab]"}},function(a){return{init:function(){},doSort:function(b){a.sortTab().removeClass("active").filterBy("sortType",b).addClass("active"),filterType=a.options.activefiltertype,a.doFilter(filterType,b)
},doFilter:function(b,c){a.filterTab().removeClass("active").filterBy("filterType",b).addClass("active"),a.options.activefiltertype=b,void 0===c&&(c="latest"),a.loader().show(),a.emptyList().hide(),a.ulList().children("li").remove(),EasyDiscuss.ajax("site.views.index.filter",{filter:b,sort:c,id:a.element.data("id"),view:a.element.data("view")}).done(function(b,c){a.loader().hide(),a.ulList().append(b),a.pagination().html(c)}).fail(function(){a.loader().hide()}).always(function(){})},"{filterTab} click":function(b){var c=b.data("filterType");
a.doFilter(c)},"{sortTab} click":function(b){var c=b.data("sortType");a.doSort(c)}}})}),ed.define("site/src/profile",["edq","easydiscuss","abstract"],function(a,b,c){var d=new c(function(){return{opts:{id:null,activefiltertype:null,activeSortType:null,"{tabs}":"[data-profile-tab]","{tabContents}":".tabContents","{loader}":".loader","{itemList}":"[data-list-item]","{emptyList}":"[data-list-empty]","{emptyText}":"[data-list-empty-text]","{pagination}":"[data-profile-pagination]","{tabsTitle}":"[data-ed-tabs-content-title]","{tabsTitleHidden}":"[data-ed-tabs-content-title-hidden]"},init:function(){this.options.userid=this.element.data("id"),this.loader().hide(),this.initializeTabs()
},initializeTabs:function(){var b=this.options.defaultTab,c=a.uri(window.location).anchor();c&&(b=c.charAt(0).toUpperCase()+c.slice(1))},loadTabContents:function(a,c){var d=this.itemList(),e=this.loader(),f=this.emptyList(),g=this.emptyText(),h=this.pagination(),i=this.tabsTitle(),j=this.tabsTitleHidden().text();this.tabs().removeClass("active").filterBy("filterType",a).addClass("active"),e.show(),i.empty(),i.append(j+" - "+c),f.addClass("t-hidden"),d.empty(),b.ajax("site.views.profile.tab",{type:a,id:this.options.userid}).done(function(a,b,c){a?(d.append(a),h.html(b)):(c&&g.html(c),f.removeClass("t-hidden"),h.html(""))
}).always(function(){e.hide()})},"{tabs} click":function(a){var b=a.data("filterType"),c=a.text();this.loadTabContents(b,c)}}});return d}),ed.define("site/src/question",["jquery","site/src/ed"],function(a){var d=a(".addComment"),j=(a(".commentFormContainer"),a(".commentsList"),a(".commentLoadMore"),a(".postLocation"),a(".locationData"),{init:function(){d.on("click",function(){})}});return j}),ed.define("site/src/ratings",["edq","jquery.raty"],function(a){var b=a("[data-ed-ratings-stars]"),c=b.data("id");b.raty({score:b.data("score"),readOnly:b.data("locked"),click:function(d){var f=a(this),g=f.parents("[data-ed-ratings]"),h=g.find("[data-ed-ratings-message]"),i=g.find("[data-ed-ratings-total]");
b.raty({score:d,readOnly:!0}),EasyDiscuss.ajax("site/views/ratings/submit",{score:d,postId:c}).done(function(a,c,d){b.raty({score:a,readOnly:!0}),h.html(d),i.text(c.toString()),g.addClass("is-voted")})}})}),ed.define("site/src/subscription",["edq","easydiscuss","selectize"],function(a,b){function j(a){var c=g.data("id");1==c?(g.text("Site subscription is not active."),g.data("id",0),h.removeClass("is-subscribe")):(g.text("Site subscription is active."),g.data("id",1),h.addClass("is-subscribe")),b.ajax("site.views.subscription.subscribeToggle",{id:a}).done(function(){})
}function k(){b.dialog({content:b.ajax("site/views/subscription/form",{cid:0,type:"site"})})}var c=a("[data-subscription-tab]"),d=a("[data-ed-subscription-item]"),e=a("[data-ed-subscription-pagination]"),f=a("[data-ed-subscribe-action]"),g=a("[data-ed-site-active]"),h=a("[data-ed-subscription-action]"),i=a("[data-ed-subscription]").data("id");window.initSelectize=function(c){self=a(c);var d=self.find("[data-ed-subscription-settings]");d.each(function(){var d=a(this),e=d.data("method"),f=d.parents(c),g=f.data("id"),h=d.parents("[data-ed-susbcribe-select]"),i=h.find("[data-ed-subscribe-select-loading]");
d.selectize({isFocused:!0,onChange:function(a){i.show(),b.ajax("site/views/subscription/"+e,{id:g,data:a}).done(function(){}).always(function(){i.hide()})}})})},window.initSelectize("[data-ed-subscription-settings-site]"),window.initSelectize("[data-ed-subscription-settings-category]"),c.live("click",function(f){f.preventDefault();var g=a(this),h=a("[data-ed-subscription-loading]"),j=a("[data-ed-subscription-empty]");filterType=g.data("filterType"),c.removeClass("active"),g.addClass("active"),h.show(),j.removeClass("is-empty"),d.empty(),b.ajax("site/views/subscription/tab",{type:filterType,id:i}).done(function(a,b){a?(d.append(a),e.html(b),window.initSelectize("[data-ed-subscription-settings-category]")):(j.addClass("is-empty"),e.html(""))
}).always(function(){h.hide()})}),f.live("click",function(){var a=f.data("id"),b=f.data("is-subscribe");return 1===b||0===b?(j(a),void 0):(k(a),void 0)})}),ed.define("site/src/toolbar",["edq","easydiscuss","abstract"],function(a,b,c){var d=new c(function(a){return{opts:{"{items}":".toolbarItem","{dropdowns}":".dropdown-menu",notifications:{enabled:!1,interval:3e4},"{notificationWrapper}":"[data-ed-notifications-wrapper]","{notificationCounter}":"[data-ed-notifications-counter]",conversations:{enabled:!1,interval:3e4},"{conversationWrapper}":"[data-ed-conversations-wrapper]","{conversationCounter}":"[data-ed-conversations-counter]","{loginLink}":".loginLink","{loginDropDown}":".loginDropDown","{profileLink}":".profileLink","{profileDropDown}":".profileDropDown"},init:function(){a.checkNotifications(),a.checkConversations()
},checkNotifications:function(){a.options.notifications.enabled&&!function c(){setTimeout(function(){b.ajax("site/views/notifications/count",{},{type:"jsonp"}).done(function(b){return 0==b?(a.notificationWrapper().removeClass("has-new"),c(),void 0):(a.notificationWrapper().addClass("has-new"),a.notificationCounter().html(b),c(),void 0)})},a.options.notifications.interval)}()},checkConversations:function(){a.options.conversations.enabled&&!function c(){setTimeout(function(){b.ajax("site/views/conversation/count",{},{type:"jsonp"}).done(function(b){return 0==b?(a.conversationWrapper().removeClass("has-new"),c(),void 0):(a.conversationWrapper().addClass("has-new"),a.conversationCounter().html(b),c(),void 0)
})},a.options.notifications.interval)}()},"{loginLink} click":function(){a.messageDropDown().hide(),a.notificationDropDown().hide(),a.loginDropDown().toggle()},"{profileLink} tap":function(){a.messageDropDown().hide(),a.notificationDropDown().hide(),a.profileDropDown().toggle()}}});return d}),ed.define("site/src/votes",["edq","easydiscuss","abstract"],function(a,b,c){return new c(function(a){return{opts:{id:null,"{voteButton}":"[data-ed-vote-button]","{counter}":"[data-ed-vote-counter]"},init:function(){a.options.id=a.element.data("id")
},vote:function(c){b.ajax("site.views.votes.add",{id:a.options.id,type:c}).done(function(b){a.counter().text(b)}).fail(function(a){b.dialog({content:a})})},"{voteButton} click":function(b){var c=b.data("direction");a.vote(c)}}})});